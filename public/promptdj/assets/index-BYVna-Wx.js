(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=t(o);fetch(o.href,r)}})();/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const dt=globalThis,rn=dt.ShadowRoot&&(dt.ShadyCSS===void 0||dt.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,an=Symbol(),vn=new WeakMap;let ro=class{constructor(e,t,n){if(this._$cssResult$=!0,n!==an)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(rn&&e===void 0){const n=t!==void 0&&t.length===1;n&&(e=vn.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&vn.set(t,e))}return e}toString(){return this.cssText}};const Wo=i=>new ro(typeof i=="string"?i:i+"",void 0,an),_e=(i,...e)=>{const t=i.length===1?i[0]:e.reduce((n,o,r)=>n+(l=>{if(l._$cssResult$===!0)return l.cssText;if(typeof l=="number")return l;throw Error("Value passed to 'css' function must be a 'css' function result: "+l+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(o)+i[r+1],i[0]);return new ro(t,i,an)},zo=(i,e)=>{if(rn)i.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const t of e){const n=document.createElement("style"),o=dt.litNonce;o!==void 0&&n.setAttribute("nonce",o),n.textContent=t.cssText,i.appendChild(n)}},Cn=rn?i=>i:i=>i instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return Wo(t)})(i):i;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Yo,defineProperty:Zo,getOwnPropertyDescriptor:Ko,getOwnPropertyNames:Xo,getOwnPropertySymbols:Qo,getPrototypeOf:jo}=Object,me=globalThis,Tn=me.trustedTypes,es=Tn?Tn.emptyScript:"",bt=me.reactiveElementPolyfillSupport,Qe=(i,e)=>i,mt={toAttribute(i,e){switch(e){case Boolean:i=i?es:null;break;case Object:case Array:i=i==null?i:JSON.stringify(i)}return i},fromAttribute(i,e){let t=i;switch(e){case Boolean:t=i!==null;break;case Number:t=i===null?null:Number(i);break;case Object:case Array:try{t=JSON.parse(i)}catch{t=null}}return t}},ln=(i,e)=>!Yo(i,e),_n={attribute:!0,type:String,converter:mt,reflect:!1,useDefault:!1,hasChanged:ln};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),me.litPropertyMetadata??(me.litPropertyMetadata=new WeakMap);let De=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=_n){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const n=Symbol(),o=this.getPropertyDescriptor(e,n,t);o!==void 0&&Zo(this.prototype,e,o)}}static getPropertyDescriptor(e,t,n){const{get:o,set:r}=Ko(this.prototype,e)??{get(){return this[t]},set(l){this[t]=l}};return{get:o,set(l){const u=o==null?void 0:o.call(this);r==null||r.call(this,l),this.requestUpdate(e,u,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??_n}static _$Ei(){if(this.hasOwnProperty(Qe("elementProperties")))return;const e=jo(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Qe("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Qe("properties"))){const t=this.properties,n=[...Xo(t),...Qo(t)];for(const o of n)this.createProperty(o,t[o])}const e=this[Symbol.metadata];if(e!==null){const t=litPropertyMetadata.get(e);if(t!==void 0)for(const[n,o]of t)this.elementProperties.set(n,o)}this._$Eh=new Map;for(const[t,n]of this.elementProperties){const o=this._$Eu(t,n);o!==void 0&&this._$Eh.set(o,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const o of n)t.unshift(Cn(o))}else e!==void 0&&t.push(Cn(e));return t}static _$Eu(e,t){const n=t.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(t=>t(this))}addController(e){var t;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((t=e.hostConnected)==null||t.call(e))}removeController(e){var t;(t=this._$EO)==null||t.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const n of t.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return zo(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(t=>{var n;return(n=t.hostConnected)==null?void 0:n.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(t=>{var n;return(n=t.hostDisconnected)==null?void 0:n.call(t)})}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$ET(e,t){var r;const n=this.constructor.elementProperties.get(e),o=this.constructor._$Eu(e,n);if(o!==void 0&&n.reflect===!0){const l=(((r=n.converter)==null?void 0:r.toAttribute)!==void 0?n.converter:mt).toAttribute(t,n.type);this._$Em=e,l==null?this.removeAttribute(o):this.setAttribute(o,l),this._$Em=null}}_$AK(e,t){var r,l;const n=this.constructor,o=n._$Eh.get(e);if(o!==void 0&&this._$Em!==o){const u=n.getPropertyOptions(o),d=typeof u.converter=="function"?{fromAttribute:u.converter}:((r=u.converter)==null?void 0:r.fromAttribute)!==void 0?u.converter:mt;this._$Em=o,this[o]=d.fromAttribute(t,u.type)??((l=this._$Ej)==null?void 0:l.get(o))??null,this._$Em=null}}requestUpdate(e,t,n){var o;if(e!==void 0){const r=this.constructor,l=this[e];if(n??(n=r.getPropertyOptions(e)),!((n.hasChanged??ln)(l,t)||n.useDefault&&n.reflect&&l===((o=this._$Ej)==null?void 0:o.get(e))&&!this.hasAttribute(r._$Eu(e,n))))return;this.C(e,t,n)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,t,{useDefault:n,reflect:o,wrapped:r},l){n&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,l??t??this[e]),r!==!0||l!==void 0)||(this._$AL.has(e)||(this.hasUpdated||n||(t=void 0),this._$AL.set(e,t)),o===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var n;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[r,l]of this._$Ep)this[r]=l;this._$Ep=void 0}const o=this.constructor.elementProperties;if(o.size>0)for(const[r,l]of o){const{wrapped:u}=l,d=this[r];u!==!0||this._$AL.has(r)||d===void 0||this.C(r,void 0,l,d)}}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),(n=this._$EO)==null||n.forEach(o=>{var r;return(r=o.hostUpdate)==null?void 0:r.call(o)}),this.update(t)):this._$EM()}catch(o){throw e=!1,this._$EM(),o}e&&this._$AE(t)}willUpdate(e){}_$AE(e){var t;(t=this._$EO)==null||t.forEach(n=>{var o;return(o=n.hostUpdated)==null?void 0:o.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(t=>this._$ET(t,this[t]))),this._$EM()}updated(e){}firstUpdated(e){}};De.elementStyles=[],De.shadowRootOptions={mode:"open"},De[Qe("elementProperties")]=new Map,De[Qe("finalized")]=new Map,bt==null||bt({ReactiveElement:De}),(me.reactiveElementVersions??(me.reactiveElementVersions=[])).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const je=globalThis,gt=je.trustedTypes,xn=gt?gt.createPolicy("lit-html",{createHTML:i=>i}):void 0,ao="$lit$",he=`lit$${Math.random().toFixed(9).slice(2)}$`,lo="?"+he,ts=`<${lo}>`,Me=document,tt=()=>Me.createComment(""),nt=i=>i===null||typeof i!="object"&&typeof i!="function",un=Array.isArray,ns=i=>un(i)||typeof(i==null?void 0:i[Symbol.iterator])=="function",Vt=`[ 	
\f\r]`,ze=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,En=/-->/g,Sn=/>/g,Ee=RegExp(`>|${Vt}(?:([^\\s"'>=/]+)(${Vt}*=${Vt}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),An=/'/g,wn=/"/g,uo=/^(?:script|style|textarea|title)$/i,co=i=>(e,...t)=>({_$litType$:i,strings:e,values:t}),J=co(1),le=co(2),ye=Symbol.for("lit-noChange"),q=Symbol.for("lit-nothing"),Mn=new WeakMap,Ae=Me.createTreeWalker(Me,129);function fo(i,e){if(!un(i)||!i.hasOwnProperty("raw"))throw Error("invalid template strings array");return xn!==void 0?xn.createHTML(e):e}const is=(i,e)=>{const t=i.length-1,n=[];let o,r=e===2?"<svg>":e===3?"<math>":"",l=ze;for(let u=0;u<t;u++){const d=i[u];let c,f,p=-1,h=0;for(;h<d.length&&(l.lastIndex=h,f=l.exec(d),f!==null);)h=l.lastIndex,l===ze?f[1]==="!--"?l=En:f[1]!==void 0?l=Sn:f[2]!==void 0?(uo.test(f[2])&&(o=RegExp("</"+f[2],"g")),l=Ee):f[3]!==void 0&&(l=Ee):l===Ee?f[0]===">"?(l=o??ze,p=-1):f[1]===void 0?p=-2:(p=l.lastIndex-f[2].length,c=f[1],l=f[3]===void 0?Ee:f[3]==='"'?wn:An):l===wn||l===An?l=Ee:l===En||l===Sn?l=ze:(l=Ee,o=void 0);const m=l===Ee&&i[u+1].startsWith("/>")?" ":"";r+=l===ze?d+ts:p>=0?(n.push(c),d.slice(0,p)+ao+d.slice(p)+he+m):d+he+(p===-2?u:m)}return[fo(i,r+(i[t]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),n]};class it{constructor({strings:e,_$litType$:t},n){let o;this.parts=[];let r=0,l=0;const u=e.length-1,d=this.parts,[c,f]=is(e,t);if(this.el=it.createElement(c,n),Ae.currentNode=this.el.content,t===2||t===3){const p=this.el.content.firstChild;p.replaceWith(...p.childNodes)}for(;(o=Ae.nextNode())!==null&&d.length<u;){if(o.nodeType===1){if(o.hasAttributes())for(const p of o.getAttributeNames())if(p.endsWith(ao)){const h=f[l++],m=o.getAttribute(p).split(he),g=/([.?@])?(.*)/.exec(h);d.push({type:1,index:r,name:g[2],strings:m,ctor:g[1]==="."?ss:g[1]==="?"?rs:g[1]==="@"?as:It}),o.removeAttribute(p)}else p.startsWith(he)&&(d.push({type:6,index:r}),o.removeAttribute(p));if(uo.test(o.tagName)){const p=o.textContent.split(he),h=p.length-1;if(h>0){o.textContent=gt?gt.emptyScript:"";for(let m=0;m<h;m++)o.append(p[m],tt()),Ae.nextNode(),d.push({type:2,index:++r});o.append(p[h],tt())}}}else if(o.nodeType===8)if(o.data===lo)d.push({type:2,index:r});else{let p=-1;for(;(p=o.data.indexOf(he,p+1))!==-1;)d.push({type:7,index:r}),p+=he.length-1}r++}}static createElement(e,t){const n=Me.createElement("template");return n.innerHTML=e,n}}function Fe(i,e,t=i,n){var l,u;if(e===ye)return e;let o=n!==void 0?(l=t._$Co)==null?void 0:l[n]:t._$Cl;const r=nt(e)?void 0:e._$litDirective$;return(o==null?void 0:o.constructor)!==r&&((u=o==null?void 0:o._$AO)==null||u.call(o,!1),r===void 0?o=void 0:(o=new r(i),o._$AT(i,t,n)),n!==void 0?(t._$Co??(t._$Co=[]))[n]=o:t._$Cl=o),o!==void 0&&(e=Fe(i,o._$AS(i,e.values),o,n)),e}class os{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:n}=this._$AD,o=((e==null?void 0:e.creationScope)??Me).importNode(t,!0);Ae.currentNode=o;let r=Ae.nextNode(),l=0,u=0,d=n[0];for(;d!==void 0;){if(l===d.index){let c;d.type===2?c=new rt(r,r.nextSibling,this,e):d.type===1?c=new d.ctor(r,d.name,d.strings,this,e):d.type===6&&(c=new ls(r,this,e)),this._$AV.push(c),d=n[++u]}l!==(d==null?void 0:d.index)&&(r=Ae.nextNode(),l++)}return Ae.currentNode=Me,o}p(e){let t=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}}class rt{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,t,n,o){this.type=2,this._$AH=q,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=o,this._$Cv=(o==null?void 0:o.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Fe(this,e,t),nt(e)?e===q||e==null||e===""?(this._$AH!==q&&this._$AR(),this._$AH=q):e!==this._$AH&&e!==ye&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):ns(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==q&&nt(this._$AH)?this._$AA.nextSibling.data=e:this.T(Me.createTextNode(e)),this._$AH=e}$(e){var r;const{values:t,_$litType$:n}=e,o=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=it.createElement(fo(n.h,n.h[0]),this.options)),n);if(((r=this._$AH)==null?void 0:r._$AD)===o)this._$AH.p(t);else{const l=new os(o,this),u=l.u(this.options);l.p(t),this.T(u),this._$AH=l}}_$AC(e){let t=Mn.get(e.strings);return t===void 0&&Mn.set(e.strings,t=new it(e)),t}k(e){un(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,o=0;for(const r of e)o===t.length?t.push(n=new rt(this.O(tt()),this.O(tt()),this,this.options)):n=t[o],n._$AI(r),o++;o<t.length&&(this._$AR(n&&n._$AB.nextSibling,o),t.length=o)}_$AR(e=this._$AA.nextSibling,t){var n;for((n=this._$AP)==null?void 0:n.call(this,!1,!0,t);e&&e!==this._$AB;){const o=e.nextSibling;e.remove(),e=o}}setConnected(e){var t;this._$AM===void 0&&(this._$Cv=e,(t=this._$AP)==null||t.call(this,e))}}class It{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,n,o,r){this.type=1,this._$AH=q,this._$AN=void 0,this.element=e,this.name=t,this._$AM=o,this.options=r,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=q}_$AI(e,t=this,n,o){const r=this.strings;let l=!1;if(r===void 0)e=Fe(this,e,t,0),l=!nt(e)||e!==this._$AH&&e!==ye,l&&(this._$AH=e);else{const u=e;let d,c;for(e=r[0],d=0;d<r.length-1;d++)c=Fe(this,u[n+d],t,d),c===ye&&(c=this._$AH[d]),l||(l=!nt(c)||c!==this._$AH[d]),c===q?e=q:e!==q&&(e+=(c??"")+r[d+1]),this._$AH[d]=c}l&&!o&&this.j(e)}j(e){e===q?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class ss extends It{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===q?void 0:e}}class rs extends It{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==q)}}class as extends It{constructor(e,t,n,o,r){super(e,t,n,o,r),this.type=5}_$AI(e,t=this){if((e=Fe(this,e,t,0)??q)===ye)return;const n=this._$AH,o=e===q&&n!==q||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,r=e!==q&&(n===q||o);o&&this.element.removeEventListener(this.name,this,n),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t;typeof this._$AH=="function"?this._$AH.call(((t=this.options)==null?void 0:t.host)??this.element,e):this._$AH.handleEvent(e)}}class ls{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Fe(this,e)}}const $t=je.litHtmlPolyfillSupport;$t==null||$t(it,rt),(je.litHtmlVersions??(je.litHtmlVersions=[])).push("3.3.0");const us=(i,e,t)=>{const n=(t==null?void 0:t.renderBefore)??e;let o=n._$litPart$;if(o===void 0){const r=(t==null?void 0:t.renderBefore)??null;n._$litPart$=o=new rt(e.insertBefore(tt(),r),r,void 0,t??{})}return o._$AI(i),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const we=globalThis;let j=class extends De{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t;const e=super.createRenderRoot();return(t=this.renderOptions).renderBefore??(t.renderBefore=e.firstChild),e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=us(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return ye}};var so;j._$litElement$=!0,j.finalized=!0,(so=we.litElementHydrateSupport)==null||so.call(we,{LitElement:j});const Ft=we.litElementPolyfillSupport;Ft==null||Ft({LitElement:j});(we.litElementVersions??(we.litElementVersions=[])).push("4.2.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ce=i=>(e,t)=>{t!==void 0?t.addInitializer(()=>{customElements.define(i,e)}):customElements.define(i,e)};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const cs={attribute:!0,type:String,converter:mt,reflect:!1,hasChanged:ln},ds=(i=cs,e,t)=>{const{kind:n,metadata:o}=t;let r=globalThis.litPropertyMetadata.get(o);if(r===void 0&&globalThis.litPropertyMetadata.set(o,r=new Map),n==="setter"&&((i=Object.create(i)).wrapped=!0),r.set(t.name,i),n==="accessor"){const{name:l}=t;return{set(u){const d=e.get.call(this);e.set.call(this,u),this.requestUpdate(l,d,i)},init(u){return u!==void 0&&this.C(l,void 0,i,u),u}}}if(n==="setter"){const{name:l}=t;return function(u){const d=this[l];e.call(this,u),this.requestUpdate(l,d,i)}}throw Error("Unsupported decorator location: "+n)};function O(i){return(e,t)=>typeof t=="object"?ds(i,e,t):((n,o,r)=>{const l=o.hasOwnProperty(r);return o.constructor.createProperty(r,n),l?Object.getOwnPropertyDescriptor(o,r):void 0})(i,e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function X(i){return O({...i,state:!0,attribute:!1})}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const fs=(i,e,t)=>(t.configurable=!0,t.enumerable=!0,Reflect.decorate&&typeof e!="object"&&Object.defineProperty(i,e,t),t);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function de(i,e){return(t,n,o)=>{const r=l=>{var u;return((u=l.renderRoot)==null?void 0:u.querySelector(i))??null};return fs(t,n,{get(){return r(this)}})}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const po={ATTRIBUTE:1},ho=i=>(...e)=>({_$litDirective$:i,values:e});let mo=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,n){this._$Ct=e,this._$AM=t,this._$Ci=n}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ot=ho(class extends mo{constructor(i){var e;if(super(i),i.type!==po.ATTRIBUTE||i.name!=="class"||((e=i.strings)==null?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(i){return" "+Object.keys(i).filter(e=>i[e]).join(" ")+" "}update(i,[e]){var n,o;if(this.st===void 0){this.st=new Set,i.strings!==void 0&&(this.nt=new Set(i.strings.join(" ").split(/\s/).filter(r=>r!=="")));for(const r in e)e[r]&&!((n=this.nt)!=null&&n.has(r))&&this.st.add(r);return this.render(e)}const t=i.element.classList;for(const r of this.st)r in e||(t.remove(r),this.st.delete(r));for(const r in e){const l=!!e[r];l===this.st.has(r)||(o=this.nt)!=null&&o.has(r)||(l?(t.add(r),this.st.add(r)):(t.remove(r),this.st.delete(r)))}return ye}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const go="important",ps=" !"+go,yo=ho(class extends mo{constructor(i){var e;if(super(i),i.type!==po.ATTRIBUTE||i.name!=="style"||((e=i.strings)==null?void 0:e.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(i){return Object.keys(i).reduce((e,t)=>{const n=i[t];return n==null?e:e+`${t=t.includes("-")?t:t.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${n};`},"")}update(i,[e]){const{style:t}=i.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const n of this.ft)e[n]==null&&(this.ft.delete(n),n.includes("-")?t.removeProperty(n):t[n]=null);for(const n in e){const o=e[n];if(o!=null){this.ft.add(n);const r=typeof o=="string"&&o.endsWith(ps);n.includes("-")||r?t.setProperty(n,r?o.slice(0,-11):o,r?go:""):t[n]=o}}return ye}});var $;(function(i){i.assertEqual=o=>{};function e(o){}i.assertIs=e;function t(o){throw new Error}i.assertNever=t,i.arrayToEnum=o=>{const r={};for(const l of o)r[l]=l;return r},i.getValidEnumValues=o=>{const r=i.objectKeys(o).filter(u=>typeof o[o[u]]!="number"),l={};for(const u of r)l[u]=o[u];return i.objectValues(l)},i.objectValues=o=>i.objectKeys(o).map(function(r){return o[r]}),i.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{const r=[];for(const l in o)Object.prototype.hasOwnProperty.call(o,l)&&r.push(l);return r},i.find=(o,r)=>{for(const l of o)if(r(l))return l},i.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&Number.isFinite(o)&&Math.floor(o)===o;function n(o,r=" | "){return o.map(l=>typeof l=="string"?`'${l}'`:l).join(r)}i.joinValues=n,i.jsonStringifyReplacer=(o,r)=>typeof r=="bigint"?r.toString():r})($||($={}));var In;(function(i){i.mergeShapes=(e,t)=>({...e,...t})})(In||(In={}));const T=$.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),pe=i=>{switch(typeof i){case"undefined":return T.undefined;case"string":return T.string;case"number":return Number.isNaN(i)?T.nan:T.number;case"boolean":return T.boolean;case"function":return T.function;case"bigint":return T.bigint;case"symbol":return T.symbol;case"object":return Array.isArray(i)?T.array:i===null?T.null:i.then&&typeof i.then=="function"&&i.catch&&typeof i.catch=="function"?T.promise:typeof Map<"u"&&i instanceof Map?T.map:typeof Set<"u"&&i instanceof Set?T.set:typeof Date<"u"&&i instanceof Date?T.date:T.object;default:return T.unknown}},v=$.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ue extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(r){return r.message},n={_errors:[]},o=r=>{for(const l of r.issues)if(l.code==="invalid_union")l.unionErrors.map(o);else if(l.code==="invalid_return_type")o(l.returnTypeError);else if(l.code==="invalid_arguments")o(l.argumentsError);else if(l.path.length===0)n._errors.push(t(l));else{let u=n,d=0;for(;d<l.path.length;){const c=l.path[d];d===l.path.length-1?(u[c]=u[c]||{_errors:[]},u[c]._errors.push(t(l))):u[c]=u[c]||{_errors:[]},u=u[c],d++}}};return o(this),n}static assert(e){if(!(e instanceof ue))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,$.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const o of this.issues)o.path.length>0?(t[o.path[0]]=t[o.path[0]]||[],t[o.path[0]].push(e(o))):n.push(e(o));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}ue.create=i=>new ue(i);const qt=(i,e)=>{let t;switch(i.code){case v.invalid_type:i.received===T.undefined?t="Required":t=`Expected ${i.expected}, received ${i.received}`;break;case v.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(i.expected,$.jsonStringifyReplacer)}`;break;case v.unrecognized_keys:t=`Unrecognized key(s) in object: ${$.joinValues(i.keys,", ")}`;break;case v.invalid_union:t="Invalid input";break;case v.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${$.joinValues(i.options)}`;break;case v.invalid_enum_value:t=`Invalid enum value. Expected ${$.joinValues(i.options)}, received '${i.received}'`;break;case v.invalid_arguments:t="Invalid function arguments";break;case v.invalid_return_type:t="Invalid function return type";break;case v.invalid_date:t="Invalid date";break;case v.invalid_string:typeof i.validation=="object"?"includes"in i.validation?(t=`Invalid input: must include "${i.validation.includes}"`,typeof i.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${i.validation.position}`)):"startsWith"in i.validation?t=`Invalid input: must start with "${i.validation.startsWith}"`:"endsWith"in i.validation?t=`Invalid input: must end with "${i.validation.endsWith}"`:$.assertNever(i.validation):i.validation!=="regex"?t=`Invalid ${i.validation}`:t="Invalid";break;case v.too_small:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`:t="Invalid input";break;case v.too_big:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="bigint"?t=`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`:t="Invalid input";break;case v.custom:t="Invalid input";break;case v.invalid_intersection_types:t="Intersection results could not be merged";break;case v.not_multiple_of:t=`Number must be a multiple of ${i.multipleOf}`;break;case v.not_finite:t="Number must be finite";break;default:t=e.defaultError,$.assertNever(i)}return{message:t}};let hs=qt;function ms(){return hs}const gs=i=>{const{data:e,path:t,errorMaps:n,issueData:o}=i,r=[...t,...o.path||[]],l={...o,path:r};if(o.message!==void 0)return{...o,path:r,message:o.message};let u="";const d=n.filter(c=>!!c).slice().reverse();for(const c of d)u=c(l,{data:e,defaultError:u}).message;return{...o,path:r,message:u}};function C(i,e){const t=ms(),n=gs({issueData:e,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,t,t===qt?void 0:qt].filter(o=>!!o)});i.common.issues.push(n)}class z{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const o of t){if(o.status==="aborted")return M;o.status==="dirty"&&e.dirty(),n.push(o.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const o of t){const r=await o.key,l=await o.value;n.push({key:r,value:l})}return z.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const o of t){const{key:r,value:l}=o;if(r.status==="aborted"||l.status==="aborted")return M;r.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),r.value!=="__proto__"&&(typeof l.value<"u"||o.alwaysSet)&&(n[r.value]=l.value)}return{status:e.value,value:n}}}const M=Object.freeze({status:"aborted"}),Ze=i=>({status:"dirty",value:i}),Q=i=>({status:"valid",value:i}),Pn=i=>i.status==="aborted",Rn=i=>i.status==="dirty",Le=i=>i.status==="valid",yt=i=>typeof Promise<"u"&&i instanceof Promise;var x;(function(i){i.errToObj=e=>typeof e=="string"?{message:e}:e||{},i.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(x||(x={}));class se{constructor(e,t,n,o){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=o}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const kn=(i,e)=>{if(Le(e))return{success:!0,data:e.value};if(!i.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new ue(i.common.issues);return this._error=t,this._error}}};function R(i){if(!i)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:o}=i;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:(l,u)=>{const{message:d}=i;return l.code==="invalid_enum_value"?{message:d??u.defaultError}:typeof u.data>"u"?{message:d??n??u.defaultError}:l.code!=="invalid_type"?{message:u.defaultError}:{message:d??t??u.defaultError}},description:o}}class b{get description(){return this._def.description}_getType(e){return pe(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:pe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new z,ctx:{common:e.parent.common,data:e.data,parsedType:pe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(yt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){const n={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:pe(e)},o=this._parseSync({data:e,path:n.path,parent:n});return kn(n,o)}"~validate"(e){var n,o;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:pe(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:t});return Le(r)?{value:r.value}:{issues:t.common.issues}}catch(r){(o=(n=r==null?void 0:r.message)==null?void 0:n.toLowerCase())!=null&&o.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(r=>Le(r)?{value:r.value}:{issues:t.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:pe(e)},o=this._parse({data:e,path:n.path,parent:n}),r=await(yt(o)?o:Promise.resolve(o));return kn(n,r)}refine(e,t){const n=o=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(o):t;return this._refinement((o,r)=>{const l=e(o),u=()=>r.addIssue({code:v.custom,...n(o)});return typeof Promise<"u"&&l instanceof Promise?l.then(d=>d?!0:(u(),!1)):l?!0:(u(),!1)})}refinement(e,t){return this._refinement((n,o)=>e(n)?!0:(o.addIssue(typeof t=="function"?t(n,o):t),!1))}_refinement(e){return new Ge({schema:this,typeName:w.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return ge.create(this,this._def)}nullable(){return qe.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return oe.create(this)}promise(){return xt.create(this,this._def)}or(e){return Ct.create([this,e],this._def)}and(e){return Tt.create(this,e,this._def)}transform(e){return new Ge({...R(this._def),schema:this,typeName:w.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Wt({...R(this._def),innerType:this,defaultValue:t,typeName:w.ZodDefault})}brand(){return new Us({typeName:w.ZodBranded,type:this,...R(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new zt({...R(this._def),innerType:this,catchValue:t,typeName:w.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return cn.create(this,e)}readonly(){return Yt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ys=/^c[^\s-]{8,}$/i,vs=/^[0-9a-z]+$/,Cs=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Ts=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,_s=/^[a-z0-9_-]{21}$/i,xs=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Es=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Ss=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,As="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Lt;const ws=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ms=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Is=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Ps=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Rs=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ks=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,vo="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Ds=new RegExp(`^${vo}$`);function Co(i){let e="[0-5]\\d";i.precision?e=`${e}\\.\\d{${i.precision}}`:i.precision==null&&(e=`${e}(\\.\\d+)?`);const t=i.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function Ns(i){return new RegExp(`^${Co(i)}$`)}function bs(i){let e=`${vo}T${Co(i)}`;const t=[];return t.push(i.local?"Z?":"Z"),i.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function Vs(i,e){return!!((e==="v4"||!e)&&ws.test(i)||(e==="v6"||!e)&&Is.test(i))}function $s(i,e){if(!xs.test(i))return!1;try{const[t]=i.split("."),n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),o=JSON.parse(atob(n));return!(typeof o!="object"||o===null||"typ"in o&&(o==null?void 0:o.typ)!=="JWT"||!o.alg||e&&o.alg!==e)}catch{return!1}}function Fs(i,e){return!!((e==="v4"||!e)&&Ms.test(i)||(e==="v6"||!e)&&Ps.test(i))}class ne extends b{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==T.string){const r=this._getOrReturnCtx(e);return C(r,{code:v.invalid_type,expected:T.string,received:r.parsedType}),M}const n=new z;let o;for(const r of this._def.checks)if(r.kind==="min")e.data.length<r.value&&(o=this._getOrReturnCtx(e,o),C(o,{code:v.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),n.dirty());else if(r.kind==="max")e.data.length>r.value&&(o=this._getOrReturnCtx(e,o),C(o,{code:v.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),n.dirty());else if(r.kind==="length"){const l=e.data.length>r.value,u=e.data.length<r.value;(l||u)&&(o=this._getOrReturnCtx(e,o),l?C(o,{code:v.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):u&&C(o,{code:v.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),n.dirty())}else if(r.kind==="email")Ss.test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"email",code:v.invalid_string,message:r.message}),n.dirty());else if(r.kind==="emoji")Lt||(Lt=new RegExp(As,"u")),Lt.test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"emoji",code:v.invalid_string,message:r.message}),n.dirty());else if(r.kind==="uuid")Ts.test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"uuid",code:v.invalid_string,message:r.message}),n.dirty());else if(r.kind==="nanoid")_s.test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"nanoid",code:v.invalid_string,message:r.message}),n.dirty());else if(r.kind==="cuid")ys.test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"cuid",code:v.invalid_string,message:r.message}),n.dirty());else if(r.kind==="cuid2")vs.test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"cuid2",code:v.invalid_string,message:r.message}),n.dirty());else if(r.kind==="ulid")Cs.test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"ulid",code:v.invalid_string,message:r.message}),n.dirty());else if(r.kind==="url")try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),C(o,{validation:"url",code:v.invalid_string,message:r.message}),n.dirty()}else r.kind==="regex"?(r.regex.lastIndex=0,r.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"regex",code:v.invalid_string,message:r.message}),n.dirty())):r.kind==="trim"?e.data=e.data.trim():r.kind==="includes"?e.data.includes(r.value,r.position)||(o=this._getOrReturnCtx(e,o),C(o,{code:v.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),n.dirty()):r.kind==="toLowerCase"?e.data=e.data.toLowerCase():r.kind==="toUpperCase"?e.data=e.data.toUpperCase():r.kind==="startsWith"?e.data.startsWith(r.value)||(o=this._getOrReturnCtx(e,o),C(o,{code:v.invalid_string,validation:{startsWith:r.value},message:r.message}),n.dirty()):r.kind==="endsWith"?e.data.endsWith(r.value)||(o=this._getOrReturnCtx(e,o),C(o,{code:v.invalid_string,validation:{endsWith:r.value},message:r.message}),n.dirty()):r.kind==="datetime"?bs(r).test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{code:v.invalid_string,validation:"datetime",message:r.message}),n.dirty()):r.kind==="date"?Ds.test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{code:v.invalid_string,validation:"date",message:r.message}),n.dirty()):r.kind==="time"?Ns(r).test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{code:v.invalid_string,validation:"time",message:r.message}),n.dirty()):r.kind==="duration"?Es.test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"duration",code:v.invalid_string,message:r.message}),n.dirty()):r.kind==="ip"?Vs(e.data,r.version)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"ip",code:v.invalid_string,message:r.message}),n.dirty()):r.kind==="jwt"?$s(e.data,r.alg)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"jwt",code:v.invalid_string,message:r.message}),n.dirty()):r.kind==="cidr"?Fs(e.data,r.version)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"cidr",code:v.invalid_string,message:r.message}),n.dirty()):r.kind==="base64"?Rs.test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"base64",code:v.invalid_string,message:r.message}),n.dirty()):r.kind==="base64url"?ks.test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"base64url",code:v.invalid_string,message:r.message}),n.dirty()):$.assertNever(r);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(o=>e.test(o),{validation:t,code:v.invalid_string,...x.errToObj(n)})}_addCheck(e){return new ne({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...x.errToObj(e)})}url(e){return this._addCheck({kind:"url",...x.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...x.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...x.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...x.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...x.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...x.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...x.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...x.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...x.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...x.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...x.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...x.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...x.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...x.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...x.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...x.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...x.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...x.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...x.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...x.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...x.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...x.errToObj(t)})}nonempty(e){return this.min(1,x.errToObj(e))}trim(){return new ne({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ne({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ne({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ne.create=i=>new ne({checks:[],typeName:w.ZodString,coerce:(i==null?void 0:i.coerce)??!1,...R(i)});function Ls(i,e){const t=(i.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,o=t>n?t:n,r=Number.parseInt(i.toFixed(o).replace(".","")),l=Number.parseInt(e.toFixed(o).replace(".",""));return r%l/10**o}class Ie extends b{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==T.number){const r=this._getOrReturnCtx(e);return C(r,{code:v.invalid_type,expected:T.number,received:r.parsedType}),M}let n;const o=new z;for(const r of this._def.checks)r.kind==="int"?$.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),C(n,{code:v.invalid_type,expected:"integer",received:"float",message:r.message}),o.dirty()):r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(n=this._getOrReturnCtx(e,n),C(n,{code:v.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),o.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(n=this._getOrReturnCtx(e,n),C(n,{code:v.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),o.dirty()):r.kind==="multipleOf"?Ls(e.data,r.value)!==0&&(n=this._getOrReturnCtx(e,n),C(n,{code:v.not_multiple_of,multipleOf:r.value,message:r.message}),o.dirty()):r.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),C(n,{code:v.not_finite,message:r.message}),o.dirty()):$.assertNever(r);return{status:o.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,x.toString(t))}gt(e,t){return this.setLimit("min",e,!1,x.toString(t))}lte(e,t){return this.setLimit("max",e,!0,x.toString(t))}lt(e,t){return this.setLimit("max",e,!1,x.toString(t))}setLimit(e,t,n,o){return new Ie({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:x.toString(o)}]})}_addCheck(e){return new Ie({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:x.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:x.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:x.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:x.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:x.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:x.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:x.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:x.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:x.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&$.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ie.create=i=>new Ie({checks:[],typeName:w.ZodNumber,coerce:(i==null?void 0:i.coerce)||!1,...R(i)});class Pe extends b{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==T.bigint)return this._getInvalidInput(e);let n;const o=new z;for(const r of this._def.checks)r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(n=this._getOrReturnCtx(e,n),C(n,{code:v.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),o.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(n=this._getOrReturnCtx(e,n),C(n,{code:v.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),o.dirty()):r.kind==="multipleOf"?e.data%r.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),C(n,{code:v.not_multiple_of,multipleOf:r.value,message:r.message}),o.dirty()):$.assertNever(r);return{status:o.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return C(t,{code:v.invalid_type,expected:T.bigint,received:t.parsedType}),M}gte(e,t){return this.setLimit("min",e,!0,x.toString(t))}gt(e,t){return this.setLimit("min",e,!1,x.toString(t))}lte(e,t){return this.setLimit("max",e,!0,x.toString(t))}lt(e,t){return this.setLimit("max",e,!1,x.toString(t))}setLimit(e,t,n,o){return new Pe({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:x.toString(o)}]})}_addCheck(e){return new Pe({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:x.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:x.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:x.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:x.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:x.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Pe.create=i=>new Pe({checks:[],typeName:w.ZodBigInt,coerce:(i==null?void 0:i.coerce)??!1,...R(i)});class vt extends b{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==T.boolean){const n=this._getOrReturnCtx(e);return C(n,{code:v.invalid_type,expected:T.boolean,received:n.parsedType}),M}return Q(e.data)}}vt.create=i=>new vt({typeName:w.ZodBoolean,coerce:(i==null?void 0:i.coerce)||!1,...R(i)});class Ue extends b{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==T.date){const r=this._getOrReturnCtx(e);return C(r,{code:v.invalid_type,expected:T.date,received:r.parsedType}),M}if(Number.isNaN(e.data.getTime())){const r=this._getOrReturnCtx(e);return C(r,{code:v.invalid_date}),M}const n=new z;let o;for(const r of this._def.checks)r.kind==="min"?e.data.getTime()<r.value&&(o=this._getOrReturnCtx(e,o),C(o,{code:v.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),n.dirty()):r.kind==="max"?e.data.getTime()>r.value&&(o=this._getOrReturnCtx(e,o),C(o,{code:v.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),n.dirty()):$.assertNever(r);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ue({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:x.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:x.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Ue.create=i=>new Ue({checks:[],coerce:(i==null?void 0:i.coerce)||!1,typeName:w.ZodDate,...R(i)});class Dn extends b{_parse(e){if(this._getType(e)!==T.symbol){const n=this._getOrReturnCtx(e);return C(n,{code:v.invalid_type,expected:T.symbol,received:n.parsedType}),M}return Q(e.data)}}Dn.create=i=>new Dn({typeName:w.ZodSymbol,...R(i)});class Nn extends b{_parse(e){if(this._getType(e)!==T.undefined){const n=this._getOrReturnCtx(e);return C(n,{code:v.invalid_type,expected:T.undefined,received:n.parsedType}),M}return Q(e.data)}}Nn.create=i=>new Nn({typeName:w.ZodUndefined,...R(i)});class bn extends b{_parse(e){if(this._getType(e)!==T.null){const n=this._getOrReturnCtx(e);return C(n,{code:v.invalid_type,expected:T.null,received:n.parsedType}),M}return Q(e.data)}}bn.create=i=>new bn({typeName:w.ZodNull,...R(i)});class Vn extends b{constructor(){super(...arguments),this._any=!0}_parse(e){return Q(e.data)}}Vn.create=i=>new Vn({typeName:w.ZodAny,...R(i)});class Ot extends b{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Q(e.data)}}Ot.create=i=>new Ot({typeName:w.ZodUnknown,...R(i)});class ve extends b{_parse(e){const t=this._getOrReturnCtx(e);return C(t,{code:v.invalid_type,expected:T.never,received:t.parsedType}),M}}ve.create=i=>new ve({typeName:w.ZodNever,...R(i)});class $n extends b{_parse(e){if(this._getType(e)!==T.undefined){const n=this._getOrReturnCtx(e);return C(n,{code:v.invalid_type,expected:T.void,received:n.parsedType}),M}return Q(e.data)}}$n.create=i=>new $n({typeName:w.ZodVoid,...R(i)});class oe extends b{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),o=this._def;if(t.parsedType!==T.array)return C(t,{code:v.invalid_type,expected:T.array,received:t.parsedType}),M;if(o.exactLength!==null){const l=t.data.length>o.exactLength.value,u=t.data.length<o.exactLength.value;(l||u)&&(C(t,{code:l?v.too_big:v.too_small,minimum:u?o.exactLength.value:void 0,maximum:l?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),n.dirty())}if(o.minLength!==null&&t.data.length<o.minLength.value&&(C(t,{code:v.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),n.dirty()),o.maxLength!==null&&t.data.length>o.maxLength.value&&(C(t,{code:v.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((l,u)=>o.type._parseAsync(new se(t,l,t.path,u)))).then(l=>z.mergeArray(n,l));const r=[...t.data].map((l,u)=>o.type._parseSync(new se(t,l,t.path,u)));return z.mergeArray(n,r)}get element(){return this._def.type}min(e,t){return new oe({...this._def,minLength:{value:e,message:x.toString(t)}})}max(e,t){return new oe({...this._def,maxLength:{value:e,message:x.toString(t)}})}length(e,t){return new oe({...this._def,exactLength:{value:e,message:x.toString(t)}})}nonempty(e){return this.min(1,e)}}oe.create=(i,e)=>new oe({type:i,minLength:null,maxLength:null,exactLength:null,typeName:w.ZodArray,...R(e)});function Ne(i){if(i instanceof G){const e={};for(const t in i.shape){const n=i.shape[t];e[t]=ge.create(Ne(n))}return new G({...i._def,shape:()=>e})}else return i instanceof oe?new oe({...i._def,type:Ne(i.element)}):i instanceof ge?ge.create(Ne(i.unwrap())):i instanceof qe?qe.create(Ne(i.unwrap())):i instanceof Re?Re.create(i.items.map(e=>Ne(e))):i}class G extends b{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=$.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==T.object){const c=this._getOrReturnCtx(e);return C(c,{code:v.invalid_type,expected:T.object,received:c.parsedType}),M}const{status:n,ctx:o}=this._processInputParams(e),{shape:r,keys:l}=this._getCached(),u=[];if(!(this._def.catchall instanceof ve&&this._def.unknownKeys==="strip"))for(const c in o.data)l.includes(c)||u.push(c);const d=[];for(const c of l){const f=r[c],p=o.data[c];d.push({key:{status:"valid",value:c},value:f._parse(new se(o,p,o.path,c)),alwaysSet:c in o.data})}if(this._def.catchall instanceof ve){const c=this._def.unknownKeys;if(c==="passthrough")for(const f of u)d.push({key:{status:"valid",value:f},value:{status:"valid",value:o.data[f]}});else if(c==="strict")u.length>0&&(C(o,{code:v.unrecognized_keys,keys:u}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const f of u){const p=o.data[f];d.push({key:{status:"valid",value:f},value:c._parse(new se(o,p,o.path,f)),alwaysSet:f in o.data})}}return o.common.async?Promise.resolve().then(async()=>{const c=[];for(const f of d){const p=await f.key,h=await f.value;c.push({key:p,value:h,alwaysSet:f.alwaysSet})}return c}).then(c=>z.mergeObjectSync(n,c)):z.mergeObjectSync(n,d)}get shape(){return this._def.shape()}strict(e){return x.errToObj,new G({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var r,l;const o=((l=(r=this._def).errorMap)==null?void 0:l.call(r,t,n).message)??n.defaultError;return t.code==="unrecognized_keys"?{message:x.errToObj(e).message??o}:{message:o}}}:{}})}strip(){return new G({...this._def,unknownKeys:"strip"})}passthrough(){return new G({...this._def,unknownKeys:"passthrough"})}extend(e){return new G({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new G({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:w.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new G({...this._def,catchall:e})}pick(e){const t={};for(const n of $.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new G({...this._def,shape:()=>t})}omit(e){const t={};for(const n of $.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new G({...this._def,shape:()=>t})}deepPartial(){return Ne(this)}partial(e){const t={};for(const n of $.objectKeys(this.shape)){const o=this.shape[n];e&&!e[n]?t[n]=o:t[n]=o.optional()}return new G({...this._def,shape:()=>t})}required(e){const t={};for(const n of $.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let r=this.shape[n];for(;r instanceof ge;)r=r._def.innerType;t[n]=r}return new G({...this._def,shape:()=>t})}keyof(){return To($.objectKeys(this.shape))}}G.create=(i,e)=>new G({shape:()=>i,unknownKeys:"strip",catchall:ve.create(),typeName:w.ZodObject,...R(e)});G.strictCreate=(i,e)=>new G({shape:()=>i,unknownKeys:"strict",catchall:ve.create(),typeName:w.ZodObject,...R(e)});G.lazycreate=(i,e)=>new G({shape:i,unknownKeys:"strip",catchall:ve.create(),typeName:w.ZodObject,...R(e)});class Ct extends b{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function o(r){for(const u of r)if(u.result.status==="valid")return u.result;for(const u of r)if(u.result.status==="dirty")return t.common.issues.push(...u.ctx.common.issues),u.result;const l=r.map(u=>new ue(u.ctx.common.issues));return C(t,{code:v.invalid_union,unionErrors:l}),M}if(t.common.async)return Promise.all(n.map(async r=>{const l={...t,common:{...t.common,issues:[]},parent:null};return{result:await r._parseAsync({data:t.data,path:t.path,parent:l}),ctx:l}})).then(o);{let r;const l=[];for(const d of n){const c={...t,common:{...t.common,issues:[]},parent:null},f=d._parseSync({data:t.data,path:t.path,parent:c});if(f.status==="valid")return f;f.status==="dirty"&&!r&&(r={result:f,ctx:c}),c.common.issues.length&&l.push(c.common.issues)}if(r)return t.common.issues.push(...r.ctx.common.issues),r.result;const u=l.map(d=>new ue(d));return C(t,{code:v.invalid_union,unionErrors:u}),M}}get options(){return this._def.options}}Ct.create=(i,e)=>new Ct({options:i,typeName:w.ZodUnion,...R(e)});function Ht(i,e){const t=pe(i),n=pe(e);if(i===e)return{valid:!0,data:i};if(t===T.object&&n===T.object){const o=$.objectKeys(e),r=$.objectKeys(i).filter(u=>o.indexOf(u)!==-1),l={...i,...e};for(const u of r){const d=Ht(i[u],e[u]);if(!d.valid)return{valid:!1};l[u]=d.data}return{valid:!0,data:l}}else if(t===T.array&&n===T.array){if(i.length!==e.length)return{valid:!1};const o=[];for(let r=0;r<i.length;r++){const l=i[r],u=e[r],d=Ht(l,u);if(!d.valid)return{valid:!1};o.push(d.data)}return{valid:!0,data:o}}else return t===T.date&&n===T.date&&+i==+e?{valid:!0,data:i}:{valid:!1}}class Tt extends b{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),o=(r,l)=>{if(Pn(r)||Pn(l))return M;const u=Ht(r.value,l.value);return u.valid?((Rn(r)||Rn(l))&&t.dirty(),{status:t.value,value:u.data}):(C(n,{code:v.invalid_intersection_types}),M)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([r,l])=>o(r,l)):o(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Tt.create=(i,e,t)=>new Tt({left:i,right:e,typeName:w.ZodIntersection,...R(t)});class Re extends b{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==T.array)return C(n,{code:v.invalid_type,expected:T.array,received:n.parsedType}),M;if(n.data.length<this._def.items.length)return C(n,{code:v.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),M;!this._def.rest&&n.data.length>this._def.items.length&&(C(n,{code:v.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map((l,u)=>{const d=this._def.items[u]||this._def.rest;return d?d._parse(new se(n,l,n.path,u)):null}).filter(l=>!!l);return n.common.async?Promise.all(r).then(l=>z.mergeArray(t,l)):z.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new Re({...this._def,rest:e})}}Re.create=(i,e)=>{if(!Array.isArray(i))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Re({items:i,typeName:w.ZodTuple,rest:null,...R(e)})};class _t extends b{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==T.object)return C(n,{code:v.invalid_type,expected:T.object,received:n.parsedType}),M;const o=[],r=this._def.keyType,l=this._def.valueType;for(const u in n.data)o.push({key:r._parse(new se(n,u,n.path,u)),value:l._parse(new se(n,n.data[u],n.path,u)),alwaysSet:u in n.data});return n.common.async?z.mergeObjectAsync(t,o):z.mergeObjectSync(t,o)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof b?new _t({keyType:e,valueType:t,typeName:w.ZodRecord,...R(n)}):new _t({keyType:ne.create(),valueType:e,typeName:w.ZodRecord,...R(t)})}}class Fn extends b{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==T.map)return C(n,{code:v.invalid_type,expected:T.map,received:n.parsedType}),M;const o=this._def.keyType,r=this._def.valueType,l=[...n.data.entries()].map(([u,d],c)=>({key:o._parse(new se(n,u,n.path,[c,"key"])),value:r._parse(new se(n,d,n.path,[c,"value"]))}));if(n.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const d of l){const c=await d.key,f=await d.value;if(c.status==="aborted"||f.status==="aborted")return M;(c.status==="dirty"||f.status==="dirty")&&t.dirty(),u.set(c.value,f.value)}return{status:t.value,value:u}})}else{const u=new Map;for(const d of l){const c=d.key,f=d.value;if(c.status==="aborted"||f.status==="aborted")return M;(c.status==="dirty"||f.status==="dirty")&&t.dirty(),u.set(c.value,f.value)}return{status:t.value,value:u}}}}Fn.create=(i,e,t)=>new Fn({valueType:e,keyType:i,typeName:w.ZodMap,...R(t)});class st extends b{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==T.set)return C(n,{code:v.invalid_type,expected:T.set,received:n.parsedType}),M;const o=this._def;o.minSize!==null&&n.data.size<o.minSize.value&&(C(n,{code:v.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),t.dirty()),o.maxSize!==null&&n.data.size>o.maxSize.value&&(C(n,{code:v.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),t.dirty());const r=this._def.valueType;function l(d){const c=new Set;for(const f of d){if(f.status==="aborted")return M;f.status==="dirty"&&t.dirty(),c.add(f.value)}return{status:t.value,value:c}}const u=[...n.data.values()].map((d,c)=>r._parse(new se(n,d,n.path,c)));return n.common.async?Promise.all(u).then(d=>l(d)):l(u)}min(e,t){return new st({...this._def,minSize:{value:e,message:x.toString(t)}})}max(e,t){return new st({...this._def,maxSize:{value:e,message:x.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}st.create=(i,e)=>new st({valueType:i,minSize:null,maxSize:null,typeName:w.ZodSet,...R(e)});class Jt extends b{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Jt.create=(i,e)=>new Jt({getter:i,typeName:w.ZodLazy,...R(e)});class Ln extends b{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return C(t,{received:t.data,code:v.invalid_literal,expected:this._def.value}),M}return{status:"valid",value:e.data}}get value(){return this._def.value}}Ln.create=(i,e)=>new Ln({value:i,typeName:w.ZodLiteral,...R(e)});function To(i,e){return new Be({values:i,typeName:w.ZodEnum,...R(e)})}class Be extends b{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return C(t,{expected:$.joinValues(n),received:t.parsedType,code:v.invalid_type}),M}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return C(t,{received:t.data,code:v.invalid_enum_value,options:n}),M}return Q(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Be.create(e,{...this._def,...t})}exclude(e,t=this._def){return Be.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}Be.create=To;class Un extends b{_parse(e){const t=$.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==T.string&&n.parsedType!==T.number){const o=$.objectValues(t);return C(n,{expected:$.joinValues(o),received:n.parsedType,code:v.invalid_type}),M}if(this._cache||(this._cache=new Set($.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const o=$.objectValues(t);return C(n,{received:n.data,code:v.invalid_enum_value,options:o}),M}return Q(e.data)}get enum(){return this._def.values}}Un.create=(i,e)=>new Un({values:i,typeName:w.ZodNativeEnum,...R(e)});class xt extends b{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==T.promise&&t.common.async===!1)return C(t,{code:v.invalid_type,expected:T.promise,received:t.parsedType}),M;const n=t.parsedType===T.promise?t.data:Promise.resolve(t.data);return Q(n.then(o=>this._def.type.parseAsync(o,{path:t.path,errorMap:t.common.contextualErrorMap})))}}xt.create=(i,e)=>new xt({type:i,typeName:w.ZodPromise,...R(e)});class Ge extends b{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===w.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),o=this._def.effect||null,r={addIssue:l=>{C(n,l),l.fatal?t.abort():t.dirty()},get path(){return n.path}};if(r.addIssue=r.addIssue.bind(r),o.type==="preprocess"){const l=o.transform(n.data,r);if(n.common.async)return Promise.resolve(l).then(async u=>{if(t.value==="aborted")return M;const d=await this._def.schema._parseAsync({data:u,path:n.path,parent:n});return d.status==="aborted"?M:d.status==="dirty"||t.value==="dirty"?Ze(d.value):d});{if(t.value==="aborted")return M;const u=this._def.schema._parseSync({data:l,path:n.path,parent:n});return u.status==="aborted"?M:u.status==="dirty"||t.value==="dirty"?Ze(u.value):u}}if(o.type==="refinement"){const l=u=>{const d=o.refinement(u,r);if(n.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(n.common.async===!1){const u=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return u.status==="aborted"?M:(u.status==="dirty"&&t.dirty(),l(u.value),{status:t.value,value:u.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(u=>u.status==="aborted"?M:(u.status==="dirty"&&t.dirty(),l(u.value).then(()=>({status:t.value,value:u.value}))))}if(o.type==="transform")if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Le(l))return M;const u=o.transform(l.value,r);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:u}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>Le(l)?Promise.resolve(o.transform(l.value,r)).then(u=>({status:t.value,value:u})):M);$.assertNever(o)}}Ge.create=(i,e,t)=>new Ge({schema:i,typeName:w.ZodEffects,effect:e,...R(t)});Ge.createWithPreprocess=(i,e,t)=>new Ge({schema:e,effect:{type:"preprocess",transform:i},typeName:w.ZodEffects,...R(t)});class ge extends b{_parse(e){return this._getType(e)===T.undefined?Q(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ge.create=(i,e)=>new ge({innerType:i,typeName:w.ZodOptional,...R(e)});class qe extends b{_parse(e){return this._getType(e)===T.null?Q(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}qe.create=(i,e)=>new qe({innerType:i,typeName:w.ZodNullable,...R(e)});class Wt extends b{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===T.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Wt.create=(i,e)=>new Wt({innerType:i,typeName:w.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...R(e)});class zt extends b{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},o=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return yt(o)?o.then(r=>({status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new ue(n.common.issues)},input:n.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new ue(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}zt.create=(i,e)=>new zt({innerType:i,typeName:w.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...R(e)});class Bn extends b{_parse(e){if(this._getType(e)!==T.nan){const n=this._getOrReturnCtx(e);return C(n,{code:v.invalid_type,expected:T.nan,received:n.parsedType}),M}return{status:"valid",value:e.data}}}Bn.create=i=>new Bn({typeName:w.ZodNaN,...R(i)});class Us extends b{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class cn extends b{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const r=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return r.status==="aborted"?M:r.status==="dirty"?(t.dirty(),Ze(r.value)):this._def.out._parseAsync({data:r.value,path:n.path,parent:n})})();{const o=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?M:o.status==="dirty"?(t.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:n.path,parent:n})}}static create(e,t){return new cn({in:e,out:t,typeName:w.ZodPipeline})}}class Yt extends b{_parse(e){const t=this._def.innerType._parse(e),n=o=>(Le(o)&&(o.value=Object.freeze(o.value)),o);return yt(t)?t.then(o=>n(o)):n(t)}unwrap(){return this._def.innerType}}Yt.create=(i,e)=>new Yt({innerType:i,typeName:w.ZodReadonly,...R(e)});var w;(function(i){i.ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly"})(w||(w={}));const Se=ne.create,Gn=Ie.create;Pe.create;const Bs=vt.create;Ue.create;const qn=Ot.create;ve.create;const Ke=oe.create,Gs=G.create,qs=Ct.create;Tt.create;Re.create;const Os=_t.create,Hs=Jt.create,Js=Be.create;xt.create;ge.create;qe.create;const ke={string:i=>ne.create({...i,coerce:!0}),number:i=>Ie.create({...i,coerce:!0}),boolean:i=>vt.create({...i,coerce:!0}),bigint:i=>Pe.create({...i,coerce:!0}),date:i=>Ue.create({...i,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ws,zs;function Ys(){return{geminiUrl:Ws,vertexUrl:zs}}function Zs(i,e,t){var n,o,r;if(!(!((n=i.httpOptions)===null||n===void 0)&&n.baseUrl)){const l=Ys();return i.vertexai?(o=l.vertexUrl)!==null&&o!==void 0?o:e:(r=l.geminiUrl)!==null&&r!==void 0?r:t}return i.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Je{}function E(i,e){const t=/\{([^}]+)\}/g;return i.replace(t,(n,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const r=e[o];return r!=null?String(r):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function a(i,e,t){for(let r=0;r<e.length-1;r++){const l=e[r];if(l.endsWith("[]")){const u=l.slice(0,-2);if(!(u in i))if(Array.isArray(t))i[u]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(i[u])){const d=i[u];if(Array.isArray(t))for(let c=0;c<d.length;c++){const f=d[c];a(f,e.slice(r+1),t[c])}else for(const c of d)a(c,e.slice(r+1),t)}return}else if(l.endsWith("[0]")){const u=l.slice(0,-3);u in i||(i[u]=[{}]);const d=i[u];a(d[0],e.slice(r+1),t);return}(!i[l]||typeof i[l]!="object")&&(i[l]={}),i=i[l]}const n=e[e.length-1],o=i[n];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else i[n]=t}function s(i,e){try{if(e.length===1&&e[0]==="_self")return i;for(let t=0;t<e.length;t++){if(typeof i!="object"||i===null)return;const n=e[t];if(n.endsWith("[]")){const o=n.slice(0,-2);if(o in i){const r=i[o];return Array.isArray(r)?r.map(l=>s(l,e.slice(t+1))):void 0}else return}else i=i[n]}return i}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var On;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(On||(On={}));var Hn;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(Hn||(Hn={}));var ie;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(ie||(ie={}));var Jn;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Jn||(Jn={}));var Wn;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(Wn||(Wn={}));var zn;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(zn||(zn={}));var Yn;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Yn||(Yn={}));var Zn;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(Zn||(Zn={}));var Kn;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(Kn||(Kn={}));var Xn;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(Xn||(Xn={}));var Qn;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Qn||(Qn={}));var jn;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(jn||(jn={}));var ei;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ei||(ei={}));var Et;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(Et||(Et={}));var ti;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ti||(ti={}));var Zt;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Zt||(Zt={}));var ni;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ni||(ni={}));var ii;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(ii||(ii={}));var oi;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(oi||(oi={}));var si;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(si||(si={}));var ri;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(ri||(ri={}));var ai;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(ai||(ai={}));var li;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(li||(li={}));var ui;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(ui||(ui={}));var ci;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi"})(ci||(ci={}));var di;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(di||(di={}));var fi;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(fi||(fi={}));var pi;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(pi||(pi={}));var hi;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(hi||(hi={}));var mi;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(mi||(mi={}));var gi;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED"})(gi||(gi={}));var yi;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(yi||(yi={}));var vi;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(vi||(vi={}));var Ci;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Ci||(Ci={}));var Ti;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(Ti||(Ti={}));var _i;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(_i||(_i={}));var xi;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(xi||(xi={}));var Ei;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Ei||(Ei={}));var be;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(be||(be={}));class Ye{get text(){var e,t,n,o,r,l,u,d;if(((o=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1;const p=[];for(const h of(d=(u=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[m,g]of Object.entries(h))m!=="text"&&m!=="thought"&&(g!==null||g!==void 0)&&p.push(m);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;f=!0,c+=h.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var e,t,n,o,r,l,u,d;if(((o=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const f=[];for(const p of(d=(u=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[h,m]of Object.entries(p))h!=="inlineData"&&(m!==null||m!==void 0)&&f.push(h);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,t,n,o,r,l,u,d;if(((o=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(d=(u=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,t,n,o,r,l,u,d,c;if(((o=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(d=(u=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,t,n,o,r,l,u,d,c;if(((o=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(d=(u=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.output}}class Si{}class Ai{}class Ks{}class Xs{}class wi{}class Mi{}class Ii{}class Qs{}class Pi{}class Ri{}class ki{}class js{}class Kt{constructor(e){const t={};for(const n of e.headers.entries())t[n[0]]=n[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class er{}class tr{}class nr{get text(){var e,t,n;let o="",r=!1;const l=[];for(const u of(n=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&n!==void 0?n:[]){for(const[d,c]of Object.entries(u))d!=="text"&&d!=="thought"&&c!==null&&l.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;r=!0,o+=u.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?o:void 0}get data(){var e,t,n;let o="";const r=[];for(const l of(n=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&n!==void 0?n:[]){for(const[u,d]of Object.entries(l))u!=="inlineData"&&d!==null&&r.push(u);l.inlineData&&typeof l.inlineData.data=="string"&&(o+=atob(l.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class ir{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function U(i,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(i.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function _o(i,e){const t=U(i,e);return t?t.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}`:t.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${t}`:t:""}function xo(i,e){return Array.isArray(e)?e.map(t=>St(i,t)):[St(i,e)]}function St(i,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function or(i,e){const t=St(i,e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function sr(i,e){const t=St(i,e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Di(i,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function Eo(i,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>Di(i,t)):[Di(i,e)]}function Xt(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function Ni(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function bi(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function W(i,e){if(e==null)throw new Error("ContentUnion is required");return Xt(e)?e:{role:"user",parts:Eo(i,e)}}function So(i,e){if(!e)return[];if(i.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const n=W(i,t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(i.isVertexAI()){const t=W(i,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>W(i,t)):[W(i,e)]}function ee(i,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(Ni(e)||bi(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[W(i,e)]}const t=[],n=[],o=Xt(e[0]);for(const r of e){const l=Xt(r);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)t.push(r);else{if(Ni(r)||bi(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return o||t.push({role:"user",parts:Eo(i,n)}),t}const rr=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),Vi=Js(["string","number","integer","object","array","boolean","null"]),ar=qs([Vi,Ke(Vi)]);function lr(i=!0){const e=Hs(()=>{const t=Gs({type:ar.optional(),format:Se().optional(),title:Se().optional(),description:Se().optional(),default:qn().optional(),items:e.optional(),minItems:ke.string().optional(),maxItems:ke.string().optional(),enum:Ke(qn()).optional(),properties:Os(Se(),e).optional(),required:Ke(Se()).optional(),minProperties:ke.string().optional(),maxProperties:ke.string().optional(),propertyOrdering:Ke(Se()).optional(),minimum:Gn().optional(),maximum:Gn().optional(),minLength:ke.string().optional(),maxLength:ke.string().optional(),pattern:Se().optional(),anyOf:Ke(e).optional(),additionalProperties:Bs().optional()});return i?t.strict():t});return e}function ur(i,e){i.includes("null")&&(e.nullable=!0);const t=i.filter(n=>n!=="null");if(t.length===1)e.type=Object.values(ie).includes(t[0].toUpperCase())?t[0].toUpperCase():ie.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const n of t)e.anyOf.push({type:Object.values(ie).includes(n.toUpperCase())?n.toUpperCase():ie.TYPE_UNSPECIFIED})}}function Ve(i){const e={},t=["items"],n=["anyOf"],o=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=i.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(e.nullable=!0,i=r[1]):r[1].type==="null"&&(e.nullable=!0,i=r[0])),i.type instanceof Array&&ur(i.type,e);for(const[l,u]of Object.entries(i))if(u!=null)if(l=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(ie).includes(u.toUpperCase())?u.toUpperCase():ie.TYPE_UNSPECIFIED}else if(t.includes(l))e[l]=Ve(u);else if(n.includes(l)){const d=[];for(const c of u){if(c.type=="null"){e.nullable=!0;continue}d.push(Ve(c))}e[l]=d}else if(o.includes(l)){const d={};for(const[c,f]of Object.entries(u))d[c]=Ve(f);e[l]=d}else{if(l==="additionalProperties")continue;e[l]=u}return e}function At(i,e){if(Object.keys(e).includes("$schema")){delete e.$schema;const t=lr().parse(e);return Ve(t)}else return Ve(e)}function Ao(i,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function dn(i,e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function at(i,e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(t.parameters=At(i,t.parameters)),t.response&&(t.response=At(i,t.response));return e}function lt(i,e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function cr(i,e,t,n=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===n;return i.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${i.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}`:o?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function xe(i,e){if(typeof e!="string")throw new Error("name must be a string");return cr(i,e,"cachedContents")}function wo(i,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function fe(i,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function dr(i){return i!=null&&typeof i=="object"&&"name"in i}function fr(i){return i!=null&&typeof i=="object"&&"video"in i}function pr(i){return i!=null&&typeof i=="object"&&"uri"in i}function Mo(i,e){var t;let n;if(dr(e)&&(n=e.name),!(pr(e)&&(n=e.uri,n===void 0))&&!(fr(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Io(i,e){let t;return i.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function Po(i,e){for(const t of["models","tunedModels","publisherModels"])if(hr(e,t))return e[t];return[]}function hr(i,e){return i!==null&&typeof i=="object"&&e in i}function mr(i,e={}){const t=i,n={name:t.name,description:t.description,parameters:Ve(Pt(t.inputSchema))};return e.behavior&&(n.behavior=e.behavior),{functionDeclarations:[n]}}function gr(i,e={}){const t=[],n=new Set;for(const o of i){const r=o.name;if(n.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);n.add(r);const l=mr(o,e);l.functionDeclarations&&t.push(...l.functionDeclarations)}return{functionDeclarations:t}}function yr(i){const e=[];for(const t of i)e.push(Pt(t));return e}function vr(i){const e={};for(const[t,n]of Object.entries(i)){const o=n;e[t]=Pt(o)}return e}function Pt(i){const e=new Set(["items"]),t=new Set(["anyOf"]),n=new Set(["properties"]),o={};for(const[r,l]of Object.entries(i))if(e.has(r))o[r]=Pt(l);else if(t.has(r))o[r]=yr(l);else if(n.has(r))o[r]=vr(l);else if(r==="type"){const u=l.toUpperCase();o[r]=Object.values(ie).includes(u)?u:ie.TYPE_UNSPECIFIED}else rr.has(r)&&(o[r]=l);return o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cr(i,e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const o=s(e,["endOffset"]);o!=null&&a(t,["endOffset"],o);const r=s(e,["startOffset"]);return r!=null&&a(t,["startOffset"],r),t}function Tr(i,e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["data"]);n!=null&&a(t,["data"],n);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function _r(i,e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function xr(i,e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],Cr(i,n));const o=s(e,["thought"]);o!=null&&a(t,["thought"],o);const r=s(e,["inlineData"]);r!=null&&a(t,["inlineData"],Tr(i,r));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],_r(i,l));const u=s(e,["thoughtSignature"]);u!=null&&a(t,["thoughtSignature"],u);const d=s(e,["codeExecutionResult"]);d!=null&&a(t,["codeExecutionResult"],d);const c=s(e,["executableCode"]);c!=null&&a(t,["executableCode"],c);const f=s(e,["functionCall"]);f!=null&&a(t,["functionCall"],f);const p=s(e,["functionResponse"]);p!=null&&a(t,["functionResponse"],p);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function $i(i,e){const t={},n=s(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>xr(i,l))),a(t,["parts"],r)}const o=s(e,["role"]);return o!=null&&a(t,["role"],o),t}function Er(i,e){const t={},n=s(e,["behavior"]);n!=null&&a(t,["behavior"],n);const o=s(e,["description"]);o!=null&&a(t,["description"],o);const r=s(e,["name"]);r!=null&&a(t,["name"],r);const l=s(e,["parameters"]);l!=null&&a(t,["parameters"],l);const u=s(e,["response"]);return u!=null&&a(t,["response"],u),t}function Sr(i,e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const o=s(e,["endTime"]);return o!=null&&a(t,["endTime"],o),t}function Ar(i,e){const t={},n=s(e,["timeRangeFilter"]);return n!=null&&a(t,["timeRangeFilter"],Sr(i,n)),t}function wr(i,e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const o=s(e,["dynamicThreshold"]);return o!=null&&a(t,["dynamicThreshold"],o),t}function Mr(i,e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],wr(i,n)),t}function Ir(){return{}}function Pr(i,e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>Er(i,c))),a(t,["functionDeclarations"],d)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=s(e,["googleSearch"]);o!=null&&a(t,["googleSearch"],Ar(i,o));const r=s(e,["googleSearchRetrieval"]);if(r!=null&&a(t,["googleSearchRetrieval"],Mr(i,r)),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(e,["urlContext"])!=null&&a(t,["urlContext"],Ir());const u=s(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function Rr(i,e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const o=s(e,["allowedFunctionNames"]);return o!=null&&a(t,["allowedFunctionNames"],o),t}function kr(i,e){const t={},n=s(e,["latitude"]);n!=null&&a(t,["latitude"],n);const o=s(e,["longitude"]);return o!=null&&a(t,["longitude"],o),t}function Dr(i,e){const t={},n=s(e,["latLng"]);n!=null&&a(t,["latLng"],kr(i,n));const o=s(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function Nr(i,e){const t={},n=s(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],Rr(i,n));const o=s(e,["retrievalConfig"]);return o!=null&&a(t,["retrievalConfig"],Dr(i,o)),t}function br(i,e,t){const n={},o=s(e,["ttl"]);t!==void 0&&o!=null&&a(t,["ttl"],o);const r=s(e,["expireTime"]);t!==void 0&&r!=null&&a(t,["expireTime"],r);const l=s(e,["displayName"]);t!==void 0&&l!=null&&a(t,["displayName"],l);const u=s(e,["contents"]);if(t!==void 0&&u!=null){let p=ee(i,u);Array.isArray(p)&&(p=p.map(h=>$i(i,h))),a(t,["contents"],p)}const d=s(e,["systemInstruction"]);t!==void 0&&d!=null&&a(t,["systemInstruction"],$i(i,W(i,d)));const c=s(e,["tools"]);if(t!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(h=>Pr(i,h))),a(t,["tools"],p)}const f=s(e,["toolConfig"]);if(t!==void 0&&f!=null&&a(t,["toolConfig"],Nr(i,f)),s(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Vr(i,e){const t={},n=s(e,["model"]);n!=null&&a(t,["model"],_o(i,n));const o=s(e,["config"]);return o!=null&&a(t,["config"],br(i,o,t)),t}function $r(i,e){const t={},n=s(e,["name"]);n!=null&&a(t,["_url","name"],xe(i,n));const o=s(e,["config"]);return o!=null&&a(t,["config"],o),t}function Fr(i,e){const t={},n=s(e,["name"]);n!=null&&a(t,["_url","name"],xe(i,n));const o=s(e,["config"]);return o!=null&&a(t,["config"],o),t}function Lr(i,e,t){const n={},o=s(e,["ttl"]);t!==void 0&&o!=null&&a(t,["ttl"],o);const r=s(e,["expireTime"]);return t!==void 0&&r!=null&&a(t,["expireTime"],r),n}function Ur(i,e){const t={},n=s(e,["name"]);n!=null&&a(t,["_url","name"],xe(i,n));const o=s(e,["config"]);return o!=null&&a(t,["config"],Lr(i,o,t)),t}function Br(i,e,t){const n={},o=s(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const r=s(e,["pageToken"]);return t!==void 0&&r!=null&&a(t,["_query","pageToken"],r),n}function Gr(i,e){const t={},n=s(e,["config"]);return n!=null&&a(t,["config"],Br(i,n,t)),t}function qr(i,e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const o=s(e,["endOffset"]);o!=null&&a(t,["endOffset"],o);const r=s(e,["startOffset"]);return r!=null&&a(t,["startOffset"],r),t}function Or(i,e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const o=s(e,["data"]);o!=null&&a(t,["data"],o);const r=s(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function Hr(i,e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const o=s(e,["fileUri"]);o!=null&&a(t,["fileUri"],o);const r=s(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function Jr(i,e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],qr(i,n));const o=s(e,["thought"]);o!=null&&a(t,["thought"],o);const r=s(e,["inlineData"]);r!=null&&a(t,["inlineData"],Or(i,r));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],Hr(i,l));const u=s(e,["thoughtSignature"]);u!=null&&a(t,["thoughtSignature"],u);const d=s(e,["codeExecutionResult"]);d!=null&&a(t,["codeExecutionResult"],d);const c=s(e,["executableCode"]);c!=null&&a(t,["executableCode"],c);const f=s(e,["functionCall"]);f!=null&&a(t,["functionCall"],f);const p=s(e,["functionResponse"]);p!=null&&a(t,["functionResponse"],p);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function Fi(i,e){const t={},n=s(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Jr(i,l))),a(t,["parts"],r)}const o=s(e,["role"]);return o!=null&&a(t,["role"],o),t}function Wr(i,e){const t={};if(s(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=s(e,["description"]);n!=null&&a(t,["description"],n);const o=s(e,["name"]);o!=null&&a(t,["name"],o);const r=s(e,["parameters"]);r!=null&&a(t,["parameters"],r);const l=s(e,["response"]);return l!=null&&a(t,["response"],l),t}function zr(i,e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const o=s(e,["endTime"]);return o!=null&&a(t,["endTime"],o),t}function Yr(i,e){const t={},n=s(e,["timeRangeFilter"]);return n!=null&&a(t,["timeRangeFilter"],zr(i,n)),t}function Zr(i,e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const o=s(e,["dynamicThreshold"]);return o!=null&&a(t,["dynamicThreshold"],o),t}function Kr(i,e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],Zr(i,n)),t}function Xr(){return{}}function Qr(i,e){const t={},n=s(e,["apiKeyString"]);return n!=null&&a(t,["apiKeyString"],n),t}function jr(i,e){const t={},n=s(e,["apiKeyConfig"]);n!=null&&a(t,["apiKeyConfig"],Qr(i,n));const o=s(e,["authType"]);o!=null&&a(t,["authType"],o);const r=s(e,["googleServiceAccountConfig"]);r!=null&&a(t,["googleServiceAccountConfig"],r);const l=s(e,["httpBasicAuthConfig"]);l!=null&&a(t,["httpBasicAuthConfig"],l);const u=s(e,["oauthConfig"]);u!=null&&a(t,["oauthConfig"],u);const d=s(e,["oidcConfig"]);return d!=null&&a(t,["oidcConfig"],d),t}function ea(i,e){const t={},n=s(e,["authConfig"]);return n!=null&&a(t,["authConfig"],jr(i,n)),t}function ta(){return{}}function na(i,e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>Wr(i,h))),a(t,["functionDeclarations"],p)}const o=s(e,["retrieval"]);o!=null&&a(t,["retrieval"],o);const r=s(e,["googleSearch"]);r!=null&&a(t,["googleSearch"],Yr(i,r));const l=s(e,["googleSearchRetrieval"]);l!=null&&a(t,["googleSearchRetrieval"],Kr(i,l)),s(e,["enterpriseWebSearch"])!=null&&a(t,["enterpriseWebSearch"],Xr());const d=s(e,["googleMaps"]);d!=null&&a(t,["googleMaps"],ea(i,d)),s(e,["urlContext"])!=null&&a(t,["urlContext"],ta());const f=s(e,["codeExecution"]);return f!=null&&a(t,["codeExecution"],f),t}function ia(i,e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const o=s(e,["allowedFunctionNames"]);return o!=null&&a(t,["allowedFunctionNames"],o),t}function oa(i,e){const t={},n=s(e,["latitude"]);n!=null&&a(t,["latitude"],n);const o=s(e,["longitude"]);return o!=null&&a(t,["longitude"],o),t}function sa(i,e){const t={},n=s(e,["latLng"]);n!=null&&a(t,["latLng"],oa(i,n));const o=s(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function ra(i,e){const t={},n=s(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],ia(i,n));const o=s(e,["retrievalConfig"]);return o!=null&&a(t,["retrievalConfig"],sa(i,o)),t}function aa(i,e,t){const n={},o=s(e,["ttl"]);t!==void 0&&o!=null&&a(t,["ttl"],o);const r=s(e,["expireTime"]);t!==void 0&&r!=null&&a(t,["expireTime"],r);const l=s(e,["displayName"]);t!==void 0&&l!=null&&a(t,["displayName"],l);const u=s(e,["contents"]);if(t!==void 0&&u!=null){let h=ee(i,u);Array.isArray(h)&&(h=h.map(m=>Fi(i,m))),a(t,["contents"],h)}const d=s(e,["systemInstruction"]);t!==void 0&&d!=null&&a(t,["systemInstruction"],Fi(i,W(i,d)));const c=s(e,["tools"]);if(t!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(m=>na(i,m))),a(t,["tools"],h)}const f=s(e,["toolConfig"]);t!==void 0&&f!=null&&a(t,["toolConfig"],ra(i,f));const p=s(e,["kmsKeyName"]);return t!==void 0&&p!=null&&a(t,["encryption_spec","kmsKeyName"],p),n}function la(i,e){const t={},n=s(e,["model"]);n!=null&&a(t,["model"],_o(i,n));const o=s(e,["config"]);return o!=null&&a(t,["config"],aa(i,o,t)),t}function ua(i,e){const t={},n=s(e,["name"]);n!=null&&a(t,["_url","name"],xe(i,n));const o=s(e,["config"]);return o!=null&&a(t,["config"],o),t}function ca(i,e){const t={},n=s(e,["name"]);n!=null&&a(t,["_url","name"],xe(i,n));const o=s(e,["config"]);return o!=null&&a(t,["config"],o),t}function da(i,e,t){const n={},o=s(e,["ttl"]);t!==void 0&&o!=null&&a(t,["ttl"],o);const r=s(e,["expireTime"]);return t!==void 0&&r!=null&&a(t,["expireTime"],r),n}function fa(i,e){const t={},n=s(e,["name"]);n!=null&&a(t,["_url","name"],xe(i,n));const o=s(e,["config"]);return o!=null&&a(t,["config"],da(i,o,t)),t}function pa(i,e,t){const n={},o=s(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const r=s(e,["pageToken"]);return t!==void 0&&r!=null&&a(t,["_query","pageToken"],r),n}function ha(i,e){const t={},n=s(e,["config"]);return n!=null&&a(t,["config"],pa(i,n,t)),t}function ft(i,e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const o=s(e,["displayName"]);o!=null&&a(t,["displayName"],o);const r=s(e,["model"]);r!=null&&a(t,["model"],r);const l=s(e,["createTime"]);l!=null&&a(t,["createTime"],l);const u=s(e,["updateTime"]);u!=null&&a(t,["updateTime"],u);const d=s(e,["expireTime"]);d!=null&&a(t,["expireTime"],d);const c=s(e,["usageMetadata"]);return c!=null&&a(t,["usageMetadata"],c),t}function ma(){return{}}function ga(i,e){const t={},n=s(e,["nextPageToken"]);n!=null&&a(t,["nextPageToken"],n);const o=s(e,["cachedContents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>ft(i,l))),a(t,["cachedContents"],r)}return t}function pt(i,e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const o=s(e,["displayName"]);o!=null&&a(t,["displayName"],o);const r=s(e,["model"]);r!=null&&a(t,["model"],r);const l=s(e,["createTime"]);l!=null&&a(t,["createTime"],l);const u=s(e,["updateTime"]);u!=null&&a(t,["updateTime"],u);const d=s(e,["expireTime"]);d!=null&&a(t,["expireTime"],d);const c=s(e,["usageMetadata"]);return c!=null&&a(t,["usageMetadata"],c),t}function ya(){return{}}function va(i,e){const t={},n=s(e,["nextPageToken"]);n!=null&&a(t,["nextPageToken"],n);const o=s(e,["cachedContents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>pt(i,l))),a(t,["cachedContents"],r)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Oe;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Oe||(Oe={}));class Rt{constructor(e,t,n,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,n,o)}init(e,t,n){var o,r;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let l={config:{}};n?typeof n=="object"?l=Object.assign({},n):l=n:l={config:{}},l.config&&(l.config.pageToken=t.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(r=(o=l.config)===null||o===void 0?void 0:o.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ca extends Je{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Rt(Oe.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(t),t)}async create(e){var t,n,o,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=la(this.apiClient,e);return u=E("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>pt(this.apiClient,f))}else{const c=Vr(this.apiClient,e);return u=E("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>ft(this.apiClient,f))}}async get(e){var t,n,o,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=ua(this.apiClient,e);return u=E("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>pt(this.apiClient,f))}else{const c=$r(this.apiClient,e);return u=E("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>ft(this.apiClient,f))}}async delete(e){var t,n,o,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=ca(this.apiClient,e);return u=E("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(()=>{const f=ya(),p=new Ri;return Object.assign(p,f),p})}else{const c=Fr(this.apiClient,e);return u=E("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(()=>{const f=ma(),p=new Ri;return Object.assign(p,f),p})}}async update(e){var t,n,o,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=fa(this.apiClient,e);return u=E("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>pt(this.apiClient,f))}else{const c=Ur(this.apiClient,e);return u=E("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>ft(this.apiClient,f))}}async listInternal(e){var t,n,o,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=ha(this.apiClient,e);return u=E("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const p=va(this.apiClient,f),h=new ki;return Object.assign(h,p),h})}else{const c=Gr(this.apiClient,e);return u=E("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>{const p=ga(this.apiClient,f),h=new ki;return Object.assign(h,p),h})}}}function Li(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function B(i){return this instanceof B?(this.v=i,this):new B(i)}function $e(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(i,e||[]),o,r=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",l),o[Symbol.asyncIterator]=function(){return this},o;function l(m){return function(g){return Promise.resolve(g).then(m,p)}}function u(m,g){n[m]&&(o[m]=function(y){return new Promise(function(_,S){r.push([m,y,_,S])>1||d(m,y)})},g&&(o[m]=g(o[m])))}function d(m,g){try{c(n[m](g))}catch(y){h(r[0][3],y)}}function c(m){m.value instanceof B?Promise.resolve(m.value.v).then(f,p):h(r[0][2],m)}function f(m){d("next",m)}function p(m){d("throw",m)}function h(m,g){m(g),r.shift(),r.length&&d(r[0][0],r[0][1])}}function et(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof Li=="function"?Li(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=i[r]&&function(l){return new Promise(function(u,d){l=i[r](l),o(u,d,l.done,l.value)})}}function o(r,l,u,d){Promise.resolve(d).then(function(c){r({value:c,done:u})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ta(i){var e;if(i.candidates==null||i.candidates.length===0)return!1;const t=(e=i.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:Ro(t)}function Ro(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const e of i.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function _a(i){if(i.length!==0){for(const e of i)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Ui(i){if(i===void 0||i.length===0)return[];const e=[],t=i.length;let n=0;for(;n<t;)if(i[n].role==="user")e.push(i[n]),n++;else{const o=[];let r=!0;for(;n<t&&i[n].role==="model";)o.push(i[n]),r&&!Ro(i[n])&&(r=!1),n++;r?e.push(...o):e.pop()}return e}class xa{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Ea(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Ea{constructor(e,t,n,o={},r=[]){this.apiClient=e,this.modelsModule=t,this.model=n,this.config=o,this.history=r,this.sendPromise=Promise.resolve(),_a(r)}async sendMessage(e){var t;await this.sendPromise;const n=W(this.apiClient,e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var r,l,u;const d=await o,c=(l=(r=d.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content,f=d.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let h=[];f!=null&&(h=(u=f.slice(p))!==null&&u!==void 0?u:[]);const m=c?[c]:[];this.recordHistory(n,m,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const n=W(this.apiClient,e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const r=await o;return this.processStreamResponse(r,n)}getHistory(e=!1){const t=e?Ui(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var n,o;return $e(this,arguments,function*(){var l,u,d,c;const f=[];try{for(var p=!0,h=et(e),m;m=yield B(h.next()),l=m.done,!l;p=!0){c=m.value,p=!1;const g=c;if(Ta(g)){const y=(o=(n=g.candidates)===null||n===void 0?void 0:n[0])===null||o===void 0?void 0:o.content;y!==void 0&&f.push(y)}yield yield B(g)}}catch(g){u={error:g}}finally{try{!p&&!l&&(d=h.return)&&(yield B(d.call(h)))}finally{if(u)throw u.error}}this.recordHistory(t,f)})}recordHistory(e,t,n){let o=[];t.length>0&&t.every(r=>r.role!==void 0)?o=t:o.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...Ui(n)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sa(i,e,t){const n={},o=s(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const r=s(e,["pageToken"]);return t!==void 0&&r!=null&&a(t,["_query","pageToken"],r),n}function Aa(i,e){const t={},n=s(e,["config"]);return n!=null&&a(t,["config"],Sa(i,n,t)),t}function wa(i,e){const t={},n=s(e,["details"]);n!=null&&a(t,["details"],n);const o=s(e,["message"]);o!=null&&a(t,["message"],o);const r=s(e,["code"]);return r!=null&&a(t,["code"],r),t}function Ma(i,e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const o=s(e,["displayName"]);o!=null&&a(t,["displayName"],o);const r=s(e,["mimeType"]);r!=null&&a(t,["mimeType"],r);const l=s(e,["sizeBytes"]);l!=null&&a(t,["sizeBytes"],l);const u=s(e,["createTime"]);u!=null&&a(t,["createTime"],u);const d=s(e,["expirationTime"]);d!=null&&a(t,["expirationTime"],d);const c=s(e,["updateTime"]);c!=null&&a(t,["updateTime"],c);const f=s(e,["sha256Hash"]);f!=null&&a(t,["sha256Hash"],f);const p=s(e,["uri"]);p!=null&&a(t,["uri"],p);const h=s(e,["downloadUri"]);h!=null&&a(t,["downloadUri"],h);const m=s(e,["state"]);m!=null&&a(t,["state"],m);const g=s(e,["source"]);g!=null&&a(t,["source"],g);const y=s(e,["videoMetadata"]);y!=null&&a(t,["videoMetadata"],y);const _=s(e,["error"]);return _!=null&&a(t,["error"],wa(i,_)),t}function Ia(i,e){const t={},n=s(e,["file"]);n!=null&&a(t,["file"],Ma(i,n));const o=s(e,["config"]);return o!=null&&a(t,["config"],o),t}function Pa(i,e){const t={},n=s(e,["name"]);n!=null&&a(t,["_url","file"],Mo(i,n));const o=s(e,["config"]);return o!=null&&a(t,["config"],o),t}function Ra(i,e){const t={},n=s(e,["name"]);n!=null&&a(t,["_url","file"],Mo(i,n));const o=s(e,["config"]);return o!=null&&a(t,["config"],o),t}function ka(i,e){const t={},n=s(e,["details"]);n!=null&&a(t,["details"],n);const o=s(e,["message"]);o!=null&&a(t,["message"],o);const r=s(e,["code"]);return r!=null&&a(t,["code"],r),t}function Qt(i,e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const o=s(e,["displayName"]);o!=null&&a(t,["displayName"],o);const r=s(e,["mimeType"]);r!=null&&a(t,["mimeType"],r);const l=s(e,["sizeBytes"]);l!=null&&a(t,["sizeBytes"],l);const u=s(e,["createTime"]);u!=null&&a(t,["createTime"],u);const d=s(e,["expirationTime"]);d!=null&&a(t,["expirationTime"],d);const c=s(e,["updateTime"]);c!=null&&a(t,["updateTime"],c);const f=s(e,["sha256Hash"]);f!=null&&a(t,["sha256Hash"],f);const p=s(e,["uri"]);p!=null&&a(t,["uri"],p);const h=s(e,["downloadUri"]);h!=null&&a(t,["downloadUri"],h);const m=s(e,["state"]);m!=null&&a(t,["state"],m);const g=s(e,["source"]);g!=null&&a(t,["source"],g);const y=s(e,["videoMetadata"]);y!=null&&a(t,["videoMetadata"],y);const _=s(e,["error"]);return _!=null&&a(t,["error"],ka(i,_)),t}function Da(i,e){const t={},n=s(e,["nextPageToken"]);n!=null&&a(t,["nextPageToken"],n);const o=s(e,["files"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>Qt(i,l))),a(t,["files"],r)}return t}function Na(){return{}}function ba(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Va extends Je{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Rt(Oe.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>Qt(this.apiClient,t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,n;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Aa(this.apiClient,e);return r=E("files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>{const c=Da(this.apiClient,d),f=new js;return Object.assign(f,c),f})}}async createInternal(e){var t,n;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ia(this.apiClient,e);return r=E("upload/v1beta/files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(()=>{const d=Na(),c=new er;return Object.assign(c,d),c})}}async get(e){var t,n;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Pa(this.apiClient,e);return r=E("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>Qt(this.apiClient,d))}}async delete(e){var t,n;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ra(this.apiClient,e);return r=E("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(()=>{const d=ba(),c=new tr;return Object.assign(c,d),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $a(i,e){const t={},n=s(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function Fa(i,e){const t={},n=s(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function ko(i,e){const t={},n=s(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],$a(i,n)),t}function La(i,e){const t={},n=s(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],Fa(i,n)),t}function Ua(i,e){const t={},n=s(e,["speaker"]);n!=null&&a(t,["speaker"],n);const o=s(e,["voiceConfig"]);return o!=null&&a(t,["voiceConfig"],ko(i,o)),t}function Ba(i,e){const t={},n=s(e,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Ua(i,r))),a(t,["speakerVoiceConfigs"],o)}return t}function Ga(i,e){const t={},n=s(e,["voiceConfig"]);n!=null&&a(t,["voiceConfig"],ko(i,n));const o=s(e,["multiSpeakerVoiceConfig"]);o!=null&&a(t,["multiSpeakerVoiceConfig"],Ba(i,o));const r=s(e,["languageCode"]);return r!=null&&a(t,["languageCode"],r),t}function qa(i,e){const t={},n=s(e,["voiceConfig"]);if(n!=null&&a(t,["voiceConfig"],La(i,n)),s(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=s(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function Oa(i,e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const o=s(e,["endOffset"]);o!=null&&a(t,["endOffset"],o);const r=s(e,["startOffset"]);return r!=null&&a(t,["startOffset"],r),t}function Ha(i,e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const o=s(e,["endOffset"]);o!=null&&a(t,["endOffset"],o);const r=s(e,["startOffset"]);return r!=null&&a(t,["startOffset"],r),t}function Ja(i,e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["data"]);n!=null&&a(t,["data"],n);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Wa(i,e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const o=s(e,["data"]);o!=null&&a(t,["data"],o);const r=s(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function za(i,e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Ya(i,e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const o=s(e,["fileUri"]);o!=null&&a(t,["fileUri"],o);const r=s(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function Za(i,e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],Oa(i,n));const o=s(e,["thought"]);o!=null&&a(t,["thought"],o);const r=s(e,["inlineData"]);r!=null&&a(t,["inlineData"],Ja(i,r));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],za(i,l));const u=s(e,["thoughtSignature"]);u!=null&&a(t,["thoughtSignature"],u);const d=s(e,["codeExecutionResult"]);d!=null&&a(t,["codeExecutionResult"],d);const c=s(e,["executableCode"]);c!=null&&a(t,["executableCode"],c);const f=s(e,["functionCall"]);f!=null&&a(t,["functionCall"],f);const p=s(e,["functionResponse"]);p!=null&&a(t,["functionResponse"],p);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function Ka(i,e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],Ha(i,n));const o=s(e,["thought"]);o!=null&&a(t,["thought"],o);const r=s(e,["inlineData"]);r!=null&&a(t,["inlineData"],Wa(i,r));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],Ya(i,l));const u=s(e,["thoughtSignature"]);u!=null&&a(t,["thoughtSignature"],u);const d=s(e,["codeExecutionResult"]);d!=null&&a(t,["codeExecutionResult"],d);const c=s(e,["executableCode"]);c!=null&&a(t,["executableCode"],c);const f=s(e,["functionCall"]);f!=null&&a(t,["functionCall"],f);const p=s(e,["functionResponse"]);p!=null&&a(t,["functionResponse"],p);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function Xa(i,e){const t={},n=s(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Za(i,l))),a(t,["parts"],r)}const o=s(e,["role"]);return o!=null&&a(t,["role"],o),t}function Qa(i,e){const t={},n=s(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Ka(i,l))),a(t,["parts"],r)}const o=s(e,["role"]);return o!=null&&a(t,["role"],o),t}function ja(i,e){const t={},n=s(e,["behavior"]);n!=null&&a(t,["behavior"],n);const o=s(e,["description"]);o!=null&&a(t,["description"],o);const r=s(e,["name"]);r!=null&&a(t,["name"],r);const l=s(e,["parameters"]);l!=null&&a(t,["parameters"],l);const u=s(e,["response"]);return u!=null&&a(t,["response"],u),t}function el(i,e){const t={};if(s(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=s(e,["description"]);n!=null&&a(t,["description"],n);const o=s(e,["name"]);o!=null&&a(t,["name"],o);const r=s(e,["parameters"]);r!=null&&a(t,["parameters"],r);const l=s(e,["response"]);return l!=null&&a(t,["response"],l),t}function tl(i,e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const o=s(e,["endTime"]);return o!=null&&a(t,["endTime"],o),t}function nl(i,e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const o=s(e,["endTime"]);return o!=null&&a(t,["endTime"],o),t}function il(i,e){const t={},n=s(e,["timeRangeFilter"]);return n!=null&&a(t,["timeRangeFilter"],tl(i,n)),t}function ol(i,e){const t={},n=s(e,["timeRangeFilter"]);return n!=null&&a(t,["timeRangeFilter"],nl(i,n)),t}function sl(i,e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const o=s(e,["dynamicThreshold"]);return o!=null&&a(t,["dynamicThreshold"],o),t}function rl(i,e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const o=s(e,["dynamicThreshold"]);return o!=null&&a(t,["dynamicThreshold"],o),t}function al(i,e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],sl(i,n)),t}function ll(i,e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],rl(i,n)),t}function ul(){return{}}function cl(i,e){const t={},n=s(e,["apiKeyString"]);return n!=null&&a(t,["apiKeyString"],n),t}function dl(i,e){const t={},n=s(e,["apiKeyConfig"]);n!=null&&a(t,["apiKeyConfig"],cl(i,n));const o=s(e,["authType"]);o!=null&&a(t,["authType"],o);const r=s(e,["googleServiceAccountConfig"]);r!=null&&a(t,["googleServiceAccountConfig"],r);const l=s(e,["httpBasicAuthConfig"]);l!=null&&a(t,["httpBasicAuthConfig"],l);const u=s(e,["oauthConfig"]);u!=null&&a(t,["oauthConfig"],u);const d=s(e,["oidcConfig"]);return d!=null&&a(t,["oidcConfig"],d),t}function fl(i,e){const t={},n=s(e,["authConfig"]);return n!=null&&a(t,["authConfig"],dl(i,n)),t}function pl(){return{}}function hl(){return{}}function ml(i,e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>ja(i,c))),a(t,["functionDeclarations"],d)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=s(e,["googleSearch"]);o!=null&&a(t,["googleSearch"],il(i,o));const r=s(e,["googleSearchRetrieval"]);if(r!=null&&a(t,["googleSearchRetrieval"],al(i,r)),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(e,["urlContext"])!=null&&a(t,["urlContext"],pl());const u=s(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function gl(i,e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>el(i,h))),a(t,["functionDeclarations"],p)}const o=s(e,["retrieval"]);o!=null&&a(t,["retrieval"],o);const r=s(e,["googleSearch"]);r!=null&&a(t,["googleSearch"],ol(i,r));const l=s(e,["googleSearchRetrieval"]);l!=null&&a(t,["googleSearchRetrieval"],ll(i,l)),s(e,["enterpriseWebSearch"])!=null&&a(t,["enterpriseWebSearch"],ul());const d=s(e,["googleMaps"]);d!=null&&a(t,["googleMaps"],fl(i,d)),s(e,["urlContext"])!=null&&a(t,["urlContext"],hl());const f=s(e,["codeExecution"]);return f!=null&&a(t,["codeExecution"],f),t}function yl(i,e){const t={},n=s(e,["handle"]);if(n!=null&&a(t,["handle"],n),s(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function vl(i,e){const t={},n=s(e,["handle"]);n!=null&&a(t,["handle"],n);const o=s(e,["transparent"]);return o!=null&&a(t,["transparent"],o),t}function Bi(){return{}}function Gi(){return{}}function Cl(i,e){const t={},n=s(e,["disabled"]);n!=null&&a(t,["disabled"],n);const o=s(e,["startOfSpeechSensitivity"]);o!=null&&a(t,["startOfSpeechSensitivity"],o);const r=s(e,["endOfSpeechSensitivity"]);r!=null&&a(t,["endOfSpeechSensitivity"],r);const l=s(e,["prefixPaddingMs"]);l!=null&&a(t,["prefixPaddingMs"],l);const u=s(e,["silenceDurationMs"]);return u!=null&&a(t,["silenceDurationMs"],u),t}function Tl(i,e){const t={},n=s(e,["disabled"]);n!=null&&a(t,["disabled"],n);const o=s(e,["startOfSpeechSensitivity"]);o!=null&&a(t,["startOfSpeechSensitivity"],o);const r=s(e,["endOfSpeechSensitivity"]);r!=null&&a(t,["endOfSpeechSensitivity"],r);const l=s(e,["prefixPaddingMs"]);l!=null&&a(t,["prefixPaddingMs"],l);const u=s(e,["silenceDurationMs"]);return u!=null&&a(t,["silenceDurationMs"],u),t}function _l(i,e){const t={},n=s(e,["automaticActivityDetection"]);n!=null&&a(t,["automaticActivityDetection"],Cl(i,n));const o=s(e,["activityHandling"]);o!=null&&a(t,["activityHandling"],o);const r=s(e,["turnCoverage"]);return r!=null&&a(t,["turnCoverage"],r),t}function xl(i,e){const t={},n=s(e,["automaticActivityDetection"]);n!=null&&a(t,["automaticActivityDetection"],Tl(i,n));const o=s(e,["activityHandling"]);o!=null&&a(t,["activityHandling"],o);const r=s(e,["turnCoverage"]);return r!=null&&a(t,["turnCoverage"],r),t}function El(i,e){const t={},n=s(e,["targetTokens"]);return n!=null&&a(t,["targetTokens"],n),t}function Sl(i,e){const t={},n=s(e,["targetTokens"]);return n!=null&&a(t,["targetTokens"],n),t}function Al(i,e){const t={},n=s(e,["triggerTokens"]);n!=null&&a(t,["triggerTokens"],n);const o=s(e,["slidingWindow"]);return o!=null&&a(t,["slidingWindow"],El(i,o)),t}function wl(i,e){const t={},n=s(e,["triggerTokens"]);n!=null&&a(t,["triggerTokens"],n);const o=s(e,["slidingWindow"]);return o!=null&&a(t,["slidingWindow"],Sl(i,o)),t}function Ml(i,e){const t={},n=s(e,["proactiveAudio"]);return n!=null&&a(t,["proactiveAudio"],n),t}function Il(i,e){const t={},n=s(e,["proactiveAudio"]);return n!=null&&a(t,["proactiveAudio"],n),t}function Pl(i,e,t){const n={},o=s(e,["generationConfig"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig"],o);const r=s(e,["responseModalities"]);t!==void 0&&r!=null&&a(t,["setup","generationConfig","responseModalities"],r);const l=s(e,["temperature"]);t!==void 0&&l!=null&&a(t,["setup","generationConfig","temperature"],l);const u=s(e,["topP"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topP"],u);const d=s(e,["topK"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","topK"],d);const c=s(e,["maxOutputTokens"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","maxOutputTokens"],c);const f=s(e,["mediaResolution"]);t!==void 0&&f!=null&&a(t,["setup","generationConfig","mediaResolution"],f);const p=s(e,["seed"]);t!==void 0&&p!=null&&a(t,["setup","generationConfig","seed"],p);const h=s(e,["speechConfig"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","speechConfig"],Ga(i,dn(i,h)));const m=s(e,["enableAffectiveDialog"]);t!==void 0&&m!=null&&a(t,["setup","generationConfig","enableAffectiveDialog"],m);const g=s(e,["systemInstruction"]);t!==void 0&&g!=null&&a(t,["setup","systemInstruction"],Xa(i,W(i,g)));const y=s(e,["tools"]);if(t!==void 0&&y!=null){let V=lt(i,y);Array.isArray(V)&&(V=V.map(L=>ml(i,at(i,L)))),a(t,["setup","tools"],V)}const _=s(e,["sessionResumption"]);t!==void 0&&_!=null&&a(t,["setup","sessionResumption"],yl(i,_));const S=s(e,["inputAudioTranscription"]);t!==void 0&&S!=null&&a(t,["setup","inputAudioTranscription"],Bi());const I=s(e,["outputAudioTranscription"]);t!==void 0&&I!=null&&a(t,["setup","outputAudioTranscription"],Bi());const P=s(e,["realtimeInputConfig"]);t!==void 0&&P!=null&&a(t,["setup","realtimeInputConfig"],_l(i,P));const D=s(e,["contextWindowCompression"]);t!==void 0&&D!=null&&a(t,["setup","contextWindowCompression"],Al(i,D));const N=s(e,["proactivity"]);return t!==void 0&&N!=null&&a(t,["setup","proactivity"],Ml(i,N)),n}function Rl(i,e,t){const n={},o=s(e,["generationConfig"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig"],o);const r=s(e,["responseModalities"]);t!==void 0&&r!=null&&a(t,["setup","generationConfig","responseModalities"],r);const l=s(e,["temperature"]);t!==void 0&&l!=null&&a(t,["setup","generationConfig","temperature"],l);const u=s(e,["topP"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topP"],u);const d=s(e,["topK"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","topK"],d);const c=s(e,["maxOutputTokens"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","maxOutputTokens"],c);const f=s(e,["mediaResolution"]);t!==void 0&&f!=null&&a(t,["setup","generationConfig","mediaResolution"],f);const p=s(e,["seed"]);t!==void 0&&p!=null&&a(t,["setup","generationConfig","seed"],p);const h=s(e,["speechConfig"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","speechConfig"],qa(i,dn(i,h)));const m=s(e,["enableAffectiveDialog"]);t!==void 0&&m!=null&&a(t,["setup","generationConfig","enableAffectiveDialog"],m);const g=s(e,["systemInstruction"]);t!==void 0&&g!=null&&a(t,["setup","systemInstruction"],Qa(i,W(i,g)));const y=s(e,["tools"]);if(t!==void 0&&y!=null){let V=lt(i,y);Array.isArray(V)&&(V=V.map(L=>gl(i,at(i,L)))),a(t,["setup","tools"],V)}const _=s(e,["sessionResumption"]);t!==void 0&&_!=null&&a(t,["setup","sessionResumption"],vl(i,_));const S=s(e,["inputAudioTranscription"]);t!==void 0&&S!=null&&a(t,["setup","inputAudioTranscription"],Gi());const I=s(e,["outputAudioTranscription"]);t!==void 0&&I!=null&&a(t,["setup","outputAudioTranscription"],Gi());const P=s(e,["realtimeInputConfig"]);t!==void 0&&P!=null&&a(t,["setup","realtimeInputConfig"],xl(i,P));const D=s(e,["contextWindowCompression"]);t!==void 0&&D!=null&&a(t,["setup","contextWindowCompression"],wl(i,D));const N=s(e,["proactivity"]);return t!==void 0&&N!=null&&a(t,["setup","proactivity"],Il(i,N)),n}function kl(i,e){const t={},n=s(e,["model"]);n!=null&&a(t,["setup","model"],U(i,n));const o=s(e,["config"]);return o!=null&&a(t,["config"],Pl(i,o,t)),t}function Dl(i,e){const t={},n=s(e,["model"]);n!=null&&a(t,["setup","model"],U(i,n));const o=s(e,["config"]);return o!=null&&a(t,["config"],Rl(i,o,t)),t}function Nl(){return{}}function bl(){return{}}function Vl(){return{}}function $l(){return{}}function Fl(i,e){const t={},n=s(e,["media"]);n!=null&&a(t,["mediaChunks"],xo(i,n));const o=s(e,["audio"]);o!=null&&a(t,["audio"],sr(i,o));const r=s(e,["audioStreamEnd"]);r!=null&&a(t,["audioStreamEnd"],r);const l=s(e,["video"]);l!=null&&a(t,["video"],or(i,l));const u=s(e,["text"]);return u!=null&&a(t,["text"],u),s(e,["activityStart"])!=null&&a(t,["activityStart"],Nl()),s(e,["activityEnd"])!=null&&a(t,["activityEnd"],Vl()),t}function Ll(i,e){const t={},n=s(e,["media"]);if(n!=null&&a(t,["mediaChunks"],xo(i,n)),s(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const o=s(e,["audioStreamEnd"]);if(o!=null&&a(t,["audioStreamEnd"],o),s(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(s(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return s(e,["activityStart"])!=null&&a(t,["activityStart"],bl()),s(e,["activityEnd"])!=null&&a(t,["activityEnd"],$l()),t}function Do(i,e){const t={},n=s(e,["text"]);n!=null&&a(t,["text"],n);const o=s(e,["weight"]);return o!=null&&a(t,["weight"],o),t}function Ul(i,e){const t={},n=s(e,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Do(i,r))),a(t,["weightedPrompts"],o)}return t}function No(i,e){const t={},n=s(e,["temperature"]);n!=null&&a(t,["temperature"],n);const o=s(e,["topK"]);o!=null&&a(t,["topK"],o);const r=s(e,["seed"]);r!=null&&a(t,["seed"],r);const l=s(e,["guidance"]);l!=null&&a(t,["guidance"],l);const u=s(e,["bpm"]);u!=null&&a(t,["bpm"],u);const d=s(e,["density"]);d!=null&&a(t,["density"],d);const c=s(e,["brightness"]);c!=null&&a(t,["brightness"],c);const f=s(e,["scale"]);f!=null&&a(t,["scale"],f);const p=s(e,["muteBass"]);p!=null&&a(t,["muteBass"],p);const h=s(e,["muteDrums"]);h!=null&&a(t,["muteDrums"],h);const m=s(e,["onlyBassAndDrums"]);return m!=null&&a(t,["onlyBassAndDrums"],m),t}function Bl(i,e){const t={},n=s(e,["musicGenerationConfig"]);return n!=null&&a(t,["musicGenerationConfig"],No(i,n)),t}function bo(i,e){const t={},n=s(e,["model"]);return n!=null&&a(t,["model"],n),t}function Vo(i,e){const t={},n=s(e,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Do(i,r))),a(t,["weightedPrompts"],o)}return t}function jt(i,e){const t={},n=s(e,["setup"]);n!=null&&a(t,["setup"],bo(i,n));const o=s(e,["clientContent"]);o!=null&&a(t,["clientContent"],Vo(i,o));const r=s(e,["musicGenerationConfig"]);r!=null&&a(t,["musicGenerationConfig"],No(i,r));const l=s(e,["playbackControl"]);return l!=null&&a(t,["playbackControl"],l),t}function Gl(){return{}}function ql(){return{}}function Ol(i,e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const o=s(e,["endOffset"]);o!=null&&a(t,["endOffset"],o);const r=s(e,["startOffset"]);return r!=null&&a(t,["startOffset"],r),t}function Hl(i,e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const o=s(e,["endOffset"]);o!=null&&a(t,["endOffset"],o);const r=s(e,["startOffset"]);return r!=null&&a(t,["startOffset"],r),t}function Jl(i,e){const t={},n=s(e,["data"]);n!=null&&a(t,["data"],n);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Wl(i,e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const o=s(e,["data"]);o!=null&&a(t,["data"],o);const r=s(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function zl(i,e){const t={},n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Yl(i,e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const o=s(e,["fileUri"]);o!=null&&a(t,["fileUri"],o);const r=s(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function Zl(i,e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],Ol(i,n));const o=s(e,["thought"]);o!=null&&a(t,["thought"],o);const r=s(e,["inlineData"]);r!=null&&a(t,["inlineData"],Jl(i,r));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],zl(i,l));const u=s(e,["thoughtSignature"]);u!=null&&a(t,["thoughtSignature"],u);const d=s(e,["codeExecutionResult"]);d!=null&&a(t,["codeExecutionResult"],d);const c=s(e,["executableCode"]);c!=null&&a(t,["executableCode"],c);const f=s(e,["functionCall"]);f!=null&&a(t,["functionCall"],f);const p=s(e,["functionResponse"]);p!=null&&a(t,["functionResponse"],p);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function Kl(i,e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],Hl(i,n));const o=s(e,["thought"]);o!=null&&a(t,["thought"],o);const r=s(e,["inlineData"]);r!=null&&a(t,["inlineData"],Wl(i,r));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],Yl(i,l));const u=s(e,["thoughtSignature"]);u!=null&&a(t,["thoughtSignature"],u);const d=s(e,["codeExecutionResult"]);d!=null&&a(t,["codeExecutionResult"],d);const c=s(e,["executableCode"]);c!=null&&a(t,["executableCode"],c);const f=s(e,["functionCall"]);f!=null&&a(t,["functionCall"],f);const p=s(e,["functionResponse"]);p!=null&&a(t,["functionResponse"],p);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function Xl(i,e){const t={},n=s(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Zl(i,l))),a(t,["parts"],r)}const o=s(e,["role"]);return o!=null&&a(t,["role"],o),t}function Ql(i,e){const t={},n=s(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Kl(i,l))),a(t,["parts"],r)}const o=s(e,["role"]);return o!=null&&a(t,["role"],o),t}function qi(i,e){const t={},n=s(e,["text"]);n!=null&&a(t,["text"],n);const o=s(e,["finished"]);return o!=null&&a(t,["finished"],o),t}function Oi(i,e){const t={},n=s(e,["text"]);n!=null&&a(t,["text"],n);const o=s(e,["finished"]);return o!=null&&a(t,["finished"],o),t}function jl(i,e){const t={},n=s(e,["retrievedUrl"]);n!=null&&a(t,["retrievedUrl"],n);const o=s(e,["urlRetrievalStatus"]);return o!=null&&a(t,["urlRetrievalStatus"],o),t}function eu(i,e){const t={},n=s(e,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>jl(i,r))),a(t,["urlMetadata"],o)}return t}function tu(i,e){const t={},n=s(e,["modelTurn"]);n!=null&&a(t,["modelTurn"],Xl(i,n));const o=s(e,["turnComplete"]);o!=null&&a(t,["turnComplete"],o);const r=s(e,["interrupted"]);r!=null&&a(t,["interrupted"],r);const l=s(e,["groundingMetadata"]);l!=null&&a(t,["groundingMetadata"],l);const u=s(e,["generationComplete"]);u!=null&&a(t,["generationComplete"],u);const d=s(e,["inputTranscription"]);d!=null&&a(t,["inputTranscription"],qi(i,d));const c=s(e,["outputTranscription"]);c!=null&&a(t,["outputTranscription"],qi(i,c));const f=s(e,["urlContextMetadata"]);return f!=null&&a(t,["urlContextMetadata"],eu(i,f)),t}function nu(i,e){const t={},n=s(e,["modelTurn"]);n!=null&&a(t,["modelTurn"],Ql(i,n));const o=s(e,["turnComplete"]);o!=null&&a(t,["turnComplete"],o);const r=s(e,["interrupted"]);r!=null&&a(t,["interrupted"],r);const l=s(e,["groundingMetadata"]);l!=null&&a(t,["groundingMetadata"],l);const u=s(e,["generationComplete"]);u!=null&&a(t,["generationComplete"],u);const d=s(e,["inputTranscription"]);d!=null&&a(t,["inputTranscription"],Oi(i,d));const c=s(e,["outputTranscription"]);return c!=null&&a(t,["outputTranscription"],Oi(i,c)),t}function iu(i,e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const o=s(e,["args"]);o!=null&&a(t,["args"],o);const r=s(e,["name"]);return r!=null&&a(t,["name"],r),t}function ou(i,e){const t={},n=s(e,["args"]);n!=null&&a(t,["args"],n);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function su(i,e){const t={},n=s(e,["functionCalls"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>iu(i,r))),a(t,["functionCalls"],o)}return t}function ru(i,e){const t={},n=s(e,["functionCalls"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>ou(i,r))),a(t,["functionCalls"],o)}return t}function au(i,e){const t={},n=s(e,["ids"]);return n!=null&&a(t,["ids"],n),t}function lu(i,e){const t={},n=s(e,["ids"]);return n!=null&&a(t,["ids"],n),t}function ut(i,e){const t={},n=s(e,["modality"]);n!=null&&a(t,["modality"],n);const o=s(e,["tokenCount"]);return o!=null&&a(t,["tokenCount"],o),t}function ct(i,e){const t={},n=s(e,["modality"]);n!=null&&a(t,["modality"],n);const o=s(e,["tokenCount"]);return o!=null&&a(t,["tokenCount"],o),t}function uu(i,e){const t={},n=s(e,["promptTokenCount"]);n!=null&&a(t,["promptTokenCount"],n);const o=s(e,["cachedContentTokenCount"]);o!=null&&a(t,["cachedContentTokenCount"],o);const r=s(e,["responseTokenCount"]);r!=null&&a(t,["responseTokenCount"],r);const l=s(e,["toolUsePromptTokenCount"]);l!=null&&a(t,["toolUsePromptTokenCount"],l);const u=s(e,["thoughtsTokenCount"]);u!=null&&a(t,["thoughtsTokenCount"],u);const d=s(e,["totalTokenCount"]);d!=null&&a(t,["totalTokenCount"],d);const c=s(e,["promptTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>ut(i,g))),a(t,["promptTokensDetails"],m)}const f=s(e,["cacheTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>ut(i,g))),a(t,["cacheTokensDetails"],m)}const p=s(e,["responseTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>ut(i,g))),a(t,["responseTokensDetails"],m)}const h=s(e,["toolUsePromptTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>ut(i,g))),a(t,["toolUsePromptTokensDetails"],m)}return t}function cu(i,e){const t={},n=s(e,["promptTokenCount"]);n!=null&&a(t,["promptTokenCount"],n);const o=s(e,["cachedContentTokenCount"]);o!=null&&a(t,["cachedContentTokenCount"],o);const r=s(e,["candidatesTokenCount"]);r!=null&&a(t,["responseTokenCount"],r);const l=s(e,["toolUsePromptTokenCount"]);l!=null&&a(t,["toolUsePromptTokenCount"],l);const u=s(e,["thoughtsTokenCount"]);u!=null&&a(t,["thoughtsTokenCount"],u);const d=s(e,["totalTokenCount"]);d!=null&&a(t,["totalTokenCount"],d);const c=s(e,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(y=>ct(i,y))),a(t,["promptTokensDetails"],g)}const f=s(e,["cacheTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(y=>ct(i,y))),a(t,["cacheTokensDetails"],g)}const p=s(e,["candidatesTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(y=>ct(i,y))),a(t,["responseTokensDetails"],g)}const h=s(e,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(y=>ct(i,y))),a(t,["toolUsePromptTokensDetails"],g)}const m=s(e,["trafficType"]);return m!=null&&a(t,["trafficType"],m),t}function du(i,e){const t={},n=s(e,["timeLeft"]);return n!=null&&a(t,["timeLeft"],n),t}function fu(i,e){const t={},n=s(e,["timeLeft"]);return n!=null&&a(t,["timeLeft"],n),t}function pu(i,e){const t={},n=s(e,["newHandle"]);n!=null&&a(t,["newHandle"],n);const o=s(e,["resumable"]);o!=null&&a(t,["resumable"],o);const r=s(e,["lastConsumedClientMessageIndex"]);return r!=null&&a(t,["lastConsumedClientMessageIndex"],r),t}function hu(i,e){const t={},n=s(e,["newHandle"]);n!=null&&a(t,["newHandle"],n);const o=s(e,["resumable"]);o!=null&&a(t,["resumable"],o);const r=s(e,["lastConsumedClientMessageIndex"]);return r!=null&&a(t,["lastConsumedClientMessageIndex"],r),t}function mu(i,e){const t={};s(e,["setupComplete"])!=null&&a(t,["setupComplete"],Gl());const o=s(e,["serverContent"]);o!=null&&a(t,["serverContent"],tu(i,o));const r=s(e,["toolCall"]);r!=null&&a(t,["toolCall"],su(i,r));const l=s(e,["toolCallCancellation"]);l!=null&&a(t,["toolCallCancellation"],au(i,l));const u=s(e,["usageMetadata"]);u!=null&&a(t,["usageMetadata"],uu(i,u));const d=s(e,["goAway"]);d!=null&&a(t,["goAway"],du(i,d));const c=s(e,["sessionResumptionUpdate"]);return c!=null&&a(t,["sessionResumptionUpdate"],pu(i,c)),t}function gu(i,e){const t={};s(e,["setupComplete"])!=null&&a(t,["setupComplete"],ql());const o=s(e,["serverContent"]);o!=null&&a(t,["serverContent"],nu(i,o));const r=s(e,["toolCall"]);r!=null&&a(t,["toolCall"],ru(i,r));const l=s(e,["toolCallCancellation"]);l!=null&&a(t,["toolCallCancellation"],lu(i,l));const u=s(e,["usageMetadata"]);u!=null&&a(t,["usageMetadata"],cu(i,u));const d=s(e,["goAway"]);d!=null&&a(t,["goAway"],fu(i,d));const c=s(e,["sessionResumptionUpdate"]);return c!=null&&a(t,["sessionResumptionUpdate"],hu(i,c)),t}function yu(){return{}}function vu(i,e){const t={},n=s(e,["text"]);n!=null&&a(t,["text"],n);const o=s(e,["weight"]);return o!=null&&a(t,["weight"],o),t}function Cu(i,e){const t={},n=s(e,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>vu(i,r))),a(t,["weightedPrompts"],o)}return t}function Tu(i,e){const t={},n=s(e,["temperature"]);n!=null&&a(t,["temperature"],n);const o=s(e,["topK"]);o!=null&&a(t,["topK"],o);const r=s(e,["seed"]);r!=null&&a(t,["seed"],r);const l=s(e,["guidance"]);l!=null&&a(t,["guidance"],l);const u=s(e,["bpm"]);u!=null&&a(t,["bpm"],u);const d=s(e,["density"]);d!=null&&a(t,["density"],d);const c=s(e,["brightness"]);c!=null&&a(t,["brightness"],c);const f=s(e,["scale"]);f!=null&&a(t,["scale"],f);const p=s(e,["muteBass"]);p!=null&&a(t,["muteBass"],p);const h=s(e,["muteDrums"]);h!=null&&a(t,["muteDrums"],h);const m=s(e,["onlyBassAndDrums"]);return m!=null&&a(t,["onlyBassAndDrums"],m),t}function _u(i,e){const t={},n=s(e,["clientContent"]);n!=null&&a(t,["clientContent"],Cu(i,n));const o=s(e,["musicGenerationConfig"]);return o!=null&&a(t,["musicGenerationConfig"],Tu(i,o)),t}function xu(i,e){const t={},n=s(e,["data"]);n!=null&&a(t,["data"],n);const o=s(e,["mimeType"]);o!=null&&a(t,["mimeType"],o);const r=s(e,["sourceMetadata"]);return r!=null&&a(t,["sourceMetadata"],_u(i,r)),t}function Eu(i,e){const t={},n=s(e,["audioChunks"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>xu(i,r))),a(t,["audioChunks"],o)}return t}function Su(i,e){const t={},n=s(e,["text"]);n!=null&&a(t,["text"],n);const o=s(e,["filteredReason"]);return o!=null&&a(t,["filteredReason"],o),t}function Au(i,e){const t={};s(e,["setupComplete"])!=null&&a(t,["setupComplete"],yu());const o=s(e,["serverContent"]);o!=null&&a(t,["serverContent"],Eu(i,o));const r=s(e,["filteredPrompt"]);return r!=null&&a(t,["filteredPrompt"],Su(i,r)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wu(i,e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const o=s(e,["endOffset"]);o!=null&&a(t,["endOffset"],o);const r=s(e,["startOffset"]);return r!=null&&a(t,["startOffset"],r),t}function Mu(i,e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["data"]);n!=null&&a(t,["data"],n);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Iu(i,e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Pu(i,e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],wu(i,n));const o=s(e,["thought"]);o!=null&&a(t,["thought"],o);const r=s(e,["inlineData"]);r!=null&&a(t,["inlineData"],Mu(i,r));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],Iu(i,l));const u=s(e,["thoughtSignature"]);u!=null&&a(t,["thoughtSignature"],u);const d=s(e,["codeExecutionResult"]);d!=null&&a(t,["codeExecutionResult"],d);const c=s(e,["executableCode"]);c!=null&&a(t,["executableCode"],c);const f=s(e,["functionCall"]);f!=null&&a(t,["functionCall"],f);const p=s(e,["functionResponse"]);p!=null&&a(t,["functionResponse"],p);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function kt(i,e){const t={},n=s(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Pu(i,l))),a(t,["parts"],r)}const o=s(e,["role"]);return o!=null&&a(t,["role"],o),t}function Ru(i,e){const t={},n=s(e,["anyOf"]);n!=null&&a(t,["anyOf"],n);const o=s(e,["default"]);o!=null&&a(t,["default"],o);const r=s(e,["description"]);r!=null&&a(t,["description"],r);const l=s(e,["enum"]);l!=null&&a(t,["enum"],l);const u=s(e,["example"]);u!=null&&a(t,["example"],u);const d=s(e,["format"]);d!=null&&a(t,["format"],d);const c=s(e,["items"]);c!=null&&a(t,["items"],c);const f=s(e,["maxItems"]);f!=null&&a(t,["maxItems"],f);const p=s(e,["maxLength"]);p!=null&&a(t,["maxLength"],p);const h=s(e,["maxProperties"]);h!=null&&a(t,["maxProperties"],h);const m=s(e,["maximum"]);m!=null&&a(t,["maximum"],m);const g=s(e,["minItems"]);g!=null&&a(t,["minItems"],g);const y=s(e,["minLength"]);y!=null&&a(t,["minLength"],y);const _=s(e,["minProperties"]);_!=null&&a(t,["minProperties"],_);const S=s(e,["minimum"]);S!=null&&a(t,["minimum"],S);const I=s(e,["nullable"]);I!=null&&a(t,["nullable"],I);const P=s(e,["pattern"]);P!=null&&a(t,["pattern"],P);const D=s(e,["properties"]);D!=null&&a(t,["properties"],D);const N=s(e,["propertyOrdering"]);N!=null&&a(t,["propertyOrdering"],N);const V=s(e,["required"]);V!=null&&a(t,["required"],V);const L=s(e,["title"]);L!=null&&a(t,["title"],L);const H=s(e,["type"]);return H!=null&&a(t,["type"],H),t}function ku(i,e){const t={};if(s(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=s(e,["category"]);n!=null&&a(t,["category"],n);const o=s(e,["threshold"]);return o!=null&&a(t,["threshold"],o),t}function Du(i,e){const t={},n=s(e,["behavior"]);n!=null&&a(t,["behavior"],n);const o=s(e,["description"]);o!=null&&a(t,["description"],o);const r=s(e,["name"]);r!=null&&a(t,["name"],r);const l=s(e,["parameters"]);l!=null&&a(t,["parameters"],l);const u=s(e,["response"]);return u!=null&&a(t,["response"],u),t}function Nu(i,e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const o=s(e,["endTime"]);return o!=null&&a(t,["endTime"],o),t}function bu(i,e){const t={},n=s(e,["timeRangeFilter"]);return n!=null&&a(t,["timeRangeFilter"],Nu(i,n)),t}function Vu(i,e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const o=s(e,["dynamicThreshold"]);return o!=null&&a(t,["dynamicThreshold"],o),t}function $u(i,e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],Vu(i,n)),t}function Fu(){return{}}function Lu(i,e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>Du(i,c))),a(t,["functionDeclarations"],d)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=s(e,["googleSearch"]);o!=null&&a(t,["googleSearch"],bu(i,o));const r=s(e,["googleSearchRetrieval"]);if(r!=null&&a(t,["googleSearchRetrieval"],$u(i,r)),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(e,["urlContext"])!=null&&a(t,["urlContext"],Fu());const u=s(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function Uu(i,e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const o=s(e,["allowedFunctionNames"]);return o!=null&&a(t,["allowedFunctionNames"],o),t}function Bu(i,e){const t={},n=s(e,["latitude"]);n!=null&&a(t,["latitude"],n);const o=s(e,["longitude"]);return o!=null&&a(t,["longitude"],o),t}function Gu(i,e){const t={},n=s(e,["latLng"]);n!=null&&a(t,["latLng"],Bu(i,n));const o=s(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function qu(i,e){const t={},n=s(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],Uu(i,n));const o=s(e,["retrievalConfig"]);return o!=null&&a(t,["retrievalConfig"],Gu(i,o)),t}function Ou(i,e){const t={},n=s(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function $o(i,e){const t={},n=s(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],Ou(i,n)),t}function Hu(i,e){const t={},n=s(e,["speaker"]);n!=null&&a(t,["speaker"],n);const o=s(e,["voiceConfig"]);return o!=null&&a(t,["voiceConfig"],$o(i,o)),t}function Ju(i,e){const t={},n=s(e,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Hu(i,r))),a(t,["speakerVoiceConfigs"],o)}return t}function Wu(i,e){const t={},n=s(e,["voiceConfig"]);n!=null&&a(t,["voiceConfig"],$o(i,n));const o=s(e,["multiSpeakerVoiceConfig"]);o!=null&&a(t,["multiSpeakerVoiceConfig"],Ju(i,o));const r=s(e,["languageCode"]);return r!=null&&a(t,["languageCode"],r),t}function zu(i,e){const t={},n=s(e,["includeThoughts"]);n!=null&&a(t,["includeThoughts"],n);const o=s(e,["thinkingBudget"]);return o!=null&&a(t,["thinkingBudget"],o),t}function Yu(i,e,t){const n={},o=s(e,["systemInstruction"]);t!==void 0&&o!=null&&a(t,["systemInstruction"],kt(i,W(i,o)));const r=s(e,["temperature"]);r!=null&&a(n,["temperature"],r);const l=s(e,["topP"]);l!=null&&a(n,["topP"],l);const u=s(e,["topK"]);u!=null&&a(n,["topK"],u);const d=s(e,["candidateCount"]);d!=null&&a(n,["candidateCount"],d);const c=s(e,["maxOutputTokens"]);c!=null&&a(n,["maxOutputTokens"],c);const f=s(e,["stopSequences"]);f!=null&&a(n,["stopSequences"],f);const p=s(e,["responseLogprobs"]);p!=null&&a(n,["responseLogprobs"],p);const h=s(e,["logprobs"]);h!=null&&a(n,["logprobs"],h);const m=s(e,["presencePenalty"]);m!=null&&a(n,["presencePenalty"],m);const g=s(e,["frequencyPenalty"]);g!=null&&a(n,["frequencyPenalty"],g);const y=s(e,["seed"]);y!=null&&a(n,["seed"],y);const _=s(e,["responseMimeType"]);_!=null&&a(n,["responseMimeType"],_);const S=s(e,["responseSchema"]);if(S!=null&&a(n,["responseSchema"],Ru(i,At(i,S))),s(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(s(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=s(e,["safetySettings"]);if(t!==void 0&&I!=null){let F=I;Array.isArray(F)&&(F=F.map(Z=>ku(i,Z))),a(t,["safetySettings"],F)}const P=s(e,["tools"]);if(t!==void 0&&P!=null){let F=lt(i,P);Array.isArray(F)&&(F=F.map(Z=>Lu(i,at(i,Z)))),a(t,["tools"],F)}const D=s(e,["toolConfig"]);if(t!==void 0&&D!=null&&a(t,["toolConfig"],qu(i,D)),s(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=s(e,["cachedContent"]);t!==void 0&&N!=null&&a(t,["cachedContent"],xe(i,N));const V=s(e,["responseModalities"]);V!=null&&a(n,["responseModalities"],V);const L=s(e,["mediaResolution"]);L!=null&&a(n,["mediaResolution"],L);const H=s(e,["speechConfig"]);if(H!=null&&a(n,["speechConfig"],Wu(i,Ao(i,H))),s(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=s(e,["thinkingConfig"]);return k!=null&&a(n,["thinkingConfig"],zu(i,k)),n}function Hi(i,e){const t={},n=s(e,["model"]);n!=null&&a(t,["_url","model"],U(i,n));const o=s(e,["contents"]);if(o!=null){let l=ee(i,o);Array.isArray(l)&&(l=l.map(u=>kt(i,u))),a(t,["contents"],l)}const r=s(e,["config"]);return r!=null&&a(t,["generationConfig"],Yu(i,r,t)),t}function Zu(i,e,t){const n={},o=s(e,["taskType"]);t!==void 0&&o!=null&&a(t,["requests[]","taskType"],o);const r=s(e,["title"]);t!==void 0&&r!=null&&a(t,["requests[]","title"],r);const l=s(e,["outputDimensionality"]);if(t!==void 0&&l!=null&&a(t,["requests[]","outputDimensionality"],l),s(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(s(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Ku(i,e){const t={},n=s(e,["model"]);n!=null&&a(t,["_url","model"],U(i,n));const o=s(e,["contents"]);o!=null&&a(t,["requests[]","content"],So(i,o));const r=s(e,["config"]);r!=null&&a(t,["config"],Zu(i,r,t));const l=s(e,["model"]);return l!==void 0&&a(t,["requests[]","model"],U(i,l)),t}function Xu(i,e,t){const n={};if(s(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=s(e,["numberOfImages"]);t!==void 0&&o!=null&&a(t,["parameters","sampleCount"],o);const r=s(e,["aspectRatio"]);t!==void 0&&r!=null&&a(t,["parameters","aspectRatio"],r);const l=s(e,["guidanceScale"]);if(t!==void 0&&l!=null&&a(t,["parameters","guidanceScale"],l),s(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=s(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&a(t,["parameters","safetySetting"],u);const d=s(e,["personGeneration"]);t!==void 0&&d!=null&&a(t,["parameters","personGeneration"],d);const c=s(e,["includeSafetyAttributes"]);t!==void 0&&c!=null&&a(t,["parameters","includeSafetyAttributes"],c);const f=s(e,["includeRaiReason"]);t!==void 0&&f!=null&&a(t,["parameters","includeRaiReason"],f);const p=s(e,["language"]);t!==void 0&&p!=null&&a(t,["parameters","language"],p);const h=s(e,["outputMimeType"]);t!==void 0&&h!=null&&a(t,["parameters","outputOptions","mimeType"],h);const m=s(e,["outputCompressionQuality"]);if(t!==void 0&&m!=null&&a(t,["parameters","outputOptions","compressionQuality"],m),s(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(s(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Qu(i,e){const t={},n=s(e,["model"]);n!=null&&a(t,["_url","model"],U(i,n));const o=s(e,["prompt"]);o!=null&&a(t,["instances[0]","prompt"],o);const r=s(e,["config"]);return r!=null&&a(t,["config"],Xu(i,r,t)),t}function ju(i,e){const t={},n=s(e,["model"]);n!=null&&a(t,["_url","name"],U(i,n));const o=s(e,["config"]);return o!=null&&a(t,["config"],o),t}function ec(i,e,t){const n={},o=s(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const r=s(e,["pageToken"]);t!==void 0&&r!=null&&a(t,["_query","pageToken"],r);const l=s(e,["filter"]);t!==void 0&&l!=null&&a(t,["_query","filter"],l);const u=s(e,["queryBase"]);return t!==void 0&&u!=null&&a(t,["_url","models_url"],Io(i,u)),n}function tc(i,e){const t={},n=s(e,["config"]);return n!=null&&a(t,["config"],ec(i,n,t)),t}function nc(i,e,t){const n={},o=s(e,["displayName"]);t!==void 0&&o!=null&&a(t,["displayName"],o);const r=s(e,["description"]);t!==void 0&&r!=null&&a(t,["description"],r);const l=s(e,["defaultCheckpointId"]);return t!==void 0&&l!=null&&a(t,["defaultCheckpointId"],l),n}function ic(i,e){const t={},n=s(e,["model"]);n!=null&&a(t,["_url","name"],U(i,n));const o=s(e,["config"]);return o!=null&&a(t,["config"],nc(i,o,t)),t}function oc(i,e){const t={},n=s(e,["model"]);n!=null&&a(t,["_url","name"],U(i,n));const o=s(e,["config"]);return o!=null&&a(t,["config"],o),t}function sc(i,e){const t={};if(s(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(s(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(s(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function rc(i,e){const t={},n=s(e,["model"]);n!=null&&a(t,["_url","model"],U(i,n));const o=s(e,["contents"]);if(o!=null){let l=ee(i,o);Array.isArray(l)&&(l=l.map(u=>kt(i,u))),a(t,["contents"],l)}const r=s(e,["config"]);return r!=null&&a(t,["config"],sc(i,r)),t}function ac(i,e){const t={};if(s(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=s(e,["imageBytes"]);n!=null&&a(t,["bytesBase64Encoded"],fe(i,n));const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function lc(i,e,t){const n={},o=s(e,["numberOfVideos"]);if(t!==void 0&&o!=null&&a(t,["parameters","sampleCount"],o),s(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=s(e,["durationSeconds"]);if(t!==void 0&&r!=null&&a(t,["parameters","durationSeconds"],r),s(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=s(e,["aspectRatio"]);if(t!==void 0&&l!=null&&a(t,["parameters","aspectRatio"],l),s(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const u=s(e,["personGeneration"]);if(t!==void 0&&u!=null&&a(t,["parameters","personGeneration"],u),s(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=s(e,["negativePrompt"]);t!==void 0&&d!=null&&a(t,["parameters","negativePrompt"],d);const c=s(e,["enhancePrompt"]);if(t!==void 0&&c!=null&&a(t,["parameters","enhancePrompt"],c),s(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(s(e,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");return n}function uc(i,e){const t={},n=s(e,["model"]);n!=null&&a(t,["_url","model"],U(i,n));const o=s(e,["prompt"]);o!=null&&a(t,["instances[0]","prompt"],o);const r=s(e,["image"]);if(r!=null&&a(t,["instances[0]","image"],ac(i,r)),s(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const l=s(e,["config"]);return l!=null&&a(t,["config"],lc(i,l,t)),t}function cc(i,e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const o=s(e,["endOffset"]);o!=null&&a(t,["endOffset"],o);const r=s(e,["startOffset"]);return r!=null&&a(t,["startOffset"],r),t}function dc(i,e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const o=s(e,["data"]);o!=null&&a(t,["data"],o);const r=s(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function fc(i,e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const o=s(e,["fileUri"]);o!=null&&a(t,["fileUri"],o);const r=s(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function pc(i,e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],cc(i,n));const o=s(e,["thought"]);o!=null&&a(t,["thought"],o);const r=s(e,["inlineData"]);r!=null&&a(t,["inlineData"],dc(i,r));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],fc(i,l));const u=s(e,["thoughtSignature"]);u!=null&&a(t,["thoughtSignature"],u);const d=s(e,["codeExecutionResult"]);d!=null&&a(t,["codeExecutionResult"],d);const c=s(e,["executableCode"]);c!=null&&a(t,["executableCode"],c);const f=s(e,["functionCall"]);f!=null&&a(t,["functionCall"],f);const p=s(e,["functionResponse"]);p!=null&&a(t,["functionResponse"],p);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function We(i,e){const t={},n=s(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>pc(i,l))),a(t,["parts"],r)}const o=s(e,["role"]);return o!=null&&a(t,["role"],o),t}function hc(i,e){const t={},n=s(e,["anyOf"]);n!=null&&a(t,["anyOf"],n);const o=s(e,["default"]);o!=null&&a(t,["default"],o);const r=s(e,["description"]);r!=null&&a(t,["description"],r);const l=s(e,["enum"]);l!=null&&a(t,["enum"],l);const u=s(e,["example"]);u!=null&&a(t,["example"],u);const d=s(e,["format"]);d!=null&&a(t,["format"],d);const c=s(e,["items"]);c!=null&&a(t,["items"],c);const f=s(e,["maxItems"]);f!=null&&a(t,["maxItems"],f);const p=s(e,["maxLength"]);p!=null&&a(t,["maxLength"],p);const h=s(e,["maxProperties"]);h!=null&&a(t,["maxProperties"],h);const m=s(e,["maximum"]);m!=null&&a(t,["maximum"],m);const g=s(e,["minItems"]);g!=null&&a(t,["minItems"],g);const y=s(e,["minLength"]);y!=null&&a(t,["minLength"],y);const _=s(e,["minProperties"]);_!=null&&a(t,["minProperties"],_);const S=s(e,["minimum"]);S!=null&&a(t,["minimum"],S);const I=s(e,["nullable"]);I!=null&&a(t,["nullable"],I);const P=s(e,["pattern"]);P!=null&&a(t,["pattern"],P);const D=s(e,["properties"]);D!=null&&a(t,["properties"],D);const N=s(e,["propertyOrdering"]);N!=null&&a(t,["propertyOrdering"],N);const V=s(e,["required"]);V!=null&&a(t,["required"],V);const L=s(e,["title"]);L!=null&&a(t,["title"],L);const H=s(e,["type"]);return H!=null&&a(t,["type"],H),t}function mc(i,e){const t={},n=s(e,["featureSelectionPreference"]);return n!=null&&a(t,["featureSelectionPreference"],n),t}function gc(i,e){const t={},n=s(e,["method"]);n!=null&&a(t,["method"],n);const o=s(e,["category"]);o!=null&&a(t,["category"],o);const r=s(e,["threshold"]);return r!=null&&a(t,["threshold"],r),t}function yc(i,e){const t={};if(s(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=s(e,["description"]);n!=null&&a(t,["description"],n);const o=s(e,["name"]);o!=null&&a(t,["name"],o);const r=s(e,["parameters"]);r!=null&&a(t,["parameters"],r);const l=s(e,["response"]);return l!=null&&a(t,["response"],l),t}function vc(i,e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const o=s(e,["endTime"]);return o!=null&&a(t,["endTime"],o),t}function Cc(i,e){const t={},n=s(e,["timeRangeFilter"]);return n!=null&&a(t,["timeRangeFilter"],vc(i,n)),t}function Tc(i,e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const o=s(e,["dynamicThreshold"]);return o!=null&&a(t,["dynamicThreshold"],o),t}function _c(i,e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],Tc(i,n)),t}function xc(){return{}}function Ec(i,e){const t={},n=s(e,["apiKeyString"]);return n!=null&&a(t,["apiKeyString"],n),t}function Sc(i,e){const t={},n=s(e,["apiKeyConfig"]);n!=null&&a(t,["apiKeyConfig"],Ec(i,n));const o=s(e,["authType"]);o!=null&&a(t,["authType"],o);const r=s(e,["googleServiceAccountConfig"]);r!=null&&a(t,["googleServiceAccountConfig"],r);const l=s(e,["httpBasicAuthConfig"]);l!=null&&a(t,["httpBasicAuthConfig"],l);const u=s(e,["oauthConfig"]);u!=null&&a(t,["oauthConfig"],u);const d=s(e,["oidcConfig"]);return d!=null&&a(t,["oidcConfig"],d),t}function Ac(i,e){const t={},n=s(e,["authConfig"]);return n!=null&&a(t,["authConfig"],Sc(i,n)),t}function wc(){return{}}function Fo(i,e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>yc(i,h))),a(t,["functionDeclarations"],p)}const o=s(e,["retrieval"]);o!=null&&a(t,["retrieval"],o);const r=s(e,["googleSearch"]);r!=null&&a(t,["googleSearch"],Cc(i,r));const l=s(e,["googleSearchRetrieval"]);l!=null&&a(t,["googleSearchRetrieval"],_c(i,l)),s(e,["enterpriseWebSearch"])!=null&&a(t,["enterpriseWebSearch"],xc());const d=s(e,["googleMaps"]);d!=null&&a(t,["googleMaps"],Ac(i,d)),s(e,["urlContext"])!=null&&a(t,["urlContext"],wc());const f=s(e,["codeExecution"]);return f!=null&&a(t,["codeExecution"],f),t}function Mc(i,e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const o=s(e,["allowedFunctionNames"]);return o!=null&&a(t,["allowedFunctionNames"],o),t}function Ic(i,e){const t={},n=s(e,["latitude"]);n!=null&&a(t,["latitude"],n);const o=s(e,["longitude"]);return o!=null&&a(t,["longitude"],o),t}function Pc(i,e){const t={},n=s(e,["latLng"]);n!=null&&a(t,["latLng"],Ic(i,n));const o=s(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function Rc(i,e){const t={},n=s(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],Mc(i,n));const o=s(e,["retrievalConfig"]);return o!=null&&a(t,["retrievalConfig"],Pc(i,o)),t}function kc(i,e){const t={},n=s(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function Dc(i,e){const t={},n=s(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],kc(i,n)),t}function Nc(i,e){const t={},n=s(e,["voiceConfig"]);if(n!=null&&a(t,["voiceConfig"],Dc(i,n)),s(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=s(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function bc(i,e){const t={},n=s(e,["includeThoughts"]);n!=null&&a(t,["includeThoughts"],n);const o=s(e,["thinkingBudget"]);return o!=null&&a(t,["thinkingBudget"],o),t}function Vc(i,e,t){const n={},o=s(e,["systemInstruction"]);t!==void 0&&o!=null&&a(t,["systemInstruction"],We(i,W(i,o)));const r=s(e,["temperature"]);r!=null&&a(n,["temperature"],r);const l=s(e,["topP"]);l!=null&&a(n,["topP"],l);const u=s(e,["topK"]);u!=null&&a(n,["topK"],u);const d=s(e,["candidateCount"]);d!=null&&a(n,["candidateCount"],d);const c=s(e,["maxOutputTokens"]);c!=null&&a(n,["maxOutputTokens"],c);const f=s(e,["stopSequences"]);f!=null&&a(n,["stopSequences"],f);const p=s(e,["responseLogprobs"]);p!=null&&a(n,["responseLogprobs"],p);const h=s(e,["logprobs"]);h!=null&&a(n,["logprobs"],h);const m=s(e,["presencePenalty"]);m!=null&&a(n,["presencePenalty"],m);const g=s(e,["frequencyPenalty"]);g!=null&&a(n,["frequencyPenalty"],g);const y=s(e,["seed"]);y!=null&&a(n,["seed"],y);const _=s(e,["responseMimeType"]);_!=null&&a(n,["responseMimeType"],_);const S=s(e,["responseSchema"]);S!=null&&a(n,["responseSchema"],hc(i,At(i,S)));const I=s(e,["routingConfig"]);I!=null&&a(n,["routingConfig"],I);const P=s(e,["modelSelectionConfig"]);P!=null&&a(n,["modelConfig"],mc(i,P));const D=s(e,["safetySettings"]);if(t!==void 0&&D!=null){let ae=D;Array.isArray(ae)&&(ae=ae.map(Nt=>gc(i,Nt))),a(t,["safetySettings"],ae)}const N=s(e,["tools"]);if(t!==void 0&&N!=null){let ae=lt(i,N);Array.isArray(ae)&&(ae=ae.map(Nt=>Fo(i,at(i,Nt)))),a(t,["tools"],ae)}const V=s(e,["toolConfig"]);t!==void 0&&V!=null&&a(t,["toolConfig"],Rc(i,V));const L=s(e,["labels"]);t!==void 0&&L!=null&&a(t,["labels"],L);const H=s(e,["cachedContent"]);t!==void 0&&H!=null&&a(t,["cachedContent"],xe(i,H));const k=s(e,["responseModalities"]);k!=null&&a(n,["responseModalities"],k);const F=s(e,["mediaResolution"]);F!=null&&a(n,["mediaResolution"],F);const Z=s(e,["speechConfig"]);Z!=null&&a(n,["speechConfig"],Nc(i,Ao(i,Z)));const gn=s(e,["audioTimestamp"]);gn!=null&&a(n,["audioTimestamp"],gn);const yn=s(e,["thinkingConfig"]);return yn!=null&&a(n,["thinkingConfig"],bc(i,yn)),n}function Ji(i,e){const t={},n=s(e,["model"]);n!=null&&a(t,["_url","model"],U(i,n));const o=s(e,["contents"]);if(o!=null){let l=ee(i,o);Array.isArray(l)&&(l=l.map(u=>We(i,u))),a(t,["contents"],l)}const r=s(e,["config"]);return r!=null&&a(t,["generationConfig"],Vc(i,r,t)),t}function $c(i,e,t){const n={},o=s(e,["taskType"]);t!==void 0&&o!=null&&a(t,["instances[]","task_type"],o);const r=s(e,["title"]);t!==void 0&&r!=null&&a(t,["instances[]","title"],r);const l=s(e,["outputDimensionality"]);t!==void 0&&l!=null&&a(t,["parameters","outputDimensionality"],l);const u=s(e,["mimeType"]);t!==void 0&&u!=null&&a(t,["instances[]","mimeType"],u);const d=s(e,["autoTruncate"]);return t!==void 0&&d!=null&&a(t,["parameters","autoTruncate"],d),n}function Fc(i,e){const t={},n=s(e,["model"]);n!=null&&a(t,["_url","model"],U(i,n));const o=s(e,["contents"]);o!=null&&a(t,["instances[]","content"],So(i,o));const r=s(e,["config"]);return r!=null&&a(t,["config"],$c(i,r,t)),t}function Lc(i,e,t){const n={},o=s(e,["outputGcsUri"]);t!==void 0&&o!=null&&a(t,["parameters","storageUri"],o);const r=s(e,["negativePrompt"]);t!==void 0&&r!=null&&a(t,["parameters","negativePrompt"],r);const l=s(e,["numberOfImages"]);t!==void 0&&l!=null&&a(t,["parameters","sampleCount"],l);const u=s(e,["aspectRatio"]);t!==void 0&&u!=null&&a(t,["parameters","aspectRatio"],u);const d=s(e,["guidanceScale"]);t!==void 0&&d!=null&&a(t,["parameters","guidanceScale"],d);const c=s(e,["seed"]);t!==void 0&&c!=null&&a(t,["parameters","seed"],c);const f=s(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&a(t,["parameters","safetySetting"],f);const p=s(e,["personGeneration"]);t!==void 0&&p!=null&&a(t,["parameters","personGeneration"],p);const h=s(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&a(t,["parameters","includeSafetyAttributes"],h);const m=s(e,["includeRaiReason"]);t!==void 0&&m!=null&&a(t,["parameters","includeRaiReason"],m);const g=s(e,["language"]);t!==void 0&&g!=null&&a(t,["parameters","language"],g);const y=s(e,["outputMimeType"]);t!==void 0&&y!=null&&a(t,["parameters","outputOptions","mimeType"],y);const _=s(e,["outputCompressionQuality"]);t!==void 0&&_!=null&&a(t,["parameters","outputOptions","compressionQuality"],_);const S=s(e,["addWatermark"]);t!==void 0&&S!=null&&a(t,["parameters","addWatermark"],S);const I=s(e,["enhancePrompt"]);return t!==void 0&&I!=null&&a(t,["parameters","enhancePrompt"],I),n}function Uc(i,e){const t={},n=s(e,["model"]);n!=null&&a(t,["_url","model"],U(i,n));const o=s(e,["prompt"]);o!=null&&a(t,["instances[0]","prompt"],o);const r=s(e,["config"]);return r!=null&&a(t,["config"],Lc(i,r,t)),t}function Dt(i,e){const t={},n=s(e,["gcsUri"]);n!=null&&a(t,["gcsUri"],n);const o=s(e,["imageBytes"]);o!=null&&a(t,["bytesBase64Encoded"],fe(i,o));const r=s(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function Bc(i,e){const t={},n=s(e,["maskMode"]);n!=null&&a(t,["maskMode"],n);const o=s(e,["segmentationClasses"]);o!=null&&a(t,["maskClasses"],o);const r=s(e,["maskDilation"]);return r!=null&&a(t,["dilation"],r),t}function Gc(i,e){const t={},n=s(e,["controlType"]);n!=null&&a(t,["controlType"],n);const o=s(e,["enableControlImageComputation"]);return o!=null&&a(t,["computeControl"],o),t}function qc(i,e){const t={},n=s(e,["styleDescription"]);return n!=null&&a(t,["styleDescription"],n),t}function Oc(i,e){const t={},n=s(e,["subjectType"]);n!=null&&a(t,["subjectType"],n);const o=s(e,["subjectDescription"]);return o!=null&&a(t,["subjectDescription"],o),t}function Hc(i,e){const t={},n=s(e,["referenceImage"]);n!=null&&a(t,["referenceImage"],Dt(i,n));const o=s(e,["referenceId"]);o!=null&&a(t,["referenceId"],o);const r=s(e,["referenceType"]);r!=null&&a(t,["referenceType"],r);const l=s(e,["maskImageConfig"]);l!=null&&a(t,["maskImageConfig"],Bc(i,l));const u=s(e,["controlImageConfig"]);u!=null&&a(t,["controlImageConfig"],Gc(i,u));const d=s(e,["styleImageConfig"]);d!=null&&a(t,["styleImageConfig"],qc(i,d));const c=s(e,["subjectImageConfig"]);return c!=null&&a(t,["subjectImageConfig"],Oc(i,c)),t}function Jc(i,e,t){const n={},o=s(e,["outputGcsUri"]);t!==void 0&&o!=null&&a(t,["parameters","storageUri"],o);const r=s(e,["negativePrompt"]);t!==void 0&&r!=null&&a(t,["parameters","negativePrompt"],r);const l=s(e,["numberOfImages"]);t!==void 0&&l!=null&&a(t,["parameters","sampleCount"],l);const u=s(e,["aspectRatio"]);t!==void 0&&u!=null&&a(t,["parameters","aspectRatio"],u);const d=s(e,["guidanceScale"]);t!==void 0&&d!=null&&a(t,["parameters","guidanceScale"],d);const c=s(e,["seed"]);t!==void 0&&c!=null&&a(t,["parameters","seed"],c);const f=s(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&a(t,["parameters","safetySetting"],f);const p=s(e,["personGeneration"]);t!==void 0&&p!=null&&a(t,["parameters","personGeneration"],p);const h=s(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&a(t,["parameters","includeSafetyAttributes"],h);const m=s(e,["includeRaiReason"]);t!==void 0&&m!=null&&a(t,["parameters","includeRaiReason"],m);const g=s(e,["language"]);t!==void 0&&g!=null&&a(t,["parameters","language"],g);const y=s(e,["outputMimeType"]);t!==void 0&&y!=null&&a(t,["parameters","outputOptions","mimeType"],y);const _=s(e,["outputCompressionQuality"]);t!==void 0&&_!=null&&a(t,["parameters","outputOptions","compressionQuality"],_);const S=s(e,["editMode"]);t!==void 0&&S!=null&&a(t,["parameters","editMode"],S);const I=s(e,["baseSteps"]);return t!==void 0&&I!=null&&a(t,["parameters","editConfig","baseSteps"],I),n}function Wc(i,e){const t={},n=s(e,["model"]);n!=null&&a(t,["_url","model"],U(i,n));const o=s(e,["prompt"]);o!=null&&a(t,["instances[0]","prompt"],o);const r=s(e,["referenceImages"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>Hc(i,d))),a(t,["instances[0]","referenceImages"],u)}const l=s(e,["config"]);return l!=null&&a(t,["config"],Jc(i,l,t)),t}function zc(i,e,t){const n={},o=s(e,["includeRaiReason"]);t!==void 0&&o!=null&&a(t,["parameters","includeRaiReason"],o);const r=s(e,["outputMimeType"]);t!==void 0&&r!=null&&a(t,["parameters","outputOptions","mimeType"],r);const l=s(e,["outputCompressionQuality"]);t!==void 0&&l!=null&&a(t,["parameters","outputOptions","compressionQuality"],l);const u=s(e,["numberOfImages"]);t!==void 0&&u!=null&&a(t,["parameters","sampleCount"],u);const d=s(e,["mode"]);return t!==void 0&&d!=null&&a(t,["parameters","mode"],d),n}function Yc(i,e){const t={},n=s(e,["model"]);n!=null&&a(t,["_url","model"],U(i,n));const o=s(e,["image"]);o!=null&&a(t,["instances[0]","image"],Dt(i,o));const r=s(e,["upscaleFactor"]);r!=null&&a(t,["parameters","upscaleConfig","upscaleFactor"],r);const l=s(e,["config"]);return l!=null&&a(t,["config"],zc(i,l,t)),t}function Zc(i,e){const t={},n=s(e,["model"]);n!=null&&a(t,["_url","name"],U(i,n));const o=s(e,["config"]);return o!=null&&a(t,["config"],o),t}function Kc(i,e,t){const n={},o=s(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const r=s(e,["pageToken"]);t!==void 0&&r!=null&&a(t,["_query","pageToken"],r);const l=s(e,["filter"]);t!==void 0&&l!=null&&a(t,["_query","filter"],l);const u=s(e,["queryBase"]);return t!==void 0&&u!=null&&a(t,["_url","models_url"],Io(i,u)),n}function Xc(i,e){const t={},n=s(e,["config"]);return n!=null&&a(t,["config"],Kc(i,n,t)),t}function Qc(i,e,t){const n={},o=s(e,["displayName"]);t!==void 0&&o!=null&&a(t,["displayName"],o);const r=s(e,["description"]);t!==void 0&&r!=null&&a(t,["description"],r);const l=s(e,["defaultCheckpointId"]);return t!==void 0&&l!=null&&a(t,["defaultCheckpointId"],l),n}function jc(i,e){const t={},n=s(e,["model"]);n!=null&&a(t,["_url","model"],U(i,n));const o=s(e,["config"]);return o!=null&&a(t,["config"],Qc(i,o,t)),t}function ed(i,e){const t={},n=s(e,["model"]);n!=null&&a(t,["_url","name"],U(i,n));const o=s(e,["config"]);return o!=null&&a(t,["config"],o),t}function td(i,e,t){const n={},o=s(e,["systemInstruction"]);t!==void 0&&o!=null&&a(t,["systemInstruction"],We(i,W(i,o)));const r=s(e,["tools"]);if(t!==void 0&&r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>Fo(i,d))),a(t,["tools"],u)}const l=s(e,["generationConfig"]);return t!==void 0&&l!=null&&a(t,["generationConfig"],l),n}function nd(i,e){const t={},n=s(e,["model"]);n!=null&&a(t,["_url","model"],U(i,n));const o=s(e,["contents"]);if(o!=null){let l=ee(i,o);Array.isArray(l)&&(l=l.map(u=>We(i,u))),a(t,["contents"],l)}const r=s(e,["config"]);return r!=null&&a(t,["config"],td(i,r,t)),t}function id(i,e){const t={},n=s(e,["model"]);n!=null&&a(t,["_url","model"],U(i,n));const o=s(e,["contents"]);if(o!=null){let l=ee(i,o);Array.isArray(l)&&(l=l.map(u=>We(i,u))),a(t,["contents"],l)}const r=s(e,["config"]);return r!=null&&a(t,["config"],r),t}function od(i,e){const t={},n=s(e,["uri"]);n!=null&&a(t,["gcsUri"],n);const o=s(e,["videoBytes"]);o!=null&&a(t,["bytesBase64Encoded"],fe(i,o));const r=s(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function sd(i,e,t){const n={},o=s(e,["numberOfVideos"]);t!==void 0&&o!=null&&a(t,["parameters","sampleCount"],o);const r=s(e,["outputGcsUri"]);t!==void 0&&r!=null&&a(t,["parameters","storageUri"],r);const l=s(e,["fps"]);t!==void 0&&l!=null&&a(t,["parameters","fps"],l);const u=s(e,["durationSeconds"]);t!==void 0&&u!=null&&a(t,["parameters","durationSeconds"],u);const d=s(e,["seed"]);t!==void 0&&d!=null&&a(t,["parameters","seed"],d);const c=s(e,["aspectRatio"]);t!==void 0&&c!=null&&a(t,["parameters","aspectRatio"],c);const f=s(e,["resolution"]);t!==void 0&&f!=null&&a(t,["parameters","resolution"],f);const p=s(e,["personGeneration"]);t!==void 0&&p!=null&&a(t,["parameters","personGeneration"],p);const h=s(e,["pubsubTopic"]);t!==void 0&&h!=null&&a(t,["parameters","pubsubTopic"],h);const m=s(e,["negativePrompt"]);t!==void 0&&m!=null&&a(t,["parameters","negativePrompt"],m);const g=s(e,["enhancePrompt"]);t!==void 0&&g!=null&&a(t,["parameters","enhancePrompt"],g);const y=s(e,["generateAudio"]);t!==void 0&&y!=null&&a(t,["parameters","generateAudio"],y);const _=s(e,["lastFrame"]);return t!==void 0&&_!=null&&a(t,["instances[0]","lastFrame"],Dt(i,_)),n}function rd(i,e){const t={},n=s(e,["model"]);n!=null&&a(t,["_url","model"],U(i,n));const o=s(e,["prompt"]);o!=null&&a(t,["instances[0]","prompt"],o);const r=s(e,["image"]);r!=null&&a(t,["instances[0]","image"],Dt(i,r));const l=s(e,["video"]);l!=null&&a(t,["instances[0]","video"],od(i,l));const u=s(e,["config"]);return u!=null&&a(t,["config"],sd(i,u,t)),t}function ad(i,e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const o=s(e,["endOffset"]);o!=null&&a(t,["endOffset"],o);const r=s(e,["startOffset"]);return r!=null&&a(t,["startOffset"],r),t}function ld(i,e){const t={},n=s(e,["data"]);n!=null&&a(t,["data"],n);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function ud(i,e){const t={},n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function cd(i,e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],ad(i,n));const o=s(e,["thought"]);o!=null&&a(t,["thought"],o);const r=s(e,["inlineData"]);r!=null&&a(t,["inlineData"],ld(i,r));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],ud(i,l));const u=s(e,["thoughtSignature"]);u!=null&&a(t,["thoughtSignature"],u);const d=s(e,["codeExecutionResult"]);d!=null&&a(t,["codeExecutionResult"],d);const c=s(e,["executableCode"]);c!=null&&a(t,["executableCode"],c);const f=s(e,["functionCall"]);f!=null&&a(t,["functionCall"],f);const p=s(e,["functionResponse"]);p!=null&&a(t,["functionResponse"],p);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function dd(i,e){const t={},n=s(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>cd(i,l))),a(t,["parts"],r)}const o=s(e,["role"]);return o!=null&&a(t,["role"],o),t}function fd(i,e){const t={},n=s(e,["citationSources"]);return n!=null&&a(t,["citations"],n),t}function pd(i,e){const t={},n=s(e,["retrievedUrl"]);n!=null&&a(t,["retrievedUrl"],n);const o=s(e,["urlRetrievalStatus"]);return o!=null&&a(t,["urlRetrievalStatus"],o),t}function hd(i,e){const t={},n=s(e,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>pd(i,r))),a(t,["urlMetadata"],o)}return t}function md(i,e){const t={},n=s(e,["content"]);n!=null&&a(t,["content"],dd(i,n));const o=s(e,["citationMetadata"]);o!=null&&a(t,["citationMetadata"],fd(i,o));const r=s(e,["tokenCount"]);r!=null&&a(t,["tokenCount"],r);const l=s(e,["finishReason"]);l!=null&&a(t,["finishReason"],l);const u=s(e,["urlContextMetadata"]);u!=null&&a(t,["urlContextMetadata"],hd(i,u));const d=s(e,["avgLogprobs"]);d!=null&&a(t,["avgLogprobs"],d);const c=s(e,["groundingMetadata"]);c!=null&&a(t,["groundingMetadata"],c);const f=s(e,["index"]);f!=null&&a(t,["index"],f);const p=s(e,["logprobsResult"]);p!=null&&a(t,["logprobsResult"],p);const h=s(e,["safetyRatings"]);return h!=null&&a(t,["safetyRatings"],h),t}function Wi(i,e){const t={},n=s(e,["candidates"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>md(i,d))),a(t,["candidates"],u)}const o=s(e,["modelVersion"]);o!=null&&a(t,["modelVersion"],o);const r=s(e,["promptFeedback"]);r!=null&&a(t,["promptFeedback"],r);const l=s(e,["usageMetadata"]);return l!=null&&a(t,["usageMetadata"],l),t}function gd(i,e){const t={},n=s(e,["values"]);return n!=null&&a(t,["values"],n),t}function yd(){return{}}function vd(i,e){const t={},n=s(e,["embeddings"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>gd(i,l))),a(t,["embeddings"],r)}return s(e,["metadata"])!=null&&a(t,["metadata"],yd()),t}function Cd(i,e){const t={},n=s(e,["bytesBase64Encoded"]);n!=null&&a(t,["imageBytes"],fe(i,n));const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Lo(i,e){const t={},n=s(e,["safetyAttributes","categories"]);n!=null&&a(t,["categories"],n);const o=s(e,["safetyAttributes","scores"]);o!=null&&a(t,["scores"],o);const r=s(e,["contentType"]);return r!=null&&a(t,["contentType"],r),t}function Td(i,e){const t={},n=s(e,["_self"]);n!=null&&a(t,["image"],Cd(i,n));const o=s(e,["raiFilteredReason"]);o!=null&&a(t,["raiFilteredReason"],o);const r=s(e,["_self"]);return r!=null&&a(t,["safetyAttributes"],Lo(i,r)),t}function _d(i,e){const t={},n=s(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Td(i,l))),a(t,["generatedImages"],r)}const o=s(e,["positivePromptSafetyAttributes"]);return o!=null&&a(t,["positivePromptSafetyAttributes"],Lo(i,o)),t}function xd(i,e){const t={},n=s(e,["baseModel"]);n!=null&&a(t,["baseModel"],n);const o=s(e,["createTime"]);o!=null&&a(t,["createTime"],o);const r=s(e,["updateTime"]);return r!=null&&a(t,["updateTime"],r),t}function en(i,e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const o=s(e,["displayName"]);o!=null&&a(t,["displayName"],o);const r=s(e,["description"]);r!=null&&a(t,["description"],r);const l=s(e,["version"]);l!=null&&a(t,["version"],l);const u=s(e,["_self"]);u!=null&&a(t,["tunedModelInfo"],xd(i,u));const d=s(e,["inputTokenLimit"]);d!=null&&a(t,["inputTokenLimit"],d);const c=s(e,["outputTokenLimit"]);c!=null&&a(t,["outputTokenLimit"],c);const f=s(e,["supportedGenerationMethods"]);return f!=null&&a(t,["supportedActions"],f),t}function Ed(i,e){const t={},n=s(e,["nextPageToken"]);n!=null&&a(t,["nextPageToken"],n);const o=s(e,["_self"]);if(o!=null){let r=Po(i,o);Array.isArray(r)&&(r=r.map(l=>en(i,l))),a(t,["models"],r)}return t}function Sd(){return{}}function Ad(i,e){const t={},n=s(e,["totalTokens"]);n!=null&&a(t,["totalTokens"],n);const o=s(e,["cachedContentTokenCount"]);return o!=null&&a(t,["cachedContentTokenCount"],o),t}function wd(i,e){const t={},n=s(e,["video","uri"]);n!=null&&a(t,["uri"],n);const o=s(e,["video","encodedVideo"]);o!=null&&a(t,["videoBytes"],fe(i,o));const r=s(e,["encoding"]);return r!=null&&a(t,["mimeType"],r),t}function Md(i,e){const t={},n=s(e,["_self"]);return n!=null&&a(t,["video"],wd(i,n)),t}function Id(i,e){const t={},n=s(e,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>Md(i,u))),a(t,["generatedVideos"],l)}const o=s(e,["raiMediaFilteredCount"]);o!=null&&a(t,["raiMediaFilteredCount"],o);const r=s(e,["raiMediaFilteredReasons"]);return r!=null&&a(t,["raiMediaFilteredReasons"],r),t}function Pd(i,e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const o=s(e,["metadata"]);o!=null&&a(t,["metadata"],o);const r=s(e,["done"]);r!=null&&a(t,["done"],r);const l=s(e,["error"]);l!=null&&a(t,["error"],l);const u=s(e,["response","generateVideoResponse"]);return u!=null&&a(t,["response"],Id(i,u)),t}function Rd(i,e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const o=s(e,["endOffset"]);o!=null&&a(t,["endOffset"],o);const r=s(e,["startOffset"]);return r!=null&&a(t,["startOffset"],r),t}function kd(i,e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const o=s(e,["data"]);o!=null&&a(t,["data"],o);const r=s(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function Dd(i,e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const o=s(e,["fileUri"]);o!=null&&a(t,["fileUri"],o);const r=s(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function Nd(i,e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],Rd(i,n));const o=s(e,["thought"]);o!=null&&a(t,["thought"],o);const r=s(e,["inlineData"]);r!=null&&a(t,["inlineData"],kd(i,r));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],Dd(i,l));const u=s(e,["thoughtSignature"]);u!=null&&a(t,["thoughtSignature"],u);const d=s(e,["codeExecutionResult"]);d!=null&&a(t,["codeExecutionResult"],d);const c=s(e,["executableCode"]);c!=null&&a(t,["executableCode"],c);const f=s(e,["functionCall"]);f!=null&&a(t,["functionCall"],f);const p=s(e,["functionResponse"]);p!=null&&a(t,["functionResponse"],p);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function bd(i,e){const t={},n=s(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Nd(i,l))),a(t,["parts"],r)}const o=s(e,["role"]);return o!=null&&a(t,["role"],o),t}function Vd(i,e){const t={},n=s(e,["citations"]);return n!=null&&a(t,["citations"],n),t}function $d(i,e){const t={},n=s(e,["retrievedUrl"]);n!=null&&a(t,["retrievedUrl"],n);const o=s(e,["urlRetrievalStatus"]);return o!=null&&a(t,["urlRetrievalStatus"],o),t}function Fd(i,e){const t={},n=s(e,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>$d(i,r))),a(t,["urlMetadata"],o)}return t}function Ld(i,e){const t={},n=s(e,["content"]);n!=null&&a(t,["content"],bd(i,n));const o=s(e,["citationMetadata"]);o!=null&&a(t,["citationMetadata"],Vd(i,o));const r=s(e,["finishMessage"]);r!=null&&a(t,["finishMessage"],r);const l=s(e,["finishReason"]);l!=null&&a(t,["finishReason"],l);const u=s(e,["urlContextMetadata"]);u!=null&&a(t,["urlContextMetadata"],Fd(i,u));const d=s(e,["avgLogprobs"]);d!=null&&a(t,["avgLogprobs"],d);const c=s(e,["groundingMetadata"]);c!=null&&a(t,["groundingMetadata"],c);const f=s(e,["index"]);f!=null&&a(t,["index"],f);const p=s(e,["logprobsResult"]);p!=null&&a(t,["logprobsResult"],p);const h=s(e,["safetyRatings"]);return h!=null&&a(t,["safetyRatings"],h),t}function zi(i,e){const t={},n=s(e,["candidates"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>Ld(i,f))),a(t,["candidates"],c)}const o=s(e,["createTime"]);o!=null&&a(t,["createTime"],o);const r=s(e,["responseId"]);r!=null&&a(t,["responseId"],r);const l=s(e,["modelVersion"]);l!=null&&a(t,["modelVersion"],l);const u=s(e,["promptFeedback"]);u!=null&&a(t,["promptFeedback"],u);const d=s(e,["usageMetadata"]);return d!=null&&a(t,["usageMetadata"],d),t}function Ud(i,e){const t={},n=s(e,["truncated"]);n!=null&&a(t,["truncated"],n);const o=s(e,["token_count"]);return o!=null&&a(t,["tokenCount"],o),t}function Bd(i,e){const t={},n=s(e,["values"]);n!=null&&a(t,["values"],n);const o=s(e,["statistics"]);return o!=null&&a(t,["statistics"],Ud(i,o)),t}function Gd(i,e){const t={},n=s(e,["billableCharacterCount"]);return n!=null&&a(t,["billableCharacterCount"],n),t}function qd(i,e){const t={},n=s(e,["predictions[]","embeddings"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Bd(i,l))),a(t,["embeddings"],r)}const o=s(e,["metadata"]);return o!=null&&a(t,["metadata"],Gd(i,o)),t}function Od(i,e){const t={},n=s(e,["gcsUri"]);n!=null&&a(t,["gcsUri"],n);const o=s(e,["bytesBase64Encoded"]);o!=null&&a(t,["imageBytes"],fe(i,o));const r=s(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function Uo(i,e){const t={},n=s(e,["safetyAttributes","categories"]);n!=null&&a(t,["categories"],n);const o=s(e,["safetyAttributes","scores"]);o!=null&&a(t,["scores"],o);const r=s(e,["contentType"]);return r!=null&&a(t,["contentType"],r),t}function fn(i,e){const t={},n=s(e,["_self"]);n!=null&&a(t,["image"],Od(i,n));const o=s(e,["raiFilteredReason"]);o!=null&&a(t,["raiFilteredReason"],o);const r=s(e,["_self"]);r!=null&&a(t,["safetyAttributes"],Uo(i,r));const l=s(e,["prompt"]);return l!=null&&a(t,["enhancedPrompt"],l),t}function Hd(i,e){const t={},n=s(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>fn(i,l))),a(t,["generatedImages"],r)}const o=s(e,["positivePromptSafetyAttributes"]);return o!=null&&a(t,["positivePromptSafetyAttributes"],Uo(i,o)),t}function Jd(i,e){const t={},n=s(e,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>fn(i,r))),a(t,["generatedImages"],o)}return t}function Wd(i,e){const t={},n=s(e,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>fn(i,r))),a(t,["generatedImages"],o)}return t}function zd(i,e){const t={},n=s(e,["endpoint"]);n!=null&&a(t,["name"],n);const o=s(e,["deployedModelId"]);return o!=null&&a(t,["deployedModelId"],o),t}function Yd(i,e){const t={},n=s(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&a(t,["baseModel"],n);const o=s(e,["createTime"]);o!=null&&a(t,["createTime"],o);const r=s(e,["updateTime"]);return r!=null&&a(t,["updateTime"],r),t}function Zd(i,e){const t={},n=s(e,["checkpointId"]);n!=null&&a(t,["checkpointId"],n);const o=s(e,["epoch"]);o!=null&&a(t,["epoch"],o);const r=s(e,["step"]);return r!=null&&a(t,["step"],r),t}function tn(i,e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const o=s(e,["displayName"]);o!=null&&a(t,["displayName"],o);const r=s(e,["description"]);r!=null&&a(t,["description"],r);const l=s(e,["versionId"]);l!=null&&a(t,["version"],l);const u=s(e,["deployedModels"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(m=>zd(i,m))),a(t,["endpoints"],h)}const d=s(e,["labels"]);d!=null&&a(t,["labels"],d);const c=s(e,["_self"]);c!=null&&a(t,["tunedModelInfo"],Yd(i,c));const f=s(e,["defaultCheckpointId"]);f!=null&&a(t,["defaultCheckpointId"],f);const p=s(e,["checkpoints"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(m=>Zd(i,m))),a(t,["checkpoints"],h)}return t}function Kd(i,e){const t={},n=s(e,["nextPageToken"]);n!=null&&a(t,["nextPageToken"],n);const o=s(e,["_self"]);if(o!=null){let r=Po(i,o);Array.isArray(r)&&(r=r.map(l=>tn(i,l))),a(t,["models"],r)}return t}function Xd(){return{}}function Qd(i,e){const t={},n=s(e,["totalTokens"]);return n!=null&&a(t,["totalTokens"],n),t}function jd(i,e){const t={},n=s(e,["tokensInfo"]);return n!=null&&a(t,["tokensInfo"],n),t}function ef(i,e){const t={},n=s(e,["gcsUri"]);n!=null&&a(t,["uri"],n);const o=s(e,["bytesBase64Encoded"]);o!=null&&a(t,["videoBytes"],fe(i,o));const r=s(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function tf(i,e){const t={},n=s(e,["_self"]);return n!=null&&a(t,["video"],ef(i,n)),t}function nf(i,e){const t={},n=s(e,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>tf(i,u))),a(t,["generatedVideos"],l)}const o=s(e,["raiMediaFilteredCount"]);o!=null&&a(t,["raiMediaFilteredCount"],o);const r=s(e,["raiMediaFilteredReasons"]);return r!=null&&a(t,["raiMediaFilteredReasons"],r),t}function of(i,e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const o=s(e,["metadata"]);o!=null&&a(t,["metadata"],o);const r=s(e,["done"]);r!=null&&a(t,["done"],r);const l=s(e,["error"]);l!=null&&a(t,["error"],l);const u=s(e,["response"]);return u!=null&&a(t,["response"],nf(i,u)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sf="Content-Type",rf="X-Server-Timeout",af="User-Agent",nn="x-goog-api-client",lf="1.5.1",uf=`google-genai-sdk/${lf}`,cf="v1beta1",df="v1beta",Yi=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Bo extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class on extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class ff{constructor(e){var t,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:cf,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:df,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,n){const o=[this.getRequestUrlInternal(t)];return n&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,n);if(e.queryParams)for(const[l,u]of Object.entries(e.queryParams))o.searchParams.append(l,String(u));let r={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,t,e.abortSignal),this.unaryApiCall(o,r,e.httpMethod)}patchHttpOptions(e,t){const n=JSON.parse(JSON.stringify(e));for(const[o,r]of Object.entries(t))typeof r=="object"?n[o]=Object.assign(Object.assign({},n[o]),r):r!==void 0&&(n[o]=r);return n}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,n);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let r={};return r.body=e.body,r=await this.includeExtraHttpOptionsToRequestInit(r,t,e.abortSignal),this.streamApiCall(o,r,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,n){if(t&&t.timeout||n){const o=new AbortController,r=o.signal;t.timeout&&(t==null?void 0:t.timeout)>0&&setTimeout(()=>o.abort(),t.timeout),n&&n.addEventListener("abort",()=>{o.abort()}),e.signal=r}return e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async o=>(await Zi(o),new Kt(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async o=>(await Zi(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return $e(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),r=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let l="";for(;;){const{done:u,value:d}=yield B(o.read());if(u){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=r.decode(d);try{const p=JSON.parse(c);if("error"in p){const h=JSON.parse(JSON.stringify(p.error)),m=h.status,g=h.code,y=`got status: ${m}. ${JSON.stringify(p)}`;if(g>=400&&g<500)throw new Bo(y);if(g>=500&&g<600)throw new on(y)}}catch(p){const h=p;if(h.name==="ClientError"||h.name==="ServerError")throw p}l+=c;let f=l.match(Yi);for(;f;){const p=f[1];try{const h=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield B(new Kt(h)),l=l.slice(f[0].length),f=l.match(Yi)}catch(h){throw new Error(`exception parsing stream chunk ${p}. ${h}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const e={},t=uf+" "+this.clientOptions.userAgentExtra;return e[af]=t,e[nn]=t,e[sf]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[n,o]of Object.entries(e.headers))t.append(n,o);e.timeout&&e.timeout>0&&t.append(rf,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var n;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const r=this.clientOptions.uploader,l=await r.stat(e);o.sizeBytes=String(l.size);const u=(n=t==null?void 0:t.mimeType)!==null&&n!==void 0?n:l.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=u;const d=await this.fetchUploadUrl(o,t);return r.upload(e,d,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var n;let o={};t!=null&&t.httpOptions?o=t.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const r={file:e},l=await this.request({path:E("upload/v1beta/files",r._url),body:JSON.stringify(r),httpMethod:"POST",httpOptions:o});if(!l||!(l!=null&&l.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(n=l==null?void 0:l.headers)===null||n===void 0?void 0:n["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function Zi(i){var e;if(i===void 0)throw new on("response is undefined");if(!i.ok){const t=i.status,n=i.statusText;let o;!((e=i.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await i.json():o={error:{message:await i.text(),code:i.status,status:i.statusText}};const r=`got status: ${t} ${n}. ${JSON.stringify(o)}`;throw t>=400&&t<500?new Bo(r):t>=500&&t<600?new on(r):new Error(r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pf="mcp_used/unknown";function Go(i){for(const e of i)if(pn(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function qo(i){var e;const t=(e=i[nn])!==null&&e!==void 0?e:"";i[nn]=(t+` ${pf}`).trimStart()}function hf(i){var e,t,n;return(n=(t=(e=i.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>pn(o)))!==null&&n!==void 0?n:!1}function mf(i){var e,t,n;return(n=(t=(e=i.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>!pn(o)))!==null&&n!==void 0?n:!1}function pn(i){return i!==null&&typeof i=="object"&&i instanceof hn}function gf(i,e=100){return $e(this,arguments,function*(){let n,o=0;for(;o<e;){const r=yield B(i.listTools({cursor:n}));for(const l of r.tools)yield yield B(l),o++;if(!r.nextCursor)break;n=r.nextCursor}})}class hn{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new hn(e,t)}async initialize(){var e,t,n,o;if(this.mcpTools.length>0)return;const r={},l=[];for(const f of this.mcpClients)try{for(var u=!0,d=(t=void 0,et(gf(f))),c;c=await d.next(),e=c.done,!e;u=!0){o=c.value,u=!1;const p=o;l.push(p);const h=p.name;if(r[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);r[h]=f}}catch(p){t={error:p}}finally{try{!u&&!e&&(n=d.return)&&await n.call(d)}finally{if(t)throw t.error}}this.mcpTools=l,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),gr(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[n.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const l=await o.callTool({name:n.name,arguments:n.args},void 0,r);t.push({functionResponse:{name:n.name,response:l.isError?{error:l}:l}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function yf(i,e,t){const n=new ir;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data);const r=Au(i,o);Object.assign(n,r),e(n)}class vf{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n}async connect(e){var t,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),l=_f(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${o}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${u}`;let c=()=>{};const f=new Promise(P=>{c=P}),p=e.callbacks,h=function(){c({})},m=this.apiClient,g={onopen:h,onmessage:P=>{yf(m,p.onmessage,P)},onerror:(t=p==null?void 0:p.onerror)!==null&&t!==void 0?t:function(P){},onclose:(n=p==null?void 0:p.onclose)!==null&&n!==void 0?n:function(P){}},y=this.webSocketFactory.create(d,Tf(l),g);y.connect(),await f;const _=U(this.apiClient,e.model),S=bo(this.apiClient,{model:_}),I=jt(this.apiClient,{setup:S});return y.send(JSON.stringify(I)),new Cf(y,this.apiClient)}}class Cf{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=Ul(this.apiClient,e),n=Vo(this.apiClient,t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=Bl(this.apiClient,e),n=jt(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const t=jt(this.apiClient,{playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(be.PLAY)}pause(){this.sendPlaybackControl(be.PAUSE)}stop(){this.sendPlaybackControl(be.STOP)}resetContext(){this.sendPlaybackControl(be.RESET_CONTEXT)}close(){this.conn.close()}}function Tf(i){const e={};return i.forEach((t,n)=>{e[n]=t}),e}function _f(i){const e=new Headers;for(const[t,n]of Object.entries(i))e.append(t,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xf="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Ef(i,e,t){const n=new nr;let o;if(t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),i.isVertexAI()){const r=gu(i,o);Object.assign(n,r)}else{const r=mu(i,o);Object.assign(n,r)}e(n)}class Sf{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n,this.music=new vf(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,n,o,r,l,u;const d=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let f;const p=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&Go(e.config.tools)&&qo(p);const h=If(p);if(this.apiClient.isVertexAI())f=`${d}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h);else{const k=this.apiClient.getApiKey();let F="BidiGenerateContent",Z="key";k!=null&&k.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),F="BidiGenerateContentConstrained",Z="access_token"),f=`${d}/ws/google.ai.generativelanguage.${c}.GenerativeService.${F}?${Z}=${k}`}let m=()=>{};const g=new Promise(k=>{m=k}),y=e.callbacks,_=function(){var k;(k=y==null?void 0:y.onopen)===null||k===void 0||k.call(y),m({})},S=this.apiClient,I={onopen:_,onmessage:k=>{Ef(S,y.onmessage,k)},onerror:(t=y==null?void 0:y.onerror)!==null&&t!==void 0?t:function(k){},onclose:(n=y==null?void 0:y.onclose)!==null&&n!==void 0?n:function(k){}},P=this.webSocketFactory.create(f,Mf(h),I);P.connect(),await g;let D=U(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&D.startsWith("publishers/")){const k=this.apiClient.getProject(),F=this.apiClient.getLocation();D=`projects/${k}/locations/${F}/`+D}let N={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Et.AUDIO]}:e.config.responseModalities=[Et.AUDIO]),!((r=e.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const V=(u=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[],L=[];for(const k of V)if(this.isCallableTool(k)){const F=k;L.push(await F.tool())}else L.push(k);L.length>0&&(e.config.tools=L);const H={model:D,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?N=Dl(this.apiClient,H):N=kl(this.apiClient,H),delete N.config,P.send(JSON.stringify(N)),new wf(P,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Af={turnComplete:!0};class wf{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let n=[];try{n=ee(e,t.turns),e.isVertexAI()?n=n.map(o=>We(e,o)):n=n.map(o=>kt(e,o))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:n,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let n=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?n=t.functionResponses:n=[t.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const r of n){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!e.isVertexAI()&&!("id"in r))throw new Error(xf)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},Af),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:Ll(this.apiClient,e)}:t={realtimeInput:Fl(this.apiClient,e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function Mf(i){const e={};return i.forEach((t,n)=>{e[n]=t}),e}function If(i){const e=new Headers;for(const[t,n]of Object.entries(i))e.append(t,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ki=10;function Xi(i){var e,t,n;if(!((e=i==null?void 0:i.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const l of(t=i==null?void 0:i.tools)!==null&&t!==void 0?t:[])if(ht(l)){o=!0;break}if(!o)return!0;const r=(n=i==null?void 0:i.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function ht(i){return"callTool"in i&&typeof i.callTool=="function"}function Qi(i){var e;return!(!((e=i==null?void 0:i.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pf extends Je{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var n,o,r,l,u;const d=await this.processParamsForMcpUsage(t);if(!hf(t)||Xi(t.config))return await this.generateContentInternal(d);if(mf(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,f;const p=ee(this.apiClient,d.contents),h=(r=(o=(n=d.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:Ki;let m=0;for(;m<h&&(c=await this.generateContentInternal(d),!(!c.functionCalls||c.functionCalls.length===0));){const g=c.candidates[0].content,y=[];for(const _ of(u=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[])if(ht(_)){const I=await _.callTool(c.functionCalls);y.push(...I)}m++,f={role:"user",parts:y},d.contents=ee(this.apiClient,d.contents),d.contents.push(g),d.contents.push(f),Qi(d.config)&&(p.push(g),p.push(f))}return Qi(d.config)&&(c.automaticFunctionCallingHistory=p),c},this.generateContentStream=async t=>{if(Xi(t.config)){const n=await this.processParamsForMcpUsage(t);return await this.generateContentStreamInternal(n)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(n=>{var o;let r;const l=[];if(n!=null&&n.generatedImages)for(const d of n.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((o=d==null?void 0:d.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?r=d==null?void 0:d.safetyAttributes:l.push(d);let u;return r?u={generatedImages:l,positivePromptSafetyAttributes:r}:u={generatedImages:l},u}),this.list=async t=>{var n;const l={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((n=l.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Rt(Oe.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(l),l)},this.editImage=async t=>{const n={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(n.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async t=>{let n={numberOfImages:1,mode:"upscale"};t.config&&(n=Object.assign(Object.assign({},n),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:n};return await this.upscaleImageInternal(o)}}async processParamsForMcpUsage(e){var t,n,o;const r=(t=e.config)===null||t===void 0?void 0:t.tools;if(!r)return e;const l=await Promise.all(r.map(async d=>ht(d)?await d.tool():d)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(u.config.tools=l,e.config&&e.config.tools&&Go(e.config.tools)){const d=(o=(n=e.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&o!==void 0?o:{};let c=Object.assign({},d);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),qo(c),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return u}async initAfcToolsMap(e){var t,n,o;const r=new Map;for(const l of(n=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&n!==void 0?n:[])if(ht(l)){const u=l,d=await u.tool();for(const c of(o=d.functionDeclarations)!==null&&o!==void 0?o:[]){if(!c.name)throw new Error("Function declaration name is required.");if(r.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);r.set(c.name,u)}}return r}async processAfcStream(e){var t,n,o;const r=(o=(n=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&o!==void 0?o:Ki;let l=!1,u=0;const d=await this.initAfcToolsMap(e);return function(c,f,p){var h,m;return $e(this,arguments,function*(){for(var g,y,_,S;u<r;){l&&(u++,l=!1);const N=yield B(c.processParamsForMcpUsage(p)),V=yield B(c.generateContentStreamInternal(N)),L=[],H=[];try{for(var I=!0,P=(y=void 0,et(V)),D;D=yield B(P.next()),g=D.done,!g;I=!0){S=D.value,I=!1;const k=S;if(yield yield B(k),k.candidates&&(!((h=k.candidates[0])===null||h===void 0)&&h.content)){H.push(k.candidates[0].content);for(const F of(m=k.candidates[0].content.parts)!==null&&m!==void 0?m:[])if(u<r&&F.functionCall){if(!F.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(F.functionCall.name)){const Z=yield B(f.get(F.functionCall.name).callTool([F.functionCall]));L.push(...Z)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${F.functionCall.name}`)}}}}catch(k){y={error:k}}finally{try{!I&&!g&&(_=P.return)&&(yield B(_.call(P)))}finally{if(y)throw y.error}}if(L.length>0){l=!0;const k=new Ye;k.candidates=[{content:{role:"user",parts:L}}],yield yield B(k);const F=[];F.push(...H),F.push({role:"user",parts:L});const Z=ee(c.apiClient,p.contents).concat(F);p.contents=Z}else break}})}(this,d,e)}async generateContentInternal(e){var t,n,o,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Ji(this.apiClient,e);return u=E("{model}:generateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const p=zi(this.apiClient,f),h=new Ye;return Object.assign(h,p),h})}else{const c=Hi(this.apiClient,e);return u=E("{model}:generateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Wi(this.apiClient,f),h=new Ye;return Object.assign(h,p),h})}}async generateContentStreamInternal(e){var t,n,o,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Ji(this.apiClient,e);u=E("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c.config,delete c._url,delete c._query;const f=this.apiClient;return l=f.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),l.then(function(p){return $e(this,arguments,function*(){var h,m,g,y;try{for(var _=!0,S=et(p),I;I=yield B(S.next()),h=I.done,!h;_=!0){y=I.value,_=!1;const D=zi(f,yield B(y.json())),N=new Ye;Object.assign(N,D),yield yield B(N)}}catch(P){m={error:P}}finally{try{!_&&!h&&(g=S.return)&&(yield B(g.call(S)))}finally{if(m)throw m.error}}})})}else{const c=Hi(this.apiClient,e);u=E("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c.config,delete c._url,delete c._query;const f=this.apiClient;return l=f.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),l.then(function(p){return $e(this,arguments,function*(){var h,m,g,y;try{for(var _=!0,S=et(p),I;I=yield B(S.next()),h=I.done,!h;_=!0){y=I.value,_=!1;const D=Wi(f,yield B(y.json())),N=new Ye;Object.assign(N,D),yield yield B(N)}}catch(P){m={error:P}}finally{try{!_&&!h&&(g=S.return)&&(yield B(g.call(S)))}finally{if(m)throw m.error}}})})}}async embedContent(e){var t,n,o,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Fc(this.apiClient,e);return u=E("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const p=qd(this.apiClient,f),h=new Si;return Object.assign(h,p),h})}else{const c=Ku(this.apiClient,e);return u=E("{model}:batchEmbedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>{const p=vd(this.apiClient,f),h=new Si;return Object.assign(h,p),h})}}async generateImagesInternal(e){var t,n,o,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Uc(this.apiClient,e);return u=E("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Hd(this.apiClient,f),h=new Ai;return Object.assign(h,p),h})}else{const c=Qu(this.apiClient,e);return u=E("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>{const p=_d(this.apiClient,f),h=new Ai;return Object.assign(h,p),h})}}async editImageInternal(e){var t,n;let o,r="",l={};if(this.apiClient.isVertexAI()){const u=Wc(this.apiClient,e);return r=E("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>{const c=Jd(this.apiClient,d),f=new Ks;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,n;let o,r="",l={};if(this.apiClient.isVertexAI()){const u=Yc(this.apiClient,e);return r=E("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>{const c=Wd(this.apiClient,d),f=new Xs;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,n,o,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Zc(this.apiClient,e);return u=E("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>tn(this.apiClient,f))}else{const c=ju(this.apiClient,e);return u=E("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>en(this.apiClient,f))}}async listInternal(e){var t,n,o,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Xc(this.apiClient,e);return u=E("{models_url}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Kd(this.apiClient,f),h=new wi;return Object.assign(h,p),h})}else{const c=tc(this.apiClient,e);return u=E("{models_url}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Ed(this.apiClient,f),h=new wi;return Object.assign(h,p),h})}}async update(e){var t,n,o,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=jc(this.apiClient,e);return u=E("{model}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>tn(this.apiClient,f))}else{const c=ic(this.apiClient,e);return u=E("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>en(this.apiClient,f))}}async delete(e){var t,n,o,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=ed(this.apiClient,e);return u=E("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(()=>{const f=Xd(),p=new Mi;return Object.assign(p,f),p})}else{const c=oc(this.apiClient,e);return u=E("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(()=>{const f=Sd(),p=new Mi;return Object.assign(p,f),p})}}async countTokens(e){var t,n,o,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=nd(this.apiClient,e);return u=E("{model}:countTokens",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Qd(this.apiClient,f),h=new Ii;return Object.assign(h,p),h})}else{const c=rc(this.apiClient,e);return u=E("{model}:countTokens",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Ad(this.apiClient,f),h=new Ii;return Object.assign(h,p),h})}}async computeTokens(e){var t,n;let o,r="",l={};if(this.apiClient.isVertexAI()){const u=id(this.apiClient,e);return r=E("{model}:computeTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>{const c=jd(this.apiClient,d),f=new Qs;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,n,o,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=rd(this.apiClient,e);return u=E("{model}:predictLongRunning",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>of(this.apiClient,f))}else{const c=uc(this.apiClient,e);return u=E("{model}:predictLongRunning",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>Pd(this.apiClient,f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rf(i,e){const t={},n=s(e,["operationName"]);n!=null&&a(t,["_url","operationName"],n);const o=s(e,["config"]);return o!=null&&a(t,["config"],o),t}function kf(i,e){const t={},n=s(e,["operationName"]);n!=null&&a(t,["_url","operationName"],n);const o=s(e,["config"]);return o!=null&&a(t,["config"],o),t}function Df(i,e){const t={},n=s(e,["operationName"]);n!=null&&a(t,["operationName"],n);const o=s(e,["resourceName"]);o!=null&&a(t,["_url","resourceName"],o);const r=s(e,["config"]);return r!=null&&a(t,["config"],r),t}function Nf(i,e){const t={},n=s(e,["video","uri"]);n!=null&&a(t,["uri"],n);const o=s(e,["video","encodedVideo"]);o!=null&&a(t,["videoBytes"],fe(i,o));const r=s(e,["encoding"]);return r!=null&&a(t,["mimeType"],r),t}function bf(i,e){const t={},n=s(e,["_self"]);return n!=null&&a(t,["video"],Nf(i,n)),t}function Vf(i,e){const t={},n=s(e,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>bf(i,u))),a(t,["generatedVideos"],l)}const o=s(e,["raiMediaFilteredCount"]);o!=null&&a(t,["raiMediaFilteredCount"],o);const r=s(e,["raiMediaFilteredReasons"]);return r!=null&&a(t,["raiMediaFilteredReasons"],r),t}function $f(i,e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const o=s(e,["metadata"]);o!=null&&a(t,["metadata"],o);const r=s(e,["done"]);r!=null&&a(t,["done"],r);const l=s(e,["error"]);l!=null&&a(t,["error"],l);const u=s(e,["response","generateVideoResponse"]);return u!=null&&a(t,["response"],Vf(i,u)),t}function Ff(i,e){const t={},n=s(e,["gcsUri"]);n!=null&&a(t,["uri"],n);const o=s(e,["bytesBase64Encoded"]);o!=null&&a(t,["videoBytes"],fe(i,o));const r=s(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function Lf(i,e){const t={},n=s(e,["_self"]);return n!=null&&a(t,["video"],Ff(i,n)),t}function Uf(i,e){const t={},n=s(e,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>Lf(i,u))),a(t,["generatedVideos"],l)}const o=s(e,["raiMediaFilteredCount"]);o!=null&&a(t,["raiMediaFilteredCount"],o);const r=s(e,["raiMediaFilteredReasons"]);return r!=null&&a(t,["raiMediaFilteredReasons"],r),t}function ji(i,e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const o=s(e,["metadata"]);o!=null&&a(t,["metadata"],o);const r=s(e,["done"]);r!=null&&a(t,["done"],r);const l=s(e,["error"]);l!=null&&a(t,["error"],l);const u=s(e,["response"]);return u!=null&&a(t,["response"],Uf(i,u)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bf extends Je{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,n=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let r;return n&&"httpOptions"in n&&(r=n.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:r}})}else return this.getVideosOperationInternal({operationName:t.name,config:n})}async getVideosOperationInternal(e){var t,n,o,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=kf(this.apiClient,e);return u=E("{operationName}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>ji(this.apiClient,f))}else{const c=Rf(this.apiClient,e);return u=E("{operationName}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>$f(this.apiClient,f))}}async fetchPredictVideosOperationInternal(e){var t,n;let o,r="",l={};if(this.apiClient.isVertexAI()){const u=Df(this.apiClient,e);return r=E("{resourceName}:fetchPredictOperation",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>ji(this.apiClient,d))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gf(i,e){const t={},n=s(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function Oo(i,e){const t={},n=s(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],Gf(i,n)),t}function qf(i,e){const t={},n=s(e,["speaker"]);n!=null&&a(t,["speaker"],n);const o=s(e,["voiceConfig"]);return o!=null&&a(t,["voiceConfig"],Oo(i,o)),t}function Of(i,e){const t={},n=s(e,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>qf(i,r))),a(t,["speakerVoiceConfigs"],o)}return t}function Hf(i,e){const t={},n=s(e,["voiceConfig"]);n!=null&&a(t,["voiceConfig"],Oo(i,n));const o=s(e,["multiSpeakerVoiceConfig"]);o!=null&&a(t,["multiSpeakerVoiceConfig"],Of(i,o));const r=s(e,["languageCode"]);return r!=null&&a(t,["languageCode"],r),t}function Jf(i,e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const o=s(e,["endOffset"]);o!=null&&a(t,["endOffset"],o);const r=s(e,["startOffset"]);return r!=null&&a(t,["startOffset"],r),t}function Wf(i,e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["data"]);n!=null&&a(t,["data"],n);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function zf(i,e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Yf(i,e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],Jf(i,n));const o=s(e,["thought"]);o!=null&&a(t,["thought"],o);const r=s(e,["inlineData"]);r!=null&&a(t,["inlineData"],Wf(i,r));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],zf(i,l));const u=s(e,["thoughtSignature"]);u!=null&&a(t,["thoughtSignature"],u);const d=s(e,["codeExecutionResult"]);d!=null&&a(t,["codeExecutionResult"],d);const c=s(e,["executableCode"]);c!=null&&a(t,["executableCode"],c);const f=s(e,["functionCall"]);f!=null&&a(t,["functionCall"],f);const p=s(e,["functionResponse"]);p!=null&&a(t,["functionResponse"],p);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function Zf(i,e){const t={},n=s(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Yf(i,l))),a(t,["parts"],r)}const o=s(e,["role"]);return o!=null&&a(t,["role"],o),t}function Kf(i,e){const t={},n=s(e,["behavior"]);n!=null&&a(t,["behavior"],n);const o=s(e,["description"]);o!=null&&a(t,["description"],o);const r=s(e,["name"]);r!=null&&a(t,["name"],r);const l=s(e,["parameters"]);l!=null&&a(t,["parameters"],l);const u=s(e,["response"]);return u!=null&&a(t,["response"],u),t}function Xf(i,e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const o=s(e,["endTime"]);return o!=null&&a(t,["endTime"],o),t}function Qf(i,e){const t={},n=s(e,["timeRangeFilter"]);return n!=null&&a(t,["timeRangeFilter"],Xf(i,n)),t}function jf(i,e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const o=s(e,["dynamicThreshold"]);return o!=null&&a(t,["dynamicThreshold"],o),t}function ep(i,e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],jf(i,n)),t}function tp(){return{}}function np(i,e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>Kf(i,c))),a(t,["functionDeclarations"],d)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=s(e,["googleSearch"]);o!=null&&a(t,["googleSearch"],Qf(i,o));const r=s(e,["googleSearchRetrieval"]);if(r!=null&&a(t,["googleSearchRetrieval"],ep(i,r)),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(e,["urlContext"])!=null&&a(t,["urlContext"],tp());const u=s(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function ip(i,e){const t={},n=s(e,["handle"]);if(n!=null&&a(t,["handle"],n),s(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function eo(){return{}}function op(i,e){const t={},n=s(e,["disabled"]);n!=null&&a(t,["disabled"],n);const o=s(e,["startOfSpeechSensitivity"]);o!=null&&a(t,["startOfSpeechSensitivity"],o);const r=s(e,["endOfSpeechSensitivity"]);r!=null&&a(t,["endOfSpeechSensitivity"],r);const l=s(e,["prefixPaddingMs"]);l!=null&&a(t,["prefixPaddingMs"],l);const u=s(e,["silenceDurationMs"]);return u!=null&&a(t,["silenceDurationMs"],u),t}function sp(i,e){const t={},n=s(e,["automaticActivityDetection"]);n!=null&&a(t,["automaticActivityDetection"],op(i,n));const o=s(e,["activityHandling"]);o!=null&&a(t,["activityHandling"],o);const r=s(e,["turnCoverage"]);return r!=null&&a(t,["turnCoverage"],r),t}function rp(i,e){const t={},n=s(e,["targetTokens"]);return n!=null&&a(t,["targetTokens"],n),t}function ap(i,e){const t={},n=s(e,["triggerTokens"]);n!=null&&a(t,["triggerTokens"],n);const o=s(e,["slidingWindow"]);return o!=null&&a(t,["slidingWindow"],rp(i,o)),t}function lp(i,e){const t={},n=s(e,["proactiveAudio"]);return n!=null&&a(t,["proactiveAudio"],n),t}function up(i,e,t){const n={},o=s(e,["generationConfig"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig"],o);const r=s(e,["responseModalities"]);t!==void 0&&r!=null&&a(t,["setup","generationConfig","responseModalities"],r);const l=s(e,["temperature"]);t!==void 0&&l!=null&&a(t,["setup","generationConfig","temperature"],l);const u=s(e,["topP"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topP"],u);const d=s(e,["topK"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","topK"],d);const c=s(e,["maxOutputTokens"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","maxOutputTokens"],c);const f=s(e,["mediaResolution"]);t!==void 0&&f!=null&&a(t,["setup","generationConfig","mediaResolution"],f);const p=s(e,["seed"]);t!==void 0&&p!=null&&a(t,["setup","generationConfig","seed"],p);const h=s(e,["speechConfig"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","speechConfig"],Hf(i,dn(i,h)));const m=s(e,["enableAffectiveDialog"]);t!==void 0&&m!=null&&a(t,["setup","generationConfig","enableAffectiveDialog"],m);const g=s(e,["systemInstruction"]);t!==void 0&&g!=null&&a(t,["setup","systemInstruction"],Zf(i,W(i,g)));const y=s(e,["tools"]);if(t!==void 0&&y!=null){let V=lt(i,y);Array.isArray(V)&&(V=V.map(L=>np(i,at(i,L)))),a(t,["setup","tools"],V)}const _=s(e,["sessionResumption"]);t!==void 0&&_!=null&&a(t,["setup","sessionResumption"],ip(i,_));const S=s(e,["inputAudioTranscription"]);t!==void 0&&S!=null&&a(t,["setup","inputAudioTranscription"],eo());const I=s(e,["outputAudioTranscription"]);t!==void 0&&I!=null&&a(t,["setup","outputAudioTranscription"],eo());const P=s(e,["realtimeInputConfig"]);t!==void 0&&P!=null&&a(t,["setup","realtimeInputConfig"],sp(i,P));const D=s(e,["contextWindowCompression"]);t!==void 0&&D!=null&&a(t,["setup","contextWindowCompression"],ap(i,D));const N=s(e,["proactivity"]);return t!==void 0&&N!=null&&a(t,["setup","proactivity"],lp(i,N)),n}function cp(i,e){const t={},n=s(e,["model"]);n!=null&&a(t,["setup","model"],U(i,n));const o=s(e,["config"]);return o!=null&&a(t,["config"],up(i,o,t)),t}function dp(i,e,t){const n={},o=s(e,["expireTime"]);t!==void 0&&o!=null&&a(t,["expireTime"],o);const r=s(e,["newSessionExpireTime"]);t!==void 0&&r!=null&&a(t,["newSessionExpireTime"],r);const l=s(e,["uses"]);t!==void 0&&l!=null&&a(t,["uses"],l);const u=s(e,["liveConnectConstraints"]);t!==void 0&&u!=null&&a(t,["bidiGenerateContentSetup"],cp(i,u));const d=s(e,["lockAdditionalFields"]);return t!==void 0&&d!=null&&a(t,["fieldMask"],d),n}function fp(i,e){const t={},n=s(e,["config"]);return n!=null&&a(t,["config"],dp(i,n,t)),t}function pp(i,e){const t={},n=s(e,["name"]);return n!=null&&a(t,["name"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hp(i){const e=[];for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)){const n=i[t];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const o=Object.keys(n).map(r=>`${t}.${r}`);e.push(...o)}else e.push(t)}return e.join(",")}function mp(i,e){let t=null;const n=i.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const r=n.setup;typeof r=="object"&&r!==null?(i.bidiGenerateContentSetup=r,t=r):delete i.bidiGenerateContentSetup}else n!==void 0&&delete i.bidiGenerateContentSetup;const o=i.fieldMask;if(t){const r=hp(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)r?i.fieldMask=r:delete i.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];o.length>0&&(u=o.map(c=>l.includes(c)?`generationConfig.${c}`:c));const d=[];r&&d.push(r),u.length>0&&d.push(...u),d.length>0?i.fieldMask=d.join(","):delete i.fieldMask}else delete i.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?i.fieldMask=o.join(","):delete i.fieldMask;return i}class gp extends Je{constructor(e){super(),this.apiClient=e}async create(e){var t,n;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=fp(this.apiClient,e);r=E("auth_tokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query;const d=mp(u,e.config);return o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),o.then(c=>pp(this.apiClient,c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yp(i,e){const t={},n=s(e,["name"]);n!=null&&a(t,["_url","name"],n);const o=s(e,["config"]);return o!=null&&a(t,["config"],o),t}function vp(i,e,t){const n={},o=s(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const r=s(e,["pageToken"]);t!==void 0&&r!=null&&a(t,["_query","pageToken"],r);const l=s(e,["filter"]);return t!==void 0&&l!=null&&a(t,["_query","filter"],l),n}function Cp(i,e){const t={},n=s(e,["config"]);return n!=null&&a(t,["config"],vp(i,n,t)),t}function Tp(i,e){const t={},n=s(e,["textInput"]);n!=null&&a(t,["textInput"],n);const o=s(e,["output"]);return o!=null&&a(t,["output"],o),t}function _p(i,e){const t={};if(s(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=s(e,["examples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Tp(i,r))),a(t,["examples","examples"],o)}return t}function xp(i,e,t){const n={};if(s(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=s(e,["tunedModelDisplayName"]);if(t!==void 0&&o!=null&&a(t,["displayName"],o),s(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=s(e,["epochCount"]);t!==void 0&&r!=null&&a(t,["tuningTask","hyperparameters","epochCount"],r);const l=s(e,["learningRateMultiplier"]);if(l!=null&&a(n,["tuningTask","hyperparameters","learningRateMultiplier"],l),s(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(s(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=s(e,["batchSize"]);t!==void 0&&u!=null&&a(t,["tuningTask","hyperparameters","batchSize"],u);const d=s(e,["learningRate"]);return t!==void 0&&d!=null&&a(t,["tuningTask","hyperparameters","learningRate"],d),n}function Ep(i,e){const t={},n=s(e,["baseModel"]);n!=null&&a(t,["baseModel"],n);const o=s(e,["trainingDataset"]);o!=null&&a(t,["tuningTask","trainingData"],_p(i,o));const r=s(e,["config"]);return r!=null&&a(t,["config"],xp(i,r,t)),t}function Sp(i,e){const t={},n=s(e,["name"]);n!=null&&a(t,["_url","name"],n);const o=s(e,["config"]);return o!=null&&a(t,["config"],o),t}function Ap(i,e,t){const n={},o=s(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const r=s(e,["pageToken"]);t!==void 0&&r!=null&&a(t,["_query","pageToken"],r);const l=s(e,["filter"]);return t!==void 0&&l!=null&&a(t,["_query","filter"],l),n}function wp(i,e){const t={},n=s(e,["config"]);return n!=null&&a(t,["config"],Ap(i,n,t)),t}function Mp(i,e,t){const n={},o=s(e,["gcsUri"]);if(t!==void 0&&o!=null&&a(t,["supervisedTuningSpec","trainingDatasetUri"],o),s(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function Ip(i,e){const t={},n=s(e,["gcsUri"]);return n!=null&&a(t,["validationDatasetUri"],n),t}function Pp(i,e,t){const n={},o=s(e,["validationDataset"]);t!==void 0&&o!=null&&a(t,["supervisedTuningSpec"],Ip(i,o));const r=s(e,["tunedModelDisplayName"]);t!==void 0&&r!=null&&a(t,["tunedModelDisplayName"],r);const l=s(e,["description"]);t!==void 0&&l!=null&&a(t,["description"],l);const u=s(e,["epochCount"]);t!==void 0&&u!=null&&a(t,["supervisedTuningSpec","hyperParameters","epochCount"],u);const d=s(e,["learningRateMultiplier"]);t!==void 0&&d!=null&&a(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],d);const c=s(e,["exportLastCheckpointOnly"]);t!==void 0&&c!=null&&a(t,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const f=s(e,["adapterSize"]);if(t!==void 0&&f!=null&&a(t,["supervisedTuningSpec","hyperParameters","adapterSize"],f),s(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(s(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function Rp(i,e){const t={},n=s(e,["baseModel"]);n!=null&&a(t,["baseModel"],n);const o=s(e,["trainingDataset"]);o!=null&&a(t,["supervisedTuningSpec","trainingDatasetUri"],Mp(i,o,t));const r=s(e,["config"]);return r!=null&&a(t,["config"],Pp(i,r,t)),t}function kp(i,e){const t={},n=s(e,["name"]);n!=null&&a(t,["model"],n);const o=s(e,["name"]);return o!=null&&a(t,["endpoint"],o),t}function Ho(i,e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const o=s(e,["state"]);o!=null&&a(t,["state"],wo(i,o));const r=s(e,["createTime"]);r!=null&&a(t,["createTime"],r);const l=s(e,["tuningTask","startTime"]);l!=null&&a(t,["startTime"],l);const u=s(e,["tuningTask","completeTime"]);u!=null&&a(t,["endTime"],u);const d=s(e,["updateTime"]);d!=null&&a(t,["updateTime"],d);const c=s(e,["description"]);c!=null&&a(t,["description"],c);const f=s(e,["baseModel"]);f!=null&&a(t,["baseModel"],f);const p=s(e,["_self"]);p!=null&&a(t,["tunedModel"],kp(i,p));const h=s(e,["distillationSpec"]);h!=null&&a(t,["distillationSpec"],h);const m=s(e,["experiment"]);m!=null&&a(t,["experiment"],m);const g=s(e,["labels"]);g!=null&&a(t,["labels"],g);const y=s(e,["pipelineJob"]);y!=null&&a(t,["pipelineJob"],y);const _=s(e,["serviceAccount"]);_!=null&&a(t,["serviceAccount"],_);const S=s(e,["tunedModelDisplayName"]);return S!=null&&a(t,["tunedModelDisplayName"],S),t}function Dp(i,e){const t={},n=s(e,["nextPageToken"]);n!=null&&a(t,["nextPageToken"],n);const o=s(e,["tunedModels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>Ho(i,l))),a(t,["tuningJobs"],r)}return t}function Np(i,e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const o=s(e,["metadata"]);o!=null&&a(t,["metadata"],o);const r=s(e,["done"]);r!=null&&a(t,["done"],r);const l=s(e,["error"]);return l!=null&&a(t,["error"],l),t}function bp(i,e){const t={},n=s(e,["checkpointId"]);n!=null&&a(t,["checkpointId"],n);const o=s(e,["epoch"]);o!=null&&a(t,["epoch"],o);const r=s(e,["step"]);r!=null&&a(t,["step"],r);const l=s(e,["endpoint"]);return l!=null&&a(t,["endpoint"],l),t}function Vp(i,e){const t={},n=s(e,["model"]);n!=null&&a(t,["model"],n);const o=s(e,["endpoint"]);o!=null&&a(t,["endpoint"],o);const r=s(e,["checkpoints"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>bp(i,u))),a(t,["checkpoints"],l)}return t}function sn(i,e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const o=s(e,["state"]);o!=null&&a(t,["state"],wo(i,o));const r=s(e,["createTime"]);r!=null&&a(t,["createTime"],r);const l=s(e,["startTime"]);l!=null&&a(t,["startTime"],l);const u=s(e,["endTime"]);u!=null&&a(t,["endTime"],u);const d=s(e,["updateTime"]);d!=null&&a(t,["updateTime"],d);const c=s(e,["error"]);c!=null&&a(t,["error"],c);const f=s(e,["description"]);f!=null&&a(t,["description"],f);const p=s(e,["baseModel"]);p!=null&&a(t,["baseModel"],p);const h=s(e,["tunedModel"]);h!=null&&a(t,["tunedModel"],Vp(i,h));const m=s(e,["supervisedTuningSpec"]);m!=null&&a(t,["supervisedTuningSpec"],m);const g=s(e,["tuningDataStats"]);g!=null&&a(t,["tuningDataStats"],g);const y=s(e,["encryptionSpec"]);y!=null&&a(t,["encryptionSpec"],y);const _=s(e,["partnerModelTuningSpec"]);_!=null&&a(t,["partnerModelTuningSpec"],_);const S=s(e,["distillationSpec"]);S!=null&&a(t,["distillationSpec"],S);const I=s(e,["experiment"]);I!=null&&a(t,["experiment"],I);const P=s(e,["labels"]);P!=null&&a(t,["labels"],P);const D=s(e,["pipelineJob"]);D!=null&&a(t,["pipelineJob"],D);const N=s(e,["serviceAccount"]);N!=null&&a(t,["serviceAccount"],N);const V=s(e,["tunedModelDisplayName"]);return V!=null&&a(t,["tunedModelDisplayName"],V),t}function $p(i,e){const t={},n=s(e,["nextPageToken"]);n!=null&&a(t,["nextPageToken"],n);const o=s(e,["tuningJobs"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>sn(i,l))),a(t,["tuningJobs"],r)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fp extends Je{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Rt(Oe.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(t);{const n=await this.tuneMldevInternal(t);let o="";return n.metadata!==void 0&&n.metadata.tunedModel!==void 0?o=n.metadata.tunedModel:n.name!==void 0&&n.name.includes("/operations/")&&(o=n.name.split("/operations/")[0]),{name:o,state:Zt.JOB_STATE_QUEUED}}}}async getInternal(e){var t,n,o,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Sp(this.apiClient,e);return u=E("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>sn(this.apiClient,f))}else{const c=yp(this.apiClient,e);return u=E("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>Ho(this.apiClient,f))}}async listInternal(e){var t,n,o,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=wp(this.apiClient,e);return u=E("tuningJobs",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),l.then(f=>{const p=$p(this.apiClient,f),h=new Pi;return Object.assign(h,p),h})}else{const c=Cp(this.apiClient,e);return u=E("tunedModels",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>{const p=Dp(this.apiClient,f),h=new Pi;return Object.assign(h,p),h})}}async tuneInternal(e){var t,n;let o,r="",l={};if(this.apiClient.isVertexAI()){const u=Rp(this.apiClient,e);return r=E("tuningJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>sn(this.apiClient,d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,n;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ep(this.apiClient,e);return r=E("tunedModels",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),o.then(d=>Np(this.apiClient,d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lp{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Up=1024*1024*8,Bp=3,Gp=1e3,qp=2,Ut="x-goog-upload-status";async function Op(i,e,t){var n,o,r;let l=0,u=0,d=new Kt(new Response),c="upload";for(l=i.size;u<l;){const p=Math.min(Up,l-u),h=i.slice(u,u+p);u+p>=l&&(c+=", finalize");let m=0,g=Gp;for(;m<Bp&&(d=await t.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((n=d==null?void 0:d.headers)===null||n===void 0)&&n[Ut]));)m++,await Jp(g),g=g*qp;if(u+=p,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[Ut])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(d==null?void 0:d.json());if(((r=d==null?void 0:d.headers)===null||r===void 0?void 0:r[Ut])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function Hp(i){return{size:i.size,type:i.type}}function Jp(i){return new Promise(e=>setTimeout(e,i))}class Wp{async upload(e,t,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Op(e,t,n)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Hp(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zp{create(e,t,n){return new Yp(e,t,n)}}class Yp{constructor(e,t,n){this.url=e,this.headers=t,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const to="x-goog-api-key";class Zp{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(to)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(to,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kp="gl-node/";class Xp{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const n=Zs(e,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion;const o=new Zp(this.apiKey);this.apiClient=new ff({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Kp+"web",uploader:new Wp,downloader:new Lp}),this.models=new Pf(this.apiClient),this.live=new Sf(this.apiClient,o,new zp),this.chats=new xa(this.models,this.apiClient),this.caches=new Ca(this.apiClient),this.files=new Va(this.apiClient),this.operations=new Bf(this.apiClient),this.authTokens=new gp(this.apiClient),this.tunings=new Fp(this.apiClient)}}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */function Qp(i){const e=atob(i),t=e.length,n=new Uint8Array(t);for(let o=0;o<t;o++)n[o]=e.charCodeAt(o);return n}async function jp(i,e,t,n){const o=e.createBuffer(n,i.length/2/n,t),r=new Int16Array(i.buffer),l=r.length,u=new Float32Array(l);for(let d=0;d<l;d++)u[d]=r[d]/32768;for(let d=0;d<n;d++){const c=u.filter((f,p)=>p%n===d);o.copyToChannel(c,d)}return o}var eh=Object.defineProperty,th=Object.getOwnPropertyDescriptor,A=(i,e,t,n)=>{for(var o=n>1?void 0:n?th(e,t):e,r=i.length-1,l;r>=0;r--)(l=i[r])&&(o=(n?l(e,t,o):l(o))||o);return n&&o&&eh(e,t,o),o};const nh=new Xp({apiKey:void 0,apiVersion:"v1alpha"});let ih="lyria-realtime-exp";function no(i,e){let t=0;return(...n)=>{const o=Date.now();o-t>=e&&(i(...n),t=o)}}const te=new Map([["Bossa Nova","#9900ff"],["Techno","#5200ff"],["House","#9900ff"],["Funk","#2af6de"],["Disco","#ffdd28"],["Soul","#3dffab"],["Jazz","#d8ff3e"],["Staccato Rhythms","#ffdd28"],["Neo Soul","#ff0000"],["Trip Hop","#00ff00"],["Rain","#2af6de"]]);Array.from(te.keys());const Bt=Array.from(te.values()).concat(["#0000ff","#ffff00","#00ffff","#ff00ff","#ffffff"]);function Xe(i,e){const t=te.get(i);return t||Jo(e)}function Jo(i){const e=Bt.filter(t=>!i.includes(t));return e.length===0?Bt[Math.floor(Math.random()*Bt.length)]:e[Math.floor(Math.random()*e.length)]}const Gt={none:{rate:0,arrows:0},up1:{rate:.01/50,arrows:1},up2:{rate:.05/50,arrows:2},up3:{rate:.1/50,arrows:3},down1:{rate:-.01/50,arrows:-1},down2:{rate:-.05/50,arrows:-2},down3:{rate:-.1/50,arrows:-3}};let Ce=class extends j{constructor(){super(),this.value=0,this.color="#000",this.velocityBehavior="bounce",this.velocityMode="none",this.velocityTimer=null,this.dragStartPos=0,this.dragStartValue=0,this.containerBounds=null,this.handlePointerDown=this.handlePointerDown.bind(this),this.handlePointerMove=this.handlePointerMove.bind(this),this.handleTouchMove=this.handleTouchMove.bind(this),this.handlePointerUp=this.handlePointerUp.bind(this),this.handleUpClick=this.handleUpClick.bind(this),this.handleDownClick=this.handleDownClick.bind(this),this.handlePauseClick=this.handlePauseClick.bind(this),this.updateVelocity=this.updateVelocity.bind(this)}getDisplayValue(){return this.value*50}setFromDisplayValue(i){this.value=i/50}handlePointerDown(i){i.preventDefault(),this.velocityMode="none",this.updateVelocityTimer(),this.containerBounds=this.scrollContainer.getBoundingClientRect(),this.dragStartPos=i.clientY,this.dragStartValue=this.value,document.body.classList.add("dragging"),window.addEventListener("pointermove",this.handlePointerMove),window.addEventListener("touchmove",this.handleTouchMove,{passive:!1}),window.addEventListener("pointerup",this.handlePointerUp,{once:!0}),this.updateValueFromPosition(i.clientY)}handlePointerMove(i){this.updateValueFromPosition(i.clientY)}handleTouchMove(i){i.preventDefault(),this.updateValueFromPosition(i.touches[0].clientY)}handlePointerUp(i){window.removeEventListener("pointermove",this.handlePointerMove),document.body.classList.remove("dragging"),this.containerBounds=null}handleWheel(i){i.preventDefault(),this.velocityMode="none",this.updateVelocityTimer();const e=i.deltaY;this.value=this.value+e*-.005,this.value=Math.max(0,Math.min(2,this.value)),this.dispatchInputEvent()}updateValueFromPosition(i){if(!this.containerBounds)return;const e=this.containerBounds.height,t=i-this.containerBounds.top,n=1-Math.max(0,Math.min(e,t))/e;this.value=n*2,this.dispatchInputEvent()}dispatchInputEvent(){this.dispatchEvent(new CustomEvent("input",{detail:this.value}))}handleUpClick(i){i.preventDefault(),i.stopPropagation(),this.cycleUpVelocity()}handleDownClick(i){i.preventDefault(),i.stopPropagation(),this.cycleDownVelocity()}handlePauseClick(i){i.preventDefault(),i.stopPropagation(),this.velocityMode="none",this.updateVelocityTimer()}cycleUpVelocity(){const i=["none","up1","up2","up3"],e=i.indexOf(this.velocityMode);if(e===-1||this.velocityMode.startsWith("down"))this.velocityMode="up1";else{const t=(e+1)%i.length;this.velocityMode=i[t]}this.updateVelocityTimer()}cycleDownVelocity(){const i=["none","down1","down2","down3"],e=i.indexOf(this.velocityMode);if(e===-1||this.velocityMode.startsWith("up"))this.velocityMode="down1";else{const t=(e+1)%i.length;this.velocityMode=i[t]}this.updateVelocityTimer()}updateVelocityTimer(){this.velocityTimer!==null&&(clearInterval(this.velocityTimer),this.velocityTimer=null),Gt[this.velocityMode].rate!==0&&(this.velocityTimer=window.setInterval(()=>{this.updateVelocity()},100))}updateVelocity(){const e=Gt[this.velocityMode].rate/10;let t=this.value+e;t>2?this.velocityBehavior==="stop"?(t=2,this.velocityMode="none",this.updateVelocityTimer()):this.velocityBehavior==="bounce"?(t=2,this.flipVelocityDirection()):this.velocityBehavior==="flip"&&(t=0):t<0&&(this.velocityBehavior==="stop"?(t=0,this.velocityMode="none",this.updateVelocityTimer()):this.velocityBehavior==="bounce"?(t=0,this.flipVelocityDirection()):this.velocityBehavior==="flip"&&(t=2)),this.value=t,this.dispatchInputEvent()}flipVelocityDirection(){const i={none:"none",up1:"down1",up2:"down2",up3:"down3",down1:"up1",down2:"up2",down3:"up3"};this.velocityMode=i[this.velocityMode],this.updateVelocityTimer()}connectedCallback(){super.connectedCallback(),this.updateVelocityTimer()}disconnectedCallback(){super.disconnectedCallback(),this.velocityTimer!==null&&(clearInterval(this.velocityTimer),this.velocityTimer=null)}renderVelocityArrows(i,e){const t=Gt[this.velocityMode],n=i==="up"&&t.arrows>0||i==="down"&&t.arrows<0,o=Math.abs(t.arrows),r=[];for(let l=0;l<e;l++){let u;if(i==="up"){const c=e-1-l;u=n&&c<o}else u=n&&l<o;const d=ot({arrow:!0,[i]:!0,active:u,inactive:n&&!u});r.push(J`<div class=${d}></div>`)}return r}render(){const i=this.value/2*100,e=yo({height:`${i}%`,backgroundColor:this.color,display:this.value>.01?"block":"none"}),t=this.getDisplayValue().toFixed(2),n=ot({"pause-icon":!0,active:this.velocityMode==="none"});return J`
      <div class="main-container">
        <div
          class="scroll-container"
          @pointerdown=${this.handlePointerDown}
          @wheel=${this.handleWheel}>
          <div class="slider-container">
            <div id="thumb" style=${e}></div>
          </div>
          <div class="value-display">${t}</div>
        </div>
        <div class="velocity-controls">
          <button class="velocity-button" @click=${this.handleUpClick}>
            ${this.renderVelocityArrows("up",3)}
          </button>
          <button class="pause-button" @click=${this.handlePauseClick}>
            <div class=${n}></div>
          </button>
          <button class="velocity-button" @click=${this.handleDownClick}>
            ${this.renderVelocityArrows("down",3)}
          </button>
        </div>
      </div>
    `}};Ce.styles=_e`
    :host {
      cursor: ns-resize;
      position: relative;
      height: 100%;
      display: flex;
      justify-content: center;
      flex-direction: column;
      align-items: center;
      padding: 5px;
    }
    .main-container {
      width: 100%;
      flex-grow: 1;
      display: flex;
      flex-direction: row;
      justify-content: center;
      align-items: center;
      gap: 0.5vmin;
    }
    .scroll-container {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100%;
    }
    .value-display {
      font-size: 1.3vmin;
      color: #ccc;
      margin: 0.5vmin 0;
      user-select: none;
      text-align: center;
      font-weight: bold;
    }
    .slider-container {
      position: relative;
      width: 10px;
      height: 100%;
      background-color: #0009;
      border-radius: 4px;
    }
    #thumb {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      border-radius: 4px;
      box-shadow: 0 0 3px rgba(0, 0, 0, 0.7);
    }
    .velocity-controls {
      display: flex;
      flex-direction: column;
      gap: 0.2vmin;
      align-items: center;
    }
    .velocity-button {
      background: none;
      border: none;
      cursor: pointer;
      padding: 0.4vmin;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.2vmin;
      width: 4vmin;
      min-height: 3vmin;
    }
    .velocity-button:hover {
      background-color: #333;
      border-radius: 4px;
    }
    .arrow {
      width: 0;
      height: 0;
      border-style: solid;
      transition: opacity 0.2s ease;
    }
    .arrow.up {
      border-left: 0.6vmin solid transparent;
      border-right: 0.6vmin solid transparent;
      border-bottom: 0.8vmin solid #666;
      margin-bottom: 0.2vmin;
    }
    .arrow.down {
      border-left: 0.6vmin solid transparent;
      border-right: 0.6vmin solid transparent;
      border-top: 0.8vmin solid #666;
      margin-top: 0.2vmin;
    }
    .arrow.active {
      border-bottom-color: white !important;
      border-top-color: white !important;
    }
    .arrow.inactive {
      opacity: 0.2;
    }
    .pause-button {
      background: none;
      border: none;
      cursor: pointer;
      padding: 0.6vmin;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 4vmin;
      height: 3vmin;
      margin: 0.2vmin 0;
    }
    .pause-button:hover {
      background-color: #333;
      border-radius: 4px;
    }
    .pause-icon {
      width: 1.2vmin;
      height: 1.2vmin;
      background-color: #666;
      border-radius: 2px;
    }
    .pause-icon.active {
      background-color: white;
    }
  `;A([O({type:Number})],Ce.prototype,"value",2);A([O({type:String})],Ce.prototype,"color",2);A([O({type:String})],Ce.prototype,"velocityBehavior",2);A([X()],Ce.prototype,"velocityMode",2);A([de(".scroll-container")],Ce.prototype,"scrollContainer",2);Ce=A([ce("weight-slider")],Ce);const mn=class mn extends j{renderIcon(){return le``}renderSVG(e){return J`
      <svg
        width="140"
        height="140"
        viewBox="0 -10 140 150"
        fill="none"
        xmlns="http://www.w3.org/2000/svg">
        <rect
          x="22"
          y="6"
          width="96"
          height="96"
          rx="48"
          fill="black"
          fill-opacity="0.05" />
        <rect
          x="23.5"
          y="7.5"
          width="93"
          height="93"
          rx="46.5"
          stroke="black"
          stroke-opacity="0.3"
          stroke-width="3" />
        <g filter="url(#filter0_ddi_1048_7373)">
          <rect
            x="25"
            y="9"
            width="90"
            height="90"
            rx="45"
            fill="white"
            fill-opacity="0.05"
            shape-rendering="crispEdges" />
        </g>
        ${e||this.renderIcon()}
        <defs>
          <filter
            id="filter0_ddi_1048_7373"
            x="0"
            y="0"
            width="140"
            height="140"
            filterUnits="userSpaceOnUse"
            color-interpolation-filters="sRGB">
            <feFlood flood-opacity="0" result="BackgroundImageFix" />
            <feColorMatrix
              in="SourceAlpha"
              type="matrix"
              values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
              result="hardAlpha" />
            <feOffset dy="2" />
            <feGaussianBlur stdDeviation="4" />
            <feComposite in2="hardAlpha" operator="out" />
            <feColorMatrix
              type="matrix"
              values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
            <feBlend
              mode="normal"
              in2="BackgroundImageFix"
              result="effect1_dropShadow_1048_7373" />
            <feColorMatrix
              in="SourceAlpha"
              type="matrix"
              values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
              result="hardAlpha" />
            <feOffset dy="16" />
            <feGaussianBlur stdDeviation="12.5" />
            <feComposite in2="hardAlpha" operator="out" />
            <feColorMatrix
              type="matrix"
              values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
            <feBlend
              mode="normal"
              in2="effect1_dropShadow_1048_7373"
              result="effect2_dropShadow_1048_7373" />
            <feBlend
              mode="normal"
              in="SourceGraphic"
              in2="effect2_dropShadow_1048_7373"
              result="shape" />
            <feColorMatrix
              in="SourceAlpha"
              type="matrix"
              values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
              result="hardAlpha" />
            <feOffset dy="3" />
            <feGaussianBlur stdDeviation="1.5" />
            <feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1" />
            <feColorMatrix
              type="matrix"
              values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.05 0" />
            <feBlend
              mode="normal"
              in2="shape"
              result="effect3_innerShadow_1048_7373" />
          </filter>
        </defs>
      </svg>`}render(){return J`${this.renderSVG()}<div class="hitbox"></div>`}};mn.styles=_e`
    :host {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: none;
    }
    :host(:hover) svg {
      transform: scale(1.2);
    }
    svg {
      width: 100%;
      height: 100%;
      transition: transform 0.5s cubic-bezier(0.25, 1.56, 0.32, 0.99);
    }
    .hitbox {
      pointer-events: all;
      position: absolute;
      width: 65%;
      aspect-ratio: 1;
      top: 9%;
      border-radius: 50%;
      cursor: pointer;
    }
  `;let He=mn,wt=class extends He{constructor(){super(...arguments),this.playbackState="stopped"}renderPause(){return le`<path
      d="M75.0037 69V39H83.7537V69H75.0037ZM56.2537 69V39H65.0037V69H56.2537Z"
      fill="#FEFEFE"
    />`}renderPlay(){return le`<path d="M60 71.5V36.5L87.5 54L60 71.5Z" fill="#FEFEFE" />`}renderLoading(){return le`<path shape-rendering="crispEdges" class="loader" d="M70,74.2L70,74.2c-10.7,0-19.5-8.7-19.5-19.5l0,0c0-10.7,8.7-19.5,19.5-19.5
            l0,0c10.7,0,19.5,8.7,19.5,19.5l0,0"/>`}renderIcon(){return this.playbackState==="playing"?this.renderPause():this.playbackState==="loading"?this.renderLoading():this.renderPlay()}};wt.styles=[He.styles,_e`
      .loader {
        stroke: #ffffff;
        stroke-width: 3;
        stroke-linecap: round;
        animation: spin linear 1s infinite;
        transform-origin: center;
        transform-box: fill-box;
      }
      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(359deg);
        }
      }
    `];A([O({type:String})],wt.prototype,"playbackState",2);wt=A([ce("play-pause-button")],wt);let io=class extends He{renderResetIcon(){return le`
    <g stroke="#FEFEFE" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" fill="none">
      <!-- Circular refresh arrow -->
      <circle cx="70" cy="54" r="12" stroke-dasharray="30 8"></circle>
      <!-- Arrow head -->
      <path d="M82 54 L77 49 L77 59 Z" fill="#FEFEFE"></path>
    </g>`}renderIcon(){return this.renderResetIcon()}};io=A([ce("reset-button")],io);let oo=class extends He{renderAddIcon(){return le`<path d="M67 40 H73 V52 H85 V58 H73 V70 H67 V58 H55 V52 H67 Z" fill="#FEFEFE" />`}renderIcon(){return this.renderAddIcon()}};oo=A([ce("add-prompt-button")],oo);let Te=class extends j{constructor(){super(...arguments),this.message="",this.showing=!1,this.actionText="",this.showClose=!0}render(){return J`<div class=${ot({showing:this.showing,toast:!0})}>
      <div class="message-content">${this.message}</div>
      <div class="button-container">
        ${this.actionText?J`
          <button class="action-button" @click=${this.handleAction}>
            ${this.actionText}
          </button>
        `:""}
        ${this.showClose?J`
          <button class="close-button" @click=${this.hide}>✕</button>
        `:""}
      </div>
    </div>`}show(i,e,t,n=!0){this.showing=!0,this.message=i,this.actionText=e||"",this.actionCallback=t,this.showClose=n}hide(){this.showing=!1,this.actionText="",this.actionCallback=void 0}handleAction(){this.actionCallback&&this.actionCallback(),this.hide()}};Te.styles=_e`
    .toast {
      line-height: 1.6;
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #000;
      color: white;
      padding: 15px;
      border-radius: 5px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 15px;
      min-width: 200px;
      max-width: 80vw;
      transition: transform 0.5s cubic-bezier(0.19, 1, 0.22, 1);
      z-index: 999999;
    }
    .close-button {
      border-radius: 100px;
      aspect-ratio: 1;
      border: none;
      color: #000;
      cursor: pointer;
      background: white;
    }
    .action-button {
      border-radius: 5px;
      border: none;
      padding: 8px 16px;
      cursor: pointer;
      font-weight: bold;
      background: #5200ff;
      color: white;
      margin-left: 10px;
    }
    .action-button:hover {
      background: #6a1aff;
    }
    .toast:not(.showing) {
      transition-duration: 1s;
      transform: translate(-50%, -200%);
    }
    .message-content {
      flex: 1;
    }
    .button-container {
      display: flex;
      gap: 10px;
      align-items: center;
    }
  `;A([O({type:String})],Te.prototype,"message",2);A([O({type:Boolean})],Te.prototype,"showing",2);A([O({type:String})],Te.prototype,"actionText",2);A([O({type:Function})],Te.prototype,"actionCallback",2);A([O({type:Boolean})],Te.prototype,"showClose",2);Te=A([ce("toast-message")],Te);let Y=class extends j{constructor(){super(...arguments),this.promptId="",this.text="",this.weight=0,this.color="",this.velocityBehavior="bounce",this.isDropdownOpen=!1,this.filteredPresets=[]}handlePromptInputFocus(){this.isDropdownOpen=!0,this.updateFilteredPresets(),this.updateComplete.then(()=>{this.positionDropdown()})}positionDropdown(){if(this.dropdown&&this.promptInput){const i=this.promptInput.getBoundingClientRect();this.dropdown.style.left=`${i.left}px`,this.dropdown.style.top=`${i.bottom}px`,this.dropdown.style.width=`${i.width}px`}}handlePromptInputBlur(){setTimeout(()=>{this.isDropdownOpen=!1},150)}handlePromptInputChange(i){const e=i.target;this.text=e.value,this.updateFilteredPresets(),this.dispatchPromptChange()}handlePromptInputKeyDown(i){if(i.key==="Enter"){i.preventDefault();const e=this.text.trim();if(e&&!te.has(e)){const t=Array.from(te.values()),n=Jo(t);te.set(e,n),this.updateFilteredPresets()}this.isDropdownOpen=!1,this.promptInput.blur(),this.dispatchPromptChange()}else i.key==="Escape"&&(this.isDropdownOpen=!1,this.promptInput.blur())}updateFilteredPresets(){this.filteredPresets=Array.from(te.keys())}handlePresetSelect(i){this.text=i,this.isDropdownOpen=!1,this.dispatchPromptChange()}dispatchPromptChange(){this.dispatchEvent(new CustomEvent("prompt-changed",{detail:{promptId:this.promptId,text:this.text,weight:this.weight,color:this.color}}))}dispatchPromptRemoved(){this.dispatchEvent(new CustomEvent("prompt-removed",{detail:this.promptId,bubbles:!0,composed:!0}))}updateWeight(){this.weight=this.weightInput.value,this.dispatchPromptChange()}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.positionDropdown.bind(this))}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("resize",this.positionDropdown.bind(this))}render(){const i=ot({prompt:!0});return J`<div class=${i}>
      <button class="remove-button" @click=${this.dispatchPromptRemoved}
        >×</button
      >
      <weight-slider
        id="weight"
        value=${this.weight}
        color=${this.color}
        .velocityBehavior=${this.velocityBehavior}
        @input=${this.updateWeight}></weight-slider>
      <div class="controls">
        <div class="input-container">
          <input
            id="prompt-input"
            type="text"
            .value=${this.text}
            @input=${this.handlePromptInputChange}
            @keydown=${this.handlePromptInputKeyDown}
            @focus=${this.handlePromptInputFocus}
            @blur=${this.handlePromptInputBlur}
            placeholder="Type or select a prompt..."
          />
          ${this.isDropdownOpen?J`
            <div id="dropdown">
              ${this.filteredPresets.map(e=>{const t=te.get(e)||"#eee",n=this.text===e;return J`
                  <div 
                    class="option" 
                    style="color: ${t}; font-weight: bold; background-color: ${n?"#3a3a3a":"transparent"};"
                    @click=${()=>this.handlePresetSelect(e)}
                  >
                    ${e} ${n?"✓":""}
                  </div>
                `})}
              ${!te.has(this.text)&&this.text.trim()!==""?J`
                <div class="option" style="color: #ccc; font-style: italic;">
                  Press Enter to add "${this.text}"
                </div>
              `:""}
            </div>
          `:""}
        </div>
      </div>
    </div>`}};Y.styles=_e`
    .prompt {
      position: relative;
      height: 100%;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      box-sizing: border-box;
      overflow: visible;
      background-color: #2a2a2a;
      border-radius: 5px;
    }
    .remove-button {
      position: absolute;
      top: 1.2vmin;
      left: 1.2vmin;
      background: #666;
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 2.8vmin;
      height: 2.8vmin;
      font-size: 1.8vmin;
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 2.8vmin;
      cursor: pointer;
      opacity: 0.5;
      transition: opacity 0.2s;
      z-index: 10;
    }
    .remove-button:hover {
      opacity: 1;
    }
    weight-slider {
      /* Calculate height: 100% of parent minus controls height and margin */
      max-height: calc(100% - 9vmin);
      flex: 1;
      min-height: 10vmin;
      width: 100%;
      box-sizing: border-box;
      overflow: hidden;
      margin: 2vmin 0 1vmin;
    }
    .controls {
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
      align-items: center;
      gap: 0.2vmin;
      width: 100%;
      height: 8vmin;
      padding: 0 0.5vmin;
      box-sizing: border-box;
      margin-bottom: 1vmin;
      position: relative;
      z-index: 1;
    }
    #text {
      font-family: 'Google Sans', sans-serif;
      font-size: 1.8vmin;
      width: 100%;
      flex-grow: 1;
      max-height: 100%;
      padding: 0.4vmin;
      box-sizing: border-box;
      text-align: center;
      word-wrap: break-word;
      overflow-y: auto;
      border: none;
      outline: none;
      -webkit-font-smoothing: antialiased;
      color: #fff;
      scrollbar-width: thin;
      scrollbar-color: #666 #1a1a1a;
    }
    #text::-webkit-scrollbar {
      width: 6px;
    }
    #text::-webkit-scrollbar-track {
      background: #0009;
      border-radius: 3px;
    }
    #text::-webkit-scrollbar-thumb {
      background-color: #666;
      border-radius: 3px;
    }
    :host([filtered='true']) #text {
      background: #da2000;
    }
    .input-container {
      position: relative;
      width: 100%;
    }
    #prompt-input {
      font-family: 'Google Sans', sans-serif;
      font-size: 1.6vmin;
      width: 100%;
      padding: 0.4vmin;
      box-sizing: border-box;
      text-align: center;
      border: 1px solid #666;
      border-radius: 3px;
      background: #2a2a2a;
      color: #eee;
      outline: none;
    }
    #prompt-input:focus {
      border-color: #5200ff;
      box-shadow: 0 0 0 2px rgba(82, 0, 255, 0.3);
    }
    #dropdown {
      position: fixed;
      background-color: #2a2a2a;
      border: 1px solid #666;
      border-top: none;
      border-radius: 0 0 5px 5px;
      max-height: 200px;
      overflow-y: auto;
      z-index: 999999;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      min-width: 200px;
    }
    #dropdown .option {
      padding: 0.6vmin;
      cursor: pointer;
      color: #eee;
      border-bottom: 1px solid #444;
    }
    #dropdown .option:hover {
      background-color: #3a3a3a;
    }
    #dropdown .option:last-child {
      border-bottom: none;
    }
  `;A([O({type:String,reflect:!0})],Y.prototype,"promptId",2);A([O({type:String})],Y.prototype,"text",2);A([O({type:Number})],Y.prototype,"weight",2);A([O({type:String})],Y.prototype,"color",2);A([O({type:String})],Y.prototype,"velocityBehavior",2);A([de("weight-slider")],Y.prototype,"weightInput",2);A([de("#text")],Y.prototype,"textInput",2);A([de("#prompt-input")],Y.prototype,"promptInput",2);A([de("#dropdown")],Y.prototype,"dropdown",2);A([X()],Y.prototype,"isDropdownOpen",2);A([X()],Y.prototype,"filteredPresets",2);Y=A([ce("prompt-controller")],Y);let re=class extends j{constructor(){super(...arguments),this.defaultConfig={temperature:1.1,topK:40,guidance:4},this.config=this.defaultConfig,this.showAdvanced=!1,this.autoDensity=!0,this.lastDefinedDensity=.5,this.autoBrightness=!0,this.lastDefinedBrightness=.5,this.velocityBehavior="bounce"}resetToDefaults(){this.config=this.defaultConfig,this.autoDensity=!0,this.lastDefinedDensity=.5,this.autoBrightness=!0,this.lastDefinedBrightness=.5,this.velocityBehavior="bounce",this.dispatchSettingsChange()}updateSliderBackground(i){if(i.type!=="range")return;const e=Number(i.min)||0,t=Number(i.max)||100,o=(Number(i.value)-e)/(t-e)*100;i.style.setProperty("--value-percent",`${o}%`)}handleInputChange(i){var r;const e=i.target,t=e.id;let n=e.value;if(e.type==="number"||e.type==="range")n=e.value===""?void 0:Number(e.value),e.type==="range"&&this.updateSliderBackground(e);else if(e.type==="checkbox")n=e.checked;else if(e.type==="select-one"||e.tagName==="SELECT"){const l=e;(r=l.options[l.selectedIndex])!=null&&r.disabled?n=void 0:n=e.value}const o={...this.config,[t]:n};o.density!==void 0&&(this.lastDefinedDensity=o.density,console.log(this.lastDefinedDensity)),o.brightness!==void 0&&(this.lastDefinedBrightness=o.brightness),t==="auto-density"?(this.autoDensity=!!n,o.density=this.autoDensity?void 0:this.lastDefinedDensity):t==="auto-brightness"?(this.autoBrightness=!!n,o.brightness=this.autoBrightness?void 0:this.lastDefinedBrightness):t==="velocity-behavior"&&(this.velocityBehavior=n,this.dispatchVelocityBehaviorChange()),this.config=o,this.dispatchSettingsChange()}updated(i){var e;super.updated(i),i.has("config")&&((e=this.shadowRoot)==null||e.querySelectorAll('input[type="range"]').forEach(t=>{const n=this.config[t.id];typeof n=="number"?t.value=String(n):(t.id==="density"||t.id==="brightness")&&(t.value=String(n??.5)),this.updateSliderBackground(t)}))}dispatchSettingsChange(){this.dispatchEvent(new CustomEvent("settings-changed",{detail:this.config,bubbles:!0,composed:!0}))}dispatchVelocityBehaviorChange(){this.dispatchEvent(new CustomEvent("velocity-behavior-changed",{detail:this.velocityBehavior,bubbles:!0,composed:!0}))}toggleAdvancedSettings(){this.showAdvanced=!this.showAdvanced}render(){const i=this.config,e=ot({"advanced-settings":!0,visible:this.showAdvanced}),t=new Map([["Auto","SCALE_UNSPECIFIED"],["C Major / A Minor","C_MAJOR_A_MINOR"],["C# Major / A# Minor","D_FLAT_MAJOR_B_FLAT_MINOR"],["D Major / B Minor","D_MAJOR_B_MINOR"],["D# Major / C Minor","E_FLAT_MAJOR_C_MINOR"],["E Major / C# Minor","E_MAJOR_D_FLAT_MINOR"],["F Major / D Minor","F_MAJOR_D_MINOR"],["F# Major / D# Minor","G_FLAT_MAJOR_E_FLAT_MINOR"],["G Major / E Minor","G_MAJOR_E_MINOR"],["G# Major / F Minor","A_FLAT_MAJOR_F_MINOR"],["A Major / F# Minor","A_MAJOR_G_FLAT_MINOR"],["A# Major / G Minor","B_FLAT_MAJOR_G_MINOR"],["B Major / G# Minor","B_MAJOR_A_FLAT_MINOR"]]);return J`
      <div class="core-settings-row">
        <div class="setting">
          <label for="temperature"
            >Temperature<span>${i.temperature.toFixed(1)}</span></label
          >
          <input
            type="range"
            id="temperature"
            min="0"
            max="3"
            step="0.1"
            .value=${i.temperature.toString()}
            @input=${this.handleInputChange} />
        </div>
        <div class="setting">
          <label for="guidance"
            >Guidance<span>${i.guidance.toFixed(1)}</span></label
          >
          <input
            type="range"
            id="guidance"
            min="0"
            max="6"
            step="0.1"
            .value=${i.guidance.toString()}
            @input=${this.handleInputChange} />
        </div>
        <div class="setting">
          <label for="topK">Top K<span>${i.topK}</span></label>
          <input
            type="range"
            id="topK"
            min="1"
            max="100"
            step="1"
            .value=${i.topK.toString()}
            @input=${this.handleInputChange} />
        </div>
      </div>
      <hr class="divider" />
      <div class=${e}>
        <div class="setting">
          <label for="seed">Seed</label>
          <input
            type="number"
            id="seed"
            .value=${i.seed??""}
            @input=${this.handleInputChange}
            placeholder="Auto" />
        </div>
        <div class="setting">
          <label for="bpm">BPM</label>
          <input
            type="number"
            id="bpm"
            min="60"
            max="180"
            .value=${i.bpm??""}
            @input=${this.handleInputChange}
            placeholder="Auto" />
        </div>
        <div class="setting" auto=${this.autoDensity}>
          <label for="density">Density</label>
          <input
            type="range"
            id="density"
            min="0"
            max="1"
            step="0.05"
            .value=${this.lastDefinedDensity}
            @input=${this.handleInputChange} />
          <div class="auto-row">
            <input
              type="checkbox"
              id="auto-density"
              .checked=${this.autoDensity}
              @input=${this.handleInputChange} />
            <label for="auto-density">Auto</label>
            <span>${(this.lastDefinedDensity??.5).toFixed(2)}</span>
          </div>
        </div>
        <div class="setting" auto=${this.autoBrightness}>
          <label for="brightness">Brightness</label>
          <input
            type="range"
            id="brightness"
            min="0"
            max="1"
            step="0.05"
            .value=${this.lastDefinedBrightness}
            @input=${this.handleInputChange} />
          <div class="auto-row">
            <input
              type="checkbox"
              id="auto-brightness"
              .checked=${this.autoBrightness}
              @input=${this.handleInputChange} />
            <label for="auto-brightness">Auto</label>
            <span>${(this.lastDefinedBrightness??.5).toFixed(2)}</span>
          </div>
        </div>
        <div class="setting">
          <label for="scale">Scale</label>
          <select
            id="scale"
            .value=${i.scale||"SCALE_UNSPECIFIED"}
            @change=${this.handleInputChange}>
            <option value="" disabled selected>Select Scale</option>
            ${[...t.entries()].map(([n,o])=>J`<option value=${o}>${n}</option>`)}
          </select>
        </div>
        <div class="setting">
          <label for="velocity-behavior">Velocity Behavior</label>
          <select
            id="velocity-behavior"
            .value=${this.velocityBehavior}
            @change=${this.handleInputChange}>
            <option value="stop">Stop</option>
            <option value="bounce">Bounce</option>
            <option value="flip">Flip</option>
          </select>
        </div>
        <div class="setting">
          <div class="setting checkbox-setting">
            <input
              type="checkbox"
              id="muteBass"
              .checked=${!!i.muteBass}
              @change=${this.handleInputChange} />
            <label for="muteBass" style="font-weight: normal;">Mute Bass</label>
          </div>
          <div class="setting checkbox-setting">
            <input
              type="checkbox"
              id="muteDrums"
              .checked=${!!i.muteDrums}
              @change=${this.handleInputChange} />
            <label for="muteDrums" style="font-weight: normal;"
              >Mute Drums</label
            >
          </div>
          <div class="setting checkbox-setting">
            <input
              type="checkbox"
              id="onlyBassAndDrums"
              .checked=${!!i.onlyBassAndDrums}
              @change=${this.handleInputChange} />
            <label for="onlyBassAndDrums" style="font-weight: normal;"
              >Only Bass & Drums</label
            >
          </div>
        </div>
      </div>
      <div class="advanced-toggle" @click=${this.toggleAdvancedSettings}>
        ${this.showAdvanced?"Hide":"Show"} Advanced Settings
      </div>
    `}};re.styles=_e`
    :host {
      display: block;
      padding: 2vmin;
      background-color: #2a2a2a;
      color: #eee;
      box-sizing: border-box;
      border-radius: 5px;
      font-family: 'Google Sans', sans-serif;
      font-size: 1.5vmin;
      overflow-y: auto;
      scrollbar-width: thin;
      scrollbar-color: #666 #1a1a1a;
      transition: width 0.3s ease-out max-height 0.3s ease-out;
    }
    :host([showadvanced]) {
      max-height: 40vmin;
    }
    :host::-webkit-scrollbar {
      width: 6px;
    }
    :host::-webkit-scrollbar-track {
      background: #1a1a1a;
      border-radius: 3px;
    }
    :host::-webkit-scrollbar-thumb {
      background-color: #666;
      border-radius: 3px;
    }
    .setting {
      margin-bottom: 0.5vmin;
      display: flex;
      flex-direction: column;
      gap: 0.5vmin;
    }
    label {
      font-weight: bold;
      display: flex;
      justify-content: space-between;
      align-items: center;
      white-space: nowrap;
      user-select: none;
    }
    label span:last-child {
      font-weight: normal;
      color: #ccc;
      min-width: 3em;
      text-align: right;
    }
    input[type='range'] {
      --track-height: 8px;
      --track-bg: #0009;
      --track-border-radius: 4px;
      --thumb-size: 16px;
      --thumb-bg: #5200ff;
      --thumb-border-radius: 50%;
      --thumb-box-shadow: 0 0 3px rgba(0, 0, 0, 0.7);
      --value-percent: 0%;
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: var(--track-height);
      background: transparent;
      cursor: pointer;
      margin: 0.5vmin 0;
      border: none;
      padding: 0;
      vertical-align: middle;
    }
    input[type='range']::-webkit-slider-runnable-track {
      width: 100%;
      height: var(--track-height);
      cursor: pointer;
      border: none;
      background: linear-gradient(
        to right,
        var(--thumb-bg) var(--value-percent),
        var(--track-bg) var(--value-percent)
      );
      border-radius: var(--track-border-radius);
    }
    input[type='range']::-moz-range-track {
      width: 100%;
      height: var(--track-height);
      cursor: pointer;
      background: var(--track-bg);
      border-radius: var(--track-border-radius);
      border: none;
    }
    input[type='range']::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      height: var(--thumb-size);
      width: var(--thumb-size);
      background: var(--thumb-bg);
      border-radius: var(--thumb-border-radius);
      box-shadow: var(--thumb-box-shadow);
      cursor: pointer;
      margin-top: calc((var(--thumb-size) - var(--track-height)) / -2);
    }
    input[type='range']::-moz-range-thumb {
      height: var(--thumb-size);
      width: var(--thumb-size);
      background: var(--thumb-bg);
      border-radius: var(--thumb-border-radius);
      box-shadow: var(--thumb-box-shadow);
      cursor: pointer;
      border: none;
    }
    input[type='number'],
    input[type='text'],
    select {
      background-color: #2a2a2a;
      color: #eee;
      border: 1px solid #666;
      border-radius: 3px;
      padding: 0.4vmin;
      font-size: 1.5vmin;
      font-family: inherit;
      box-sizing: border-box;
    }
    input[type='number'] {
      width: 6em;
    }
    input[type='text'] {
      width: 100%;
    }
    input[type='text']::placeholder {
      color: #888;
    }
    input[type='number']:focus,
    input[type='text']:focus {
      outline: none;
      border-color: #5200ff;
      box-shadow: 0 0 0 2px rgba(82, 0, 255, 0.3);
    }
    select {
      width: 100%;
    }
    select:focus {
      outline: none;
      border-color: #5200ff;
    }
    select option {
      background-color: #2a2a2a;
      color: #eee;
    }
    .checkbox-setting {
      flex-direction: row;
      align-items: center;
      gap: 1vmin;
    }
    input[type='checkbox'] {
      cursor: pointer;
      accent-color: #5200ff;
    }
    .core-settings-row {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      gap: 4vmin;
      margin-bottom: 1vmin;
      justify-content: space-evenly;
    }
    .core-settings-row .setting {
      min-width: 16vmin;
    }
    .core-settings-row label span:last-child {
      min-width: 2.5em;
    }
    .advanced-toggle {
      cursor: pointer;
      margin: 2vmin 0 1vmin 0;
      color: #aaa;
      text-decoration: underline;
      user-select: none;
      font-size: 1.4vmin;
      width: fit-content;
    }
    .advanced-toggle:hover {
      color: #eee;
    }
    .advanced-settings {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(10vmin, 1fr));
      gap: 3vmin;
      overflow: hidden;
      max-height: 0;
      opacity: 0;
      transition:
        max-height 0.3s ease-out,
        opacity 0.3s ease-out;
    }
    .advanced-settings.visible {
      max-width: 120vmin;
      max-height: 40vmin;
      opacity: 1;
    }
    hr.divider {
      display: none;
      border: none;
      border-top: 1px solid #666;
      margin: 2vmin 0;
      width: 100%;
    }
    :host([showadvanced]) hr.divider {
      display: block;
    }
    .auto-row {
      display: flex;
      align-items: center;
      gap: 0.5vmin;
    }
    .setting[auto='true'] input[type='range'] {
      pointer-events: none;
      filter: grayscale(100%);
    }
    .auto-row span {
      margin-left: auto;
    }
    .auto-row label {
      cursor: pointer;
    }
    .auto-row input[type='checkbox'] {
      cursor: pointer;
      margin: 0;
    }
  `;A([X()],re.prototype,"config",2);A([X()],re.prototype,"showAdvanced",2);A([X()],re.prototype,"autoDensity",2);A([X()],re.prototype,"lastDefinedDensity",2);A([X()],re.prototype,"autoBrightness",2);A([X()],re.prototype,"lastDefinedBrightness",2);A([X()],re.prototype,"velocityBehavior",2);re=A([ce("settings-controller")],re);let K=class extends j{constructor(i){super(),this.sampleRate=48e3,this.audioContext=new(window.AudioContext||window.webkitAudioContext)({sampleRate:this.sampleRate}),this.outputNode=this.audioContext.createGain(),this.nextStartTime=0,this.bufferTime=2,this.playbackState="stopped",this.filteredPrompts=new Set,this.velocityBehavior="bounce",this.connectionError=!0,this.reconnectionAttempts=0,this.maxReconnectionAttempts=3,this.reconnectionDelay=2e3,this.lastPlaybackTime=0,this.isUserActive=!0,this.lastFrameTime=Date.now(),this.currentDeltaTime=0,this.gradientPoints=new Map,this.setSessionPrompts=no(async()=>{const e=Array.from(this.prompts.values()).filter(t=>!this.filteredPrompts.has(t.text)&&t.weight!==0);try{this.session&&await this.session.setWeightedPrompts({weightedPrompts:e})}catch(t){this.toastMessage.show(t.message),this.pauseAudio()}},200),this.updateSettings=no(async(...e)=>{var n;const t=e[0];await((n=this.session)==null?void 0:n.setMusicGenerationConfig({musicGenerationConfig:t.detail}))},200),this.prompts=i,this.nextPromptId=i.size,this.outputNode.connect(this.audioContext.destination),this.outputNode.gain.value=1,this.startOneHourTimer()}async firstUpdated(){await this.connectToSession(),this.setSessionPrompts(),this.startBackgroundAnimation()}startOneHourTimer(){this.oneHourTimer&&clearTimeout(this.oneHourTimer),this.oneHourTimer=window.setTimeout(()=>{this.playbackState==="playing"&&(this.pauseAudio(),this.showOneHourPrompt())},36e5)}showOneHourPrompt(){this.toastMessage.show("Are you still listening?","Yes",()=>{this.continueListening()},!1)}continueListening(){this.startOneHourTimer(),this.handlePlayPause()}async attemptReconnection(){if(this.reconnectionAttempts>=this.maxReconnectionAttempts){this.toastMessage.show("Connection failed after multiple attempts. Please check your internet connection.","Retry",()=>{this.reconnectionAttempts=0,this.attemptReconnection()});return}this.reconnectionAttempts++,this.playbackState="loading";try{await this.connectToSession(),await this.setSessionPrompts(),this.lastPlaybackTime>0&&this.loadAudio(),this.reconnectionAttempts=0,this.reconnectionDelay=2e3}catch{this.reconnectionDelay=Math.min(this.reconnectionDelay*2,1e4),setTimeout(()=>{this.attemptReconnection()},this.reconnectionDelay)}}async connectToSession(){this.session=await nh.live.music.connect({model:ih,callbacks:{onmessage:async i=>{var e,t;if(console.log(`Received message from the server: %s
`),console.log(i),i.setupComplete&&(this.connectionError=!1),i.filteredPrompt&&(this.filteredPrompts=new Set([...this.filteredPrompts,i.filteredPrompt.text]),this.toastMessage.show(i.filteredPrompt.filteredReason)),((e=i.serverContent)==null?void 0:e.audioChunks)!==void 0){if(this.playbackState==="paused"||this.playbackState==="stopped")return;this.lastPlaybackTime=Date.now();const n=await jp(Qp((t=i.serverContent)==null?void 0:t.audioChunks[0].data),this.audioContext,48e3,2),o=this.audioContext.createBufferSource();if(o.buffer=n,o.connect(this.outputNode),this.nextStartTime===0&&(this.nextStartTime=this.audioContext.currentTime+this.bufferTime,setTimeout(()=>{this.playbackState="playing"},this.bufferTime*1e3)),this.nextStartTime<this.audioContext.currentTime){console.log("under run"),this.playbackState="loading",this.nextStartTime=0;return}o.start(this.nextStartTime),this.nextStartTime+=n.duration}},onerror:i=>{console.log(`Error occurred: %s
`,JSON.stringify(i)),this.connectionError=!0,this.stopAudio(),setTimeout(()=>{this.attemptReconnection()},1e3)},onclose:i=>{console.log("Connection closed."),this.connectionError=!0,this.stopAudio(),setTimeout(()=>{this.attemptReconnection()},1e3)}}})}dispatchPromptsChange(){this.dispatchEvent(new CustomEvent("prompts-changed",{detail:this.prompts}))}handlePromptChanged(i){i.stopPropagation();const e={...i.detail},t=te.get(e.text);if(t&&e.color!==t&&(e.color=t),this.prompts.has(e.promptId)){const n=new Map(this.prompts);n.set(e.promptId,e),this.prompts=n,this.setSessionPrompts(),this.dispatchPromptsChange()}else console.warn(`Attempted to update non-existent prompt ID: ${e.promptId}`)}makeBackground(){const i=o=>Math.min(Math.max(o,0),1),n=[];return[...this.prompts.values()].forEach((o,r)=>{const l=i(o.weight/.5)*.6,u=Math.round(l*255).toString(16).padStart(2,"0"),d=o.weight/2,c=this.getDVDPosition(o.promptId,o.weight),f=`radial-gradient(circle at ${c.x*100}% ${c.y*100}%, ${o.color}${u} 0px, ${o.color}00 ${d*100}%)`;n.push(f)}),n.join(", ")}initializeDVDPoint(i,e){if(!this.gradientPoints.has(i)){const t=.2+Math.random()*.6,n=.2+Math.random()*.6,r=.1-e*50/100*(.1-.05),l=(Math.random()>.5?1:-1)*(r+Math.random()*r*.3),u=(Math.random()>.5?1:-1)*(r+Math.random()*r*.3);this.gradientPoints.set(i,{x:t,y:n,vx:l,vy:u})}}getDVDPosition(i,e){this.initializeDVDPoint(i,e);const t=this.gradientPoints.get(i),o=.1-e*50/100*(.1-.05),r=Math.sqrt(t.vx*t.vx+t.vy*t.vy);if(r>0){const l=t.vx/r,u=t.vy/r;t.vx=l*o,t.vy=u*o}if(this.playbackState==="playing"&&this.currentDeltaTime>0){let l=t.x+t.vx*this.currentDeltaTime,u=t.y+t.vy*this.currentDeltaTime,d=t.vx,c=t.vy;(l<=0||l>=1)&&(d=-d,l=Math.max(0,Math.min(1,l))),(u<=0||u>=1)&&(c=-c,u=Math.max(0,Math.min(1,u))),this.gradientPoints.set(i,{x:l,y:u,vx:d,vy:c})}return{x:t.x,y:t.y}}async handlePlayPause(){this.playbackState==="playing"?this.pauseAudio():this.playbackState==="paused"||this.playbackState==="stopped"?(this.connectionError?await this.attemptReconnection():this.loadAudio(),this.startOneHourTimer()):this.playbackState==="loading"&&this.stopAudio(),console.debug("handlePlayPause")}pauseAudio(){var i;(i=this.session)==null||i.pause(),this.playbackState="paused",this.outputNode.gain.setValueAtTime(1,this.audioContext.currentTime),this.outputNode.gain.linearRampToValueAtTime(0,this.audioContext.currentTime+.1),this.nextStartTime=0,this.outputNode=this.audioContext.createGain(),this.outputNode.connect(this.audioContext.destination),this.outputNode.gain.value=1,this.oneHourTimer&&clearTimeout(this.oneHourTimer)}loadAudio(){var i;this.audioContext.resume(),(i=this.session)==null||i.play(),this.playbackState="loading",this.outputNode.gain.setValueAtTime(0,this.audioContext.currentTime),this.outputNode.gain.linearRampToValueAtTime(1,this.audioContext.currentTime+.1)}stopAudio(){var i;(i=this.session)==null||i.stop(),this.playbackState="stopped",this.outputNode.gain.setValueAtTime(0,this.audioContext.currentTime),this.outputNode.gain.linearRampToValueAtTime(1,this.audioContext.currentTime+.1),this.nextStartTime=0,this.oneHourTimer&&clearTimeout(this.oneHourTimer)}async handleAddPrompt(){var r;const i=`prompt-${this.nextPromptId++}`,e=[...this.prompts.values()].map(l=>l.color),t={promptId:i,text:"New Prompt",weight:0,color:Xe("New Prompt",e)},n=new Map(this.prompts);n.set(i,t),this.prompts=n,await this.setSessionPrompts(),await this.updateComplete;const o=this.renderRoot.querySelector(`prompt-controller[promptId="${i}"]`);if(o){o.scrollIntoView({behavior:"smooth",block:"nearest",inline:"end"});const l=(r=o.shadowRoot)==null?void 0:r.querySelector("#text");if(l){l.focus();const u=window.getSelection(),d=document.createRange();d.selectNodeContents(l),u==null||u.removeAllRanges(),u==null||u.addRange(d)}}}handlePromptRemoved(i){i.stopPropagation();const e=i.detail;if(this.prompts.has(e)){this.prompts.delete(e);const t=new Map(this.prompts);this.prompts=t,this.setSessionPrompts(),this.dispatchPromptsChange()}else console.warn(`Attempted to remove non-existent prompt ID: ${e}`)}handlePromptsContainerWheel(i){const e=i.currentTarget;i.deltaX!==0&&(i.preventDefault(),e.scrollLeft+=i.deltaX)}handleVolumeChange(i){const e=i.detail;this.outputNode.gain.value=e}handleVelocityBehaviorChange(i){this.velocityBehavior=i.detail}async handleReset(){var i,e;this.connectionError?await this.attemptReconnection():(this.pauseAudio(),(i=this.session)==null||i.resetContext(),this.settingsController.resetToDefaults(),(e=this.session)==null||e.setMusicGenerationConfig({musicGenerationConfig:{}}),setTimeout(this.loadAudio.bind(this),100)),this.startOneHourTimer()}startBackgroundAnimation(){const i=()=>{const e=Date.now();this.currentDeltaTime=(e-this.lastFrameTime)/1e3,this.lastFrameTime=e,this.requestUpdate(),this.animationFrame=requestAnimationFrame(i)};this.animationFrame=requestAnimationFrame(i)}stopBackgroundAnimation(){this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=void 0)}disconnectedCallback(){super.disconnectedCallback(),this.oneHourTimer&&clearTimeout(this.oneHourTimer),this.stopBackgroundAnimation()}render(){const i=yo({backgroundImage:this.makeBackground()});return J`<div id="background" style=${i}></div>
      <div class="prompts-area">
        <div
          id="prompts-container"
          @prompt-removed=${this.handlePromptRemoved}
          @wheel=${this.handlePromptsContainerWheel}>
          ${this.renderPrompts()}
        </div>
        <div class="add-prompt-button-container">
          <add-prompt-button @click=${this.handleAddPrompt}></add-prompt-button>
        </div>
      </div>
      <div id="settings-container">
        <settings-controller
          @settings-changed=${this.updateSettings}
          @velocity-behavior-changed=${this.handleVelocityBehaviorChange}></settings-controller>
      </div>
      <div class="playback-container">
        <play-pause-button
          @click=${this.handlePlayPause}
          .playbackState=${this.playbackState}></play-pause-button>
        <reset-button @click=${this.handleReset}></reset-button>
        <volume-button @volume-change=${this.handleVolumeChange}></volume-button>
      </div>
      <toast-message></toast-message>`}renderPrompts(){return[...this.prompts.values()].map(i=>J`<prompt-controller
        .promptId=${i.promptId}
        filtered=${this.filteredPrompts.has(i.text)}
        .text=${i.text}
        .weight=${i.weight}
        .color=${i.color}
        .velocityBehavior=${this.velocityBehavior}
        @prompt-changed=${this.handlePromptChanged}>
      </prompt-controller>`)}};K.styles=_e`
    :host {
      height: 100%;
      width: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      box-sizing: border-box;
      padding: 2vmin;
      position: relative;
      font-size: 1.8vmin;
    }
    #background {
      position: absolute;
      height: 100%;
      width: 100%;
      z-index: -1;
      background: #111;
    }
    .prompts-area {
      display: flex;
      align-items: flex-end;
      justify-content: center;
      flex: 4;
      width: 100%;
      margin-top: 2vmin;
      gap: 2vmin;
    }
    #prompts-container {
      display: flex;
      flex-direction: row;
      align-items: flex-end;
      flex-shrink: 1;
      height: 100%;
      gap: 2vmin;
      margin-left: 10vmin;
      padding: 1vmin;
      overflow-x: auto;
      overflow-y: visible;
      scrollbar-width: thin;
      scrollbar-color: #666 #1a1a1a;
    }
    #prompts-container::-webkit-scrollbar {
      height: 8px;
    }
    #prompts-container::-webkit-scrollbar-track {
      background: #111;
      border-radius: 4px;
    }
    #prompts-container::-webkit-scrollbar-thumb {
      background-color: #666;
      border-radius: 4px;
    }
    #prompts-container::-webkit-scrollbar-thumb:hover {
      background-color: #777;
    }
    /* Add pseudo-elements for centering while keeping elements visible when scrolling */
    #prompts-container::before,
    #prompts-container::after {
      content: '';
      flex: 1;
      min-width: 0.5vmin;
    }
    .add-prompt-button-container {
      display: flex;
      align-items: flex-end;
      height: 100%;
      flex-shrink: 0;
    }
    #settings-container {
      flex: 1;
      margin: 2vmin 0 1vmin 0;
    }
    .playback-container {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-shrink: 0;
    }
    play-pause-button,
    add-prompt-button,
    reset-button {
      width: 12vmin;
      flex-shrink: 0;
    }
    prompt-controller {
      height: 100%;
      max-height: 80vmin;
      min-width: 14vmin;
      max-width: 16vmin;
      flex: 1;
    }
  `;A([O({type:Object,attribute:!1})],K.prototype,"prompts",2);A([X()],K.prototype,"playbackState",2);A([O({type:Object})],K.prototype,"filteredPrompts",2);A([X()],K.prototype,"velocityBehavior",2);A([de("play-pause-button")],K.prototype,"playPauseButton",2);A([de("toast-message")],K.prototype,"toastMessage",2);A([de("settings-controller")],K.prototype,"settingsController",2);A([de("volume-button")],K.prototype,"volumeButton",2);K=A([ce("prompt-dj")],K);function oh(i){const e=sh(),t=new K(e);i.appendChild(t)}function sh(){const{localStorage:i}=window,e="2.0";i.getItem("promptsVersion")!==e&&(i.removeItem("prompts"),i.setItem("promptsVersion",e),console.log("Cleared old prompts, using new defaults"));const n=i.getItem("prompts");if(n)try{const r=JSON.parse(n);return console.log("Loading stored prompts",r),new Map(r.map(l=>[l.promptId,l]))}catch(r){console.error("Failed to parse stored prompts",r)}console.log("No stored prompts, creating prompt presets");const o=[{promptId:"prompt-0",text:"House",weight:1.6,color:Xe("House",[])},{promptId:"prompt-1",text:"Techno",weight:.1,color:Xe("Techno",[])},{promptId:"prompt-2",text:"Staccato Rhythms",weight:.4,color:Xe("Staccato Rhythms",[])},{promptId:"prompt-3",text:"Rain",weight:.4,color:Xe("Rain",[])}];return new Map(o.map(r=>[r.promptId,r]))}function rh(i){oh(i)}rh(document.body);let Mt=class extends j{constructor(){super(...arguments),this.volume=1}handleVolumeChange(i){const e=i.target;this.volume=parseFloat(e.value),this.dispatchEvent(new CustomEvent("volume-change",{detail:this.volume,bubbles:!0}))}renderVolumeIcon(){return this.volume===0?le`
        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
        <line x1="23" y1="9" x2="17" y2="15"></line>
        <line x1="17" y1="9" x2="23" y2="15"></line>
      `:this.volume<.5?le`
        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
        <path d="m15.54 8.46a5 5 0 0 1 0 7.07"></path>
      `:le`
        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
        <path d="m15.54 8.46a5 5 0 0 1 0 7.07"></path>
        <path d="m19.07 4.93a10 10 0 0 1 0 14.14"></path>
      `}render(){return J`
      <div class="volume-container">
        <svg class="volume-icon" viewBox="0 0 24 24">
          ${this.renderVolumeIcon()}
        </svg>
        <input
          type="range"
          class="volume-slider"
          min="0"
          max="1"
          step="0.01"
          .value=${this.volume.toString()}
          @input=${this.handleVolumeChange}
        />
      </div>
    `}};Mt.styles=_e`
    :host {
      display: flex;
      align-items: center;
      gap: 0.5vmin;
      color: #eee;
      font-family: 'Google Sans', sans-serif;
    }
    .volume-container {
      display: flex;
      align-items: center;
      gap: 0.5vmin;
    }
    .volume-icon {
      width: 3vmin;
      height: 3vmin;
      fill: none;
      stroke: currentColor;
      stroke-width: 2;
      stroke-linecap: round;
      stroke-linejoin: round;
    }
    .volume-slider {
      width: 8vmin;
      height: 0.5vmin;
      -webkit-appearance: none;
      appearance: none;
      background: #333;
      border-radius: 2px;
      outline: none;
      cursor: pointer;
    }
    .volume-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 1.5vmin;
      height: 1.5vmin;
      background: #5200ff;
      border-radius: 50%;
      cursor: pointer;
    }
    .volume-slider::-moz-range-thumb {
      width: 1.5vmin;
      height: 1.5vmin;
      background: #5200ff;
      border-radius: 50%;
      cursor: pointer;
      border: none;
    }
  `;A([O({type:Number})],Mt.prototype,"volume",2);Mt=A([ce("volume-button")],Mt);
